import{X as f,a3 as Ce}from"./router-D2A3v33YTGz9.js";import{Y as U,X as ae,E as we,Z as le,a as Le,_ as ye}from"./PolarisVizContext-DMg2GlMLMFOp.js";import{b6 as d}from"./common-BQgXWrz2O5Bt.js";import{m as $,j as W,P as N,L as De,I as Te,J as ce,d as ue,f as de,z as Ne,l as Se,E as be,F as ke,K as Re,h as $e}from"./ChartContainer-XfUOX9D3-me7.js";import{a as S,u as Y,g as he}from"./estimateStringWidthWithOffset-BtLey8F0hhhu.js";import{a as Pe}from"./array-Bfc_6sabVbOq.js";import{bP as Ae}from"./render-common-CBDTO_er9s96.js";import{u as Me}from"./useUniqueId-DgOphXTvxuqE.js";function fe(e){return Object.entries(e).filter(([t,s])=>s!=null).reduce((t,[s,o])=>({...t,[s]:o}),{})}function Z(e,t){if((i=e.length)>1)for(var s=1,o,r,n=e[t[0]],i,a=n.length;s<i;++s)for(r=n,n=e[t[s]],o=0;o<a;++o)n[o][1]+=n[o][0]=isNaN(r[o][1])?r[o][0]:r[o][1]}function B(e){for(var t=e.length,s=new Array(t);--t>=0;)s[t]=t;return s}function Oe(e,t){return e[t]}function Ge(e){const t=[];return t.key=e,t}function je(){var e=$([]),t=B,s=Z,o=Oe;function r(n){var i=Array.from(e.apply(this,arguments),Ge),a,h=i.length,l=-1,u;for(const x of n)for(a=0,++l;a<h;++a)(i[a][l]=[0,+o(x,i[a].key,l,n)]).data=x;for(a=0,u=Pe(t(i));a<h;++a)i[u[a]].index=a;return s(i,u),i}return r.keys=function(n){return arguments.length?(e=typeof n=="function"?n:$(Array.from(n)),r):e},r.value=function(n){return arguments.length?(o=typeof n=="function"?n:$(+n),r):o},r.order=function(n){return arguments.length?(t=n==null?B:typeof n=="function"?n:$(Array.from(n)),r):t},r.offset=function(n){return arguments.length?(s=n??Z,r):s},r}function Ve(e,t){if((h=e.length)>0)for(var s,o=0,r,n,i,a,h,l=e[t[0]].length;o<l;++o)for(i=a=0,s=0;s<h;++s)(n=(r=e[t[s]][o])[1]-r[0])>0?(r[0]=i,r[1]=i+=n):n<0?(r[1]=a,r[0]=a+=n):(r[0]=0,r[1]=n)}function We(e){return e.charAt(0).toUpperCase()+e.slice(1)}function j(e,t){return e[`${U.camelCaseName}${We(t)}`]}function F(e,t){return`${e}:${U.name}:${t}`}function Be(e){const t=d.useRef(null);return t.current||(t.current=K.create()),K.update(t.current,e),t.current}const K={create(){const e=(...t)=>e.callback(...t);return e},update(e,t){e.callback=t}};function ge({type:e,onIndexChange:t,enabled:s=!0}){const o=Be(t),{id:r}=S();d.useEffect(()=>{if(!r||!s)return;const n=F(r,e);return window.addEventListener(n,o),()=>{window.removeEventListener(n,o)}},[r,e,o,s])}const Fe=(e,t)=>{const s=e.map(({color:o,offset:r})=>`${o} ${r}%`);return`linear-gradient(${t}deg, ${s.join(",")})`};function He(e,t=90){return W(e)?Fe(e,t):e}var ze={ColorPreview:"_ColorPreview_1wdtl_144"};const Ue=305,J=8;function Ye({color:e}){const t=He(e,Ue);return f.jsx("span",{className:ze.ColorPreview,style:{background:t,height:J,width:J}})}const Q=1,Xe=1,qe=5;var ee={Container:"_Container_8b5v1_1",SVG:"_SVG_8b5v1_5"};const V=2,Ze=2;function Ke({color:e,lineStyle:t,width:s=Ze,strokeDasharray:o="none"}){const r=d.useRef(Me("linePreviewGradient")),n=W(e)?`url(#${r.current})`:e;return f.jsx("span",{className:ee.Container,style:{height:V,width:N},children:f.jsxs("svg",{className:ee.SVG,height:`${V}px`,viewBox:`0 0 ${N} ${V}`,width:`${N}px`,xmlns:ae,children:[W(e)?f.jsx("defs",{children:f.jsx(De,{id:r.current,gradient:e,x1:"0%",x2:"100%",y1:"0%",y2:"0%",gradientUnits:"userSpaceOnUse"})}):null,Je({color:n,lineStyle:t,width:s,strokeDasharray:o})]})})}function Je({color:e,lineStyle:t,width:s,strokeDasharray:o}){switch(t){case"dotted":return f.jsx("g",{fill:e,children:[...Array(3)].map((r,n)=>f.jsx("circle",{cx:Q+n*qe,cy:Q,r:Xe},n))});case"dashed":return f.jsx("path",{d:`M1 1 H${N}`,stroke:e,strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:s,strokeDasharray:Te});default:return f.jsx("path",{d:`M1 1 H${N}`,stroke:e,strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:s,strokeDasharray:o})}}function Qe({color:e,lineStyle:t,shape:s="Bar"}){switch(s){case"Line":{const o=t??"solid";return f.jsx(Ke,{color:e,lineStyle:o})}default:return f.jsx(Ye,{color:e})}}function ve(){const[e,t]=d.useState([]);return ge({type:we,onIndexChange:({detail:s})=>{t(s.indexes)}}),{hiddenIndexes:e}}function et(e){const{containerBounds:t}=S(),{enabled:s=!0,root:o="chart"}=e||{},{id:r}=S(),{hiddenIndexes:n}=ve();d.useEffect(()=>{if(!s)return;const i=document.querySelectorAll(`#${o}_${r} [${U.dataAttribute}-watch="true"]`);function a(l){var u;const x=(u=l.target)===null||u===void 0?void 0:u.dataset,g=j(x,"index"),c=j(x,"type");if(r==null||c==null)return;const v=new CustomEvent(F(r,c),{detail:{index:Number(g)}});window.dispatchEvent(v)}function h(l){var u;const x=(u=l.target)===null||u===void 0?void 0:u.dataset,g=j(x,"type");if(r==null||g==null)return;const c=new CustomEvent(F(r,g),{detail:{index:-1}});window.dispatchEvent(c)}return i.forEach(l=>{l.addEventListener("mouseenter",a),l.addEventListener("mouseleave",h),l.addEventListener("focus",a),l.addEventListener("blur",h)}),()=>{i.forEach(l=>{l.removeEventListener("mouseenter",a),l.removeEventListener("mouseleave",h),l.removeEventListener("focus",a),l.removeEventListener("blur",h)})}},[r,s,n,o,t])}var me={ChartContainer:"_ChartContainer_11yon_144",SVG:"_SVG_11yon_154"};function tt({children:e,height:t,width:s,style:o={}}){return f.jsx("div",{className:me.ChartContainer,style:{height:t,width:s,...o},children:e})}function nt({width:e,setRef:t,role:s="list",height:o,emptyStateText:r,emptyState:n=!1,children:i}){return f.jsx("svg",{viewBox:`0 0 ${e} ${o}`,xmlns:ae,width:e,height:o,className:me.SVG,role:n?"img":s,"aria-label":n?r:void 0,ref:t,children:i})}const Ct={Div:tt,Svg:nt};function st(e,t,s,o){const{width:r,height:n}=e,i=o==="horizontal";return{height:i?n-t-le:n,width:i?r:r-s}}function wt({colors:e=[],data:t,showLegend:s,direction:o="horizontal",maxWidth:r=0,seriesNameFormatter:n}){const{containerBounds:i,comparisonIndexes:a}=S(),h=s?ce:0,[l,u]=d.useState({height:h,width:r}),x=d.useMemo(()=>s===!1?[]:t.map(({series:E,shape:m})=>E.map(({name:_,color:w,isComparison:T,data:D,metadata:p},I)=>({isHidden:a.includes(I),name:n(_??""),...D&&{value:D.reduce((C,y)=>C+(y.value||0),0).toString()},...p&&{trend:p.trend},color:w,shape:m,isComparison:T}))).flat().map(({color:E,...m},_)=>({...m,color:E??e[_]})),[e,t,n,s,a]),{height:g,width:c}=d.useMemo(()=>s===!1?i:st(i,l.height,l.width,o),[s,i,l.height,l.width,o]);return{legend:x,height:g,width:c,setLegendDimensions:u}}const rt=e=>{const t=d.useRef(document.getElementById(e));function s(){return t.current||(t.current=document.createElement("div"),t.current.id=e,document.body.appendChild(t.current)),t.current}return s()};function te(e,t){return`${t??"stack"}-${e}`}function ot({series:e,labels:t,order:s,offset:o}){const r=je().offset(o).order(s).keys(e.map(({name:i},a)=>te(a,i))),n=t.map((i,a)=>e.reduce((h,{name:l,data:u},x)=>{const g=u[a],c={[te(x,l)]:(g==null?void 0:g.value)==null?0:g.value};return Object.assign(h,c)},{}));return r(n)}function Lt(e){const s=e.reduce((n,i)=>i.data.length>n.data.length?i:n,e[0]).data.map(({key:n})=>`${n}`),o=ot({series:e,labels:s,order:B,offset:Ve}),r=s.map((n,i)=>o.map(a=>a[i]));return{stackedValues:o,formattedStackedValues:r}}let H;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center"})(H||(H={}));let z;(function(e){e[e.Above=0]="Above",e[e.Below=1]="Below",e[e.Inline=2]="Inline",e[e.Center=3]="Center"})(z||(z={}));const it={horizontal:H.Center,vertical:z.Above},yt={x:0,y:0,position:it,activeIndex:null},ne=20,Dt=20;var at={Container:"_Container_ijalm_1"},se={MoreText:"_MoreText_kibmg_1",Tooltip:"_Tooltip_kibmg_11"};const re=8,lt=16,ct=6;var k={Legend:"_Legend_spsas_144",TextContainer:"_TextContainer_spsas_163",Text:"_Text_spsas_163",IconContainer:"_IconContainer_spsas_180"};const P=100;function ut({activeIndex:e=-1,color:t,colorVisionType:s,index:o,isComparison:r,name:n,renderSeriesIcon:i,shape:a,theme:h,value:l,onDimensionChange:u,backgroundColor:x,truncate:g=!1,showLegendValues:c=!1,seriesNameFormatter:v=m=>`${m}`,lineStyle:E}){const m=Y(h),_=d.useRef(null),[w,T]=d.useState(0),D=he(),p=c&&l!=null;d.useEffect(()=>{if(u&&_.current!=null){const{width:y,height:b}=_.current.getBoundingClientRect();T(y),u(o,{width:Math.min(P,Math.round(y)),height:b})}},[u,_,o]);const I=s==null?{}:de({type:s,index:o}),C=x??m.legend.backgroundColor;return f.jsxs("button",{...I,style:{background:C??"none",...ue({activeIndex:e,index:o}),paddingLeft:C?re:0,paddingRight:C?lt:re,gap:ct,maxWidth:g?P:"100%",minWidth:w<P?void 0:P},className:k.Legend,ref:_,title:n,children:[i==null?f.jsx("span",{style:{height:N,width:N},className:k.IconContainer,children:f.jsx(Qe,{lineStyle:r?"dotted":E,shape:a,color:r?m.seriesColors.comparison:t})}):i(),f.jsxs("span",{className:k.TextContainer,style:{fontSize:`${D}px`},children:[f.jsx("span",{className:k.Text,style:{color:m.legend.labelColor},children:v(n)}),p?f.jsx("span",{className:k.Text,style:{color:m.legend.valueColor},children:l}):null]})]})}function xe({activeIndex:e=-1,colorVisionType:t,data:s,theme:o=Le,itemDimensions:r,indexOffset:n=0,backgroundColor:i,truncate:a=!1,showLegendValues:h=!1,seriesNameFormatter:l}){const{hiddenIndexes:u}=ve(),x=d.useCallback((c,v)=>{r!=null&&r.current&&(r.current[c]=v)},[r]),g=s.map((c,v)=>u.includes(v)||c.isHidden===!0?null:f.jsx(ut,{...c,activeIndex:e,colorVisionType:t,index:v+n,theme:o,backgroundColor:i,onDimensionChange:x,truncate:a,showLegendValues:h,seriesNameFormatter:l,lineStyle:c==null?void 0:c.lineStyle},v));return f.jsx(d.Fragment,{children:g})}const oe="legend-toolip",dt=520;function ht({activeIndex:e,colorVisionType:t,data:s,theme:o,label:r,lastVisibleIndex:n=0,setActivatorWidth:i}){const a=Y(),{isFirefox:h}=Ne(),{id:l}=S(),u=`${oe}_${l}`,x=rt(u),g=d.useRef(null),c=d.useRef(null);et({enabled:!0,root:oe});const v=d.useMemo(()=>({top:0,left:0}),[]),[E,m]=d.useState(v),[_,w]=d.useState(!1);d.useEffect(()=>{if(c.current==null)return;const p=c.current.getBoundingClientRect();i==null||i(p.width)},[i]);const T=d.useCallback(()=>{if(g.current==null||c.current==null)return;w(!0);const p=c.current.getBoundingClientRect(),I=g.current.getBoundingClientRect(),C=p.x+window.scrollX,y=p.y+window.scrollY+p.height;function b(){return C+I.width+ne>window.innerWidth?C-I.width+p.width:C}function A(){return y+I.height+ne>=window.innerHeight+window.scrollY?y-I.height-p.height:y}m({top:A(),left:b()})},[m]),D=d.useCallback(p=>{var I;(p==null||(I=p.relatedTarget)===null||I===void 0?void 0:I.id)!==u&&(w(!1),m(v))},[w,m,v,u]);return f.jsxs(d.Fragment,{children:[f.jsx("button",{className:se.MoreText,ref:c,onMouseEnter:T,onMouseLeave:D,onFocus:T,onBlur:D,style:{color:a.legend.labelColor,fontSize:he()},children:r}),Ae.createPortal(f.jsx("div",{className:se.Tooltip,ref:g,onMouseLeave:D,onBlur:D,id:u,style:{visibility:_?"visible":"hidden",zIndex:_?dt:-1e5,background:Se(a.tooltip.backgroundColor,h?1:be),...E},children:f.jsx(xe,{activeIndex:e,colorVisionType:t,data:s,theme:o,indexOffset:n,backgroundColor:"transparent"})}),x)]})}const ie=10;function ft(e){const{direction:t,enableHideOverflow:s,legendItemDimensions:o,data:r}=e,n=d.useMemo(()=>r.filter(h=>h.isHidden!==!0),[r]),{displayedData:i,hiddenData:a}=d.useMemo(()=>{if(!s||!o.current||n.length<=1)return{displayedData:n,hiddenData:[]};if(t==="vertical"){const{height:v}=e;let E=n.length;return o.current.reduce((m,_,w)=>{if(m+_.height+w*ie>v)E=w;else return m+_.height},E),{displayedData:n.slice(0,E||1),hiddenData:n.slice(E||1,n.length)}}const{width:h,leftMargin:l,horizontalMargin:u,activatorWidth:x}=e;let g=n.length;const c=h-l-u-x;return o.current.filter(v=>!!v).reduce((v,E,m)=>{if(v+E.width+m*ie>c)g=m;else return v+E.width},g),{displayedData:n.slice(0,g||1),hiddenData:n.slice(g||1,n.length)}},[s,o,t,e,n]);return{displayedData:i,hiddenData:a}}function Tt({colorVisionType:e,data:t,onDimensionChange:s,direction:o="horizontal",fullWidth:r=!1,position:n="bottom",maxWidth:i,renderLegendContent:a,enableHideOverflow:h=!1,renderHiddenLegendLabel:l=u=>`+${u} more`}){var u;const x=Y(),{setRef:g,entry:c}=ke(),{theme:v,containerBounds:E}=S(),m=d.useRef(ce),_=d.useRef(Re),[w,T]=d.useState(-1),D=n.includes("top"),p=n.includes("left"),{horizontalMargin:I}=x.grid,C=p?0:I,y=d.useRef([{width:0,height:0}]),[b,A]=d.useState(0),M=o==="horizontal"?{direction:"horizontal",data:t,enableHideOverflow:h,legendItemDimensions:y,width:E.width,activatorWidth:b,leftMargin:C,horizontalMargin:I}:{direction:"vertical",data:t,height:E.height,enableHideOverflow:h,legendItemDimensions:y},{displayedData:O,hiddenData:X}=ft(M),Ee=t.filter(L=>L.isHidden!==!0),G=h&&O.length<Ee.length,_e={horizontal:{justifyContent:"flex-end",margin:D?`0 ${I}px ${ye}px ${C}px`:`${le}px ${I}px 0 ${C}px`,flexDirection:"row",flexWrap:h?"nowrap":"wrap"},vertical:{alignItems:"flex-start",margin:`0 ${I}px 0 ${C}px`,flexDirection:"column",maxWidth:r?"none":i,flex:r?1:"initial"},centerTiles:{justifyContent:"center"}},pe=L=>{if(L==="top"||L==="bottom")return{justifyContent:"center"}},Ie={getColorVisionStyles:L=>ue({activeIndex:w,index:L}),getColorVisionEventAttrs:L=>de({type:e,index:L})};return ge({type:e,onIndexChange:({detail:L})=>{T(L.index)}}),d.useEffect(()=>{const L=c==null?void 0:c.contentRect.height,q=c==null?void 0:c.contentRect.width,R={height:L,width:q};c==null||L==null||q==null||Ce({height:m.current,width:_.current},R)||(m.current=R.height,_.current=R.width,s(R))},[c,s]),f.jsx("div",{className:$e(at.Container),ref:g,role:"list",style:{..._e[o],...pe(n)},children:(u=a==null?void 0:a(Ie,w))!==null&&u!==void 0?u:f.jsxs(d.Fragment,{children:[f.jsx(xe,{activeIndex:w,colorVisionType:e,data:G?O:t,theme:v,itemDimensions:h?y:void 0,truncate:G}),G&&f.jsx(ht,{activeIndex:w,colorVisionType:e,data:X,theme:v,label:l(t.length-O.length),lastVisibleIndex:t.length-X.length,setActivatorWidth:A})]})})}function Nt(e={}){const t=fe(e);return{labelFormatter:s=>`${s}`,integersOnly:!1,fixedWidth:!1,maxYOverride:null,...t}}function St(e={}){const t=fe(e);return{labelFormatter:s=>`${s}`,hide:!1,allowLineWrap:!0,...t}}export{Ct as C,it as D,ht as H,Ke as L,Qe as S,yt as T,He as a,et as b,wt as c,Tt as d,St as e,Nt as f,F as g,ft as h,ut as i,ve as j,ge as k,ot as l,Z as m,Lt as n,Ve as o,z as p,H as q,ne as r,B as s,Dt as t,Be as u,rt as v};
//# sourceMappingURL=https://web-sourcemaps.shopify.io/v1/en/getAxisOptions-ZBfQL9C9uyF_.js.map
