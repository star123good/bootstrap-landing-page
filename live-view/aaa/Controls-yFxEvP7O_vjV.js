import{W as i,x as B,X as t}from"./router-D2A3v33YTGz9.js";import{bc as S,b6 as f}from"./common-BQgXWrz2O5Bt.js";import{T as h,ac as z,B as T,eU as j,an as V,s as q,av as D,Z as G}from"./render-common-CBDTO_er9s96.js";import{a as M,L as A,e as H,S as U}from"./LiveView-BtAKJocWST2N.js";const K={store:"Your store"},W={ShopPinTooltip:K},J={[Symbol.for("i18n-id")]:"ShopPinTooltip_1ankwhq",en:W};function xe(){var e=i(1);try{var a=i(1);try{const[s]=S(J),{shopName:n}=B();return t.jsxs(t.Fragment,{children:[t.jsx(h,{variant:"bodyMd",as:"p",fontWeight:"semibold",children:s.translate("ShopPinTooltip.store")}),t.jsx(h,{as:"p",children:n})]})}finally{a.f()}}finally{e.f()}}const X={orderLocation:"{city}, {country}",order:"Order"},Y={OrderTooltip:X},Q={[Symbol.for("i18n-id")]:"OrderTooltip_1nf8czz",en:Y};function be({order:e}){var a=i(1);try{var s=i(1);try{const[n]=S(Q);if(e==null)return null;const[,,,,o,c,l]=e;let d=n.translate("OrderTooltip.order");return o!==""&&l!==""?d=n.translate("OrderTooltip.orderLocation",{city:o,country:l}):o!==""&&l===""?d=o:o===""&&l!==""&&(d=l),t.jsxs(t.Fragment,{children:[t.jsx(h,{variant:"bodySm",as:"p",children:d}),t.jsx(h,{variant:"bodyMd",as:"span",fontWeight:"semibold",children:n.formatCurrency(c,{form:"short"})})]})}finally{s.f()}}finally{a.f()}}const ee="_Container_1374q_1",oe={Container:ee},te={zoomIn:"Zoom in",zoomOut:"Zoom out"},ne={GlobeZoomControl:te},ae={[Symbol.for("i18n-id")]:"ZoomControl_pno9ix",en:ne};function ve({viewState:e,zoomIn:a,zoomOut:s,disableZoomIn:n,disableZoomOut:o}){var c=i(1);try{var l=i(1);try{const[d]=S(ae),{produceClickEvent:g}=M(),m=f.useCallback(()=>{s(),g({buttonHandle:A.ZoomOut,viewState:e})},[e,s,g]),C=f.useCallback(()=>{a(),g({buttonHandle:A.ZoomIn,viewState:e})},[e,a,g]);return t.jsx("div",{className:oe.Container,children:t.jsxs(z,{gap:"100",children:[t.jsx(T,{accessibilityLabel:d.translate("GlobeZoomControl.zoomIn"),onClick:C,disabled:n,size:"large",icon:"plus"}),t.jsx(T,{accessibilityLabel:d.translate("GlobeZoomControl.zoomOut"),onClick:m,disabled:o,size:"large",icon:"minus"})]})})}finally{l.f()}}finally{c.f()}}function se(){const e=f.useContext(H);if(!e)throw new Error("MapContext is not defined");return e}const le=e=>`query GeocodeAddress {
    geocodes(address: "${e}"){
      latitude
      longitude
      }
  }`,F="https://atlas.shopifysvc.com";function re({address:e,onFetchedLocation:a,onError:s}){const n={query:le(e)};return fetch(`${F}/graphql`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Accept:"application/json",Origin:F}}).then(o=>o.json()).then(o=>{var c,l,d,g;(l=(c=o==null?void 0:o.data)==null?void 0:c.geocodes[0])!=null&&l.latitude&&((g=(d=o==null?void 0:o.data)==null?void 0:d.geocodes[0])!=null&&g.longitude)&&a({latitude:o.data.geocodes[0].latitude,longitude:o.data.geocodes[0].longitude})}).catch(s)}const ie={placeholder:"Search location"},ce={RegionTextField:ie},de={[Symbol.for("i18n-id")]:"RegionTextField_yyyndm",en:ce};function ue({searchValue:e,onClearButtonClick:a,onSetSearchValue:s}){var n=i(1);try{var o=i(1);try{const[c]=S(de);return t.jsx(j.TextField,{label:c.translate("RegionTextField.placeholder"),labelHidden:!0,autoComplete:"off",value:e,prefix:t.jsx(V,{tone:"legacy-inherit",type:"search"}),placeholder:c.translate("RegionTextField.placeholder"),onChange:l=>{s(l)},role:"search",clearButton:!0,onClearButtonClick:a})}finally{o.f()}}finally{n.f()}}function fe({onReset:e,onSelect:a,viewState:s}){var n=i(1);try{var o=i(1);try{let c=function(u){C.getPlacePredictions({input:u,types:["(regions)"],sessionToken:I},N)},l=function(u){const p=O.find(({value:r})=>r===u);p!=null&&(g({viewState:s,locationViewSelected:p.label}),b(p.label),m==null?re({address:p.label,onFetchedLocation:r=>{P(r)},onError:()=>{}}):x==null||x.getDetails({placeId:u,fields:["geometry"]},(r,v)=>{var E,L,$,Z;r==null||r.geometry==null||v===google.maps.places.PlacesServiceStatus.OK&&P({latitude:((L=(E=r.geometry)==null?void 0:E.location)==null?void 0:L.lat())??0,longitude:((Z=($=r.geometry)==null?void 0:$.location)==null?void 0:Z.lng())??0,geometry:r.geometry,placeId:u})}),w(new google.maps.places.AutocompleteSessionToken))};const d=q(),{produceLocationSelectionEvent:g}=M(),{map:m}=se(),C=f.useMemo(()=>new google.maps.places.AutocompleteService,[]),x=f.useMemo(()=>m==null?null:new google.maps.places.PlacesService(m),[m]),[y,b]=f.useState(""),[O,_]=f.useState([]),[I,w]=f.useState(void 0),N=f.useCallback((u,p)=>{switch(p===google.maps.places.PlacesServiceStatus.OK&&u&&_(u.map(r=>({value:r.place_id??"",label:r.description}))),p){case google.maps.places.PlacesServiceStatus.OK:case google.maps.places.PlacesServiceStatus.NOT_FOUND:case google.maps.places.PlacesServiceStatus.ZERO_RESULTS:break;default:d.notify(new Error(`Google maps autocomplete service returned: ${p}`),{severity:"error",metaData:{searchValue:y}});break}},[d,y]),k=D(c,U);f.useEffect(()=>{k(y)},[k,y]);const P=f.useCallback(({latitude:u,longitude:p,geometry:r,placeId:v})=>{a!=null&&a({latitude:u,longitude:p,geometry:r,placeId:v})},[a]),R=()=>{b(""),_([]),e==null||e()};return t.jsx(j,{selected:[""],onSelect:([u])=>{l(u)},options:O,textField:t.jsx(ue,{searchValue:y,onClearButtonClick:R,onSetSearchValue:b})},"autocomplete")}finally{o.f()}}finally{n.f()}}function pe({actions:e}){var a=i(1);try{var s=i(1);try{return t.jsx(G,{gap:"400",blockAlign:"center",wrap:!1,children:e.map(n=>t.jsx(T,{accessibilityLabel:n.content,onClick:n.onAction,icon:n.icon,size:"large"},n.id))})}finally{s.f()}}finally{a.f()}}const ge="_Controls_1s4s3_6",me={Controls:ge};function Te({onReset:e,onSelect:a,actions:s,viewState:n}){var o=i(1);try{var c=i(1);try{return t.jsxs("div",{className:me.Controls,children:[t.jsx(fe,{onReset:e,onSelect:a,viewState:n}),t.jsx(pe,{actions:s})]})}finally{c.f()}}finally{o.f()}}export{Te as C,be as O,xe as S,ve as Z,se as u};
//# sourceMappingURL=https://web-sourcemaps.shopify.io/v1/en/Controls-yFxEvP7O_vjV.js.map
