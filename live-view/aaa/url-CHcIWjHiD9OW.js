import{d8 as f,aX as E,eZ as _,fi as R,b6 as l}from"./common-BQgXWrz2O5Bt.js";import{u as U}from"./render-common-CBDTO_er9s96.js";import{cu as g,cE as P}from"./router-D2A3v33YTGz9.js";const y=["hmac","locale","protocol","session","shop","timestamp","host","embedded","id_token",P],O=o("^https://([^/]*\\.myshopify\\.com|[^/]*\\.spin\\.dev)/admin/(oauth|charges)"),X=["^https://accounts\\.shopify\\.com($|/|\\?|#)","^https://admin\\.shopify\\.com($|/$|\\?|#)","^https://admin\\.shopify\\.com/login($|/|\\?|#)","^https://admin\\.shopify\\.com/store/[^/]+/(oauth|shopify_web)","^https://[^/]*\\.myshopify\\.com/admin/(auth|authenticate|oauth|shopify_web)","^https://[^/]*\\.spin.dev/login($|/|\\?|#)","^https://[^/]*\\.spin\\.dev/store/[^/]+/(oauth|shopify_web)","^https://[^/]*\\.spin\\.dev/admin/(auth|oauth|shopify_web)"].map(t=>o(t)),s=`^https://(${["[^/]*\\.myshopify\\.com/admin","admin\\.shopify\\.com/store/[^/]+","[^/]*\\.spin\\.dev/admin","[^/]*\\.spin\\.dev/store/[^/]+"].join("|")})`,B=o(`${s}/charges`),C=o(`${s}/extensibility/app`),H=o(`${s}/apps/.*`),S=o(`${s}/[^/]+`),K=o(`${s}/(oauth/request_grant|app/grant)(?!.*[?&]screenChannelId=)`),h=o(`${s}/apps/([^/#?]+)`),I=o(`${s}/api_permissions/.+`),L=o(`${s}/(api/verify_and_install|oauth/redirect_to_install)`),z=o("^https://[^?]+\\?[^?]*(code=[^?]+hmac=[^?]+|hmac=[^?]+code=[^?]+)"),w=o(`${s}/app/grant.*`),F=[`${s}/(headless).*`].map(t=>o(t));function $(t){const n=new URLSearchParams(t);y.forEach(a=>n.delete(a));const e=n.toString();return e?e.startsWith("?")?e:`?${e}`:""}function N(t){try{if(!t)return;const n=new URL(t);return n.pathname=n.pathname.replace(/\/$/,""),n.search=$(n.search),n.toString()}catch{}}function Y(){const t=U(),n=l.useRef(t);return n.current=t,l.useMemo(()=>{function e(i){const r=n.current.home();if(!i)return r;const p=m(i),A=`${r}${p}`;return new URL(A,window.location.origin).toString()}function a(i){const r=`/extensibility/app?id=${i}`;return e(r)}function c(i,r){const p=n.current.app(i,m(r));return new URL(p,window.location.origin).toString()}return{ensureAbsoluteAdminUrl:e,buildExtensibilityAppUrl:a,buildAdminAppUrl:c}},[])}function k(t){try{const n=new URL(t);return n.protocol==="https:"||n.protocol==="http:"}catch{return!1}}function m(t){return t?t.startsWith("/")?t:`/${t}`:"/"}function o(t){return t.replaceAll("/","\\/")}function u(t){const n=new RegExp(h),e=t.match(n);return e?e[2]:void 0}function j(t){return!!u(t)}function W(t,{handle:n,apiKey:e}){const a=u(t);return a===n||a===e}function q(t){const n=new RegExp(S);return!!t.match(n)}function d(t){const n=new RegExp(h),e=t.match(n);if(e)return m(t.replace(e[0],""))}function Z(t){const n=d(t);if(!n)return;const{pathname:e,search:a}=new URL(n,"https://shopify.com");return{pathname:e,search:a}}function J(t,n){const e=new RegExp(h),a=t.match(e);if(!a)return t;const c=d(t)||{},i=`${a[0]}/../${n}${c}`,r=new URL(i).toString();return N(r)||r}function Q(t){return!!t.match(new RegExp(I))}function T(t){return!!t.match(new RegExp(L))}function x(t){return!!t.match(new RegExp(w))}function V(t,n){const e=f(n.adminDomain);return(E()?_(t):R(t,e,location.search,location.hash))??t}function b(t){if(!T(t))return;const{searchParams:n}=new URL(t);return n.get("api_key")??n.get("client_id")??void 0}function v(t){if(!x(t))return;const{searchParams:n}=new URL(t),{clientId:e}=g(n.get("action")??null);return e??void 0}function tt(t){return b(t)??v(t)??""}export{H as A,B,C as E,F as M,X as O,j as a,S as b,W as c,O as d,N as e,Z as f,d as g,k as h,q as i,V as j,u as k,Q as l,z as m,o as n,K as o,tt as p,J as r,Y as u};
//# sourceMappingURL=https://web-sourcemaps.shopify.io/v1/en/url-CHcIWjHiD9OW.js.map
