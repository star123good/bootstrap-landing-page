const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["domains-extensibility-ui-extensions-CqV79cwYKYsd.js","AdminBlock-BF7AklPT4qt3.js","router-D2A3v33YTGz9.js","common-BQgXWrz2O5Bt.js","render-common-CBDTO_er9s96.js","context-slice-graphql-B0DOwuSsR7A9.js","context-slice-metrics-dyxi7iJePk2a.js","assets/render-common-CCZBw7ZsekEq.css","index-DQ-jTN1CpXfd.js","index4-BImkwknqXFjP.js","index-B4FfpnAY898G.js","index-n5q5TkK-ds9U.js","loaders-common-ci6pdX46YgGm.js","useController-BAtIEeph53UE.js","AppRevokeAccessScopesMutation-Dr_dPVAh3Zp7.js","get-legacy-store-handle-BXlB6R6Uehq2.js","GenerateSessionToken-DR-bIdJFNy_V.js","url-CHcIWjHiD9OW.js","enums-ZAGdov3tNem4.js","index-CrKdLvTyLMrc.js","constants-FmOF2D2YeoVg.js","domains-extensibility-ui-extensions-legacy-CD7uAwCfzHt1.js","index-DQGuFT-p8Pfb.js","context-B_xoUTWzIyFj.js","constants-Cock2LxZB8FI.js","mobileLinkHandler-DyMZtY6DfMrE.js","assets/index-BVD-Y4Pq915K.css","definitions-CaMX74iZjO7I.js","definition-D3q3DMUsSNOS.js","definitions-C0T7G5DChhRN.js","domains-extensibility-app-home-AppHomeProvider-Bud49gQsubFd.js","index-DaW1TqJ53gyx.js","Fullscreen-CKVUShrpWShj.js","useFeature-Ca2R7zfUAkdj.js","redux-DNTqUywUKvJJ.js","defineProperty-CaMoQMXPlGhc.js","api-p2Zhvk3dgOun.js","useHostContext-Cp63N3k1WDy8.js","HostProvider-D-O70Nsp3rMG.js","with-selector-BB_Zp1sA4I0S.js","withFeature-05fKzBdsWgvM.js","index-BlwT22-p6lwZ.js","Header-CwdphCR0bS-Q.js","useReducedMotion-D3M3jtWshGGK.js","assets/Header-dmtRlLeIpLzW.css","useEmbeddedAppContext-DntKcecwfa5F.js","EditorInternal-Bsy--9Wo6WAT.js","index-C-565iWWlWdV.js","index-CqH-8D5WIMlV.js","merge-6dV23QEmjWM5.js","merge-8fVWqmqUJpxu.js","index-CXbGFyugS3Kc.js","utils-DOSJekhD_Ht1.js","index-C_s2pQ845vGj.js","index-C1u6nObCgUFm.js","FlowTopBar-JOSRGvRPN6kX.js","index-BfdxQVAw5hgt.js","Page-DsTZ32UWXyLa.js","usePageProps-DnNRMGaGPlq5.js","assets/usePageProps-BLNbsauhnx2z.css","actionCreators-CFP7G6iEApFb.js","helper-DZqffEIYdSAq.js","assets/FlowTopBar-CJCRLDYbTN_h.css","MainFrame-C-d_m9zPN5jH.js","Frame-CewhKztpCdSI.js","index-yK1_iQN0tLLC.js","reducer-CylpUhbDUxxe.js","utils-DmXKtmn88V2P.js","actionCreators-BqvdzXg8d7_q.js","index-CcsAohHUFuM3.js","useRouterContext-DodOSCwhuipO.js","appUrl-C3uuqf1qiKrP.js","resolver-DJmJBAyrZA83.js","LeaveConfirmation-DCbW3pSzDrub.js","useLeaveConfirmation-CONBtW98nTQb.js","index-D_h8rg_jAt9i.js","safe-redirect-Bhn9l7ucVG3P.js","helpers-DglgzNYa9U9c.js","middleware-BLC8cpoaMsq7.js","reducer-BEccgPtlXcuD.js","reducer-QJVnTpAIyjpq.js","reducer-C1pyuqJWc3MM.js","reducer-DM0Y2O77eBE9.js","reducer-DT4tKV1lUkLL.js","index-u-5O8GvUmFm4.js","reducer-Cl-3WBOdYwiJ.js","index-CiFQlM7N9OMd.js","reducer-5WVNvJFt6pK7.js","assets/EditorInternal-DNjHYRLwqXWd.css","FlowOutlet-IsIWWlxA5k_6.js","StaffMember-4CYKs-Hv_TU2.js","App-Chhd78M9L6xn.js","UIExtensionsFocus-KEBBdeQ-Niu6.js","assets/UIExtensionsFocus-BFRRE09ZxzwK.css","isAppPathname-Dp2WnCchsSpc.js","create-DR3oP-FV1N0j.js","assets/App-BTNsftbfGtSC.css","assets/FlowOutlet-HZEWe2VsBx0p.css","EmbeddedApp-DTvwcu6cvpfD.js","Client-H02_9z2H6wo4.js","withStatelessFeature-Kt3S-FTNhyQT.js","WebVitals-DgqUarxF69s5.js","useAppLoadSession-cH8dhnvLsVyb.js","hooks-Bx_D20Cg1Xrg.js","staffMemberDetails-VOIIQ-VuPlsy.js","getiFrameName-BriWt15kCGiJ.js","index-l3Wa4MIoYKkC.js","useMenuItems-Cdf9_mfOp_XX.js","index-C-dqDU4P4CJp.js","index-BEQ_iaUgMTyT.js","actionCreators-D57OMiZGHCM2.js","index-BBlfyXASxfDe.js","actionCreators-HPLvIAJQpguj.js","utilities-CsEc9BwRQjva.js","actionCreators-BzHsyQsdg_YF.js","chunk-BwJ7Pql9uPqR.js","index-Dqaam9tngkbV.js","useDebouncedCallback-wdgzsG70zZJb.js","index-BCh59AvXxIfb.js","index-FAYuIps2KBRO.js","actionCreators-CKA10_bpQf5z.js","actions-C-LD4U7IOLPm.js","getResourceUrl-C0YrBiy6qMOn.js","index-7G1xM406QgQk.js","actionCreators-ZIKiuQMu1WSo.js","domains-extensibility-app-home-EmbeddedApp-CDaTsVs24Dj7.js","useAppLoadTracking-DTKPAKwovF--.js","useAppAccessTimeUpdate-CZnP1iCe1XvK.js","SetupState-DX-bm5aAtnaj.js","assets/SetupState-Be_NDLeFkbZ_.css","decorator-Bv_zE55BWb6K.js","index-bWmNgXiHSL7n.js","LegacyContext-BuDms8_XTljy.js","AppActionContainer-B_yTmMD5fj0l.js","hook-CiqmoP0G34Ng.js","index-CvaPdrUcya6o.js","assets/AppActionContainer-BDlhXWRccQT5.css","index-C43D5u3Jml2m.js","debounceAsync-BjZLat9725WC.js","shared-BJgo6iyVgkKc.js","Modal-Cgbcq7if08oJ.js","promotableAppMetricLabels-m4hfvYH_uCNu.js","useAppCardAccessibilityLabel-T0B8Ot-NYm0p.js","useAppCardMonorail-Cgi5sF6ghX6X.js","usePerformAppAuthorization-D90AS40cuUAs.js","useAppInstallInitialLocation-CR3wfXhQdsSS.js","hooks-ie-4XdrEzjRa.js","assets/useAppCardAccessibilityLabel-BNdYAO9qV5FV.css","AppNotFound-Dg8Mth0sy0CO.js","empty-state-app-not-installed-P8zfLnkk8NaN.js","RestrictedPromotableAppsProvider-BAAZlrkhyBBb.js","AppCard-B6UT0ATXoJk9.js","assets/index-BzJ0boZjINXA.css","domains-extensibility-ui-extensions-UiExtensionAppRuntime-BIW6T8UTLu6Y.js","index-D1LeFxQaZDGI.js","map-responsive-platform-boolean-value-cX0MzOaYXTzW.js","assets/index-DGz5XuPcZ1V6.css","index-Czl1XLszWnqm.js","assets/index-Cc8LYEiIQ0CG.css","assets/index-Bt9QM2bQyl-D.css","EmbeddedApp-D8EXEZ2DG9N3.js","AppBridgeHostAuthCode-DEza3PpBQYTH.js","Toast-C5N70uX-uKhN.js","Loading-BbEHrnOQgzvk.js","AppBridgeHostContextualSaveBar-DLZnp8r8RUuN.js","DiscardConfirmationModal-BabLSPjo9C1D.js","AppBridgeHostSessionToken-BDUMU3kObD9j.js","jwtHelper-GCqiZMZTBcZa.js","hooks-CdbDRguO1i-f.js","SkeletonOnlineStoreEditor-0-V1Odr_eeD1.js","assets/SkeletonOnlineStoreEditor-HEjpgPKArYIf.css","SkeletonAnnotated-D6_zOrdGtGdv.js","LayoutAnnotatedSection-CGfSvQ_8vL9c.js","assets/LayoutAnnotatedSection-C1rLB5mGSPaB.css","SkeletonIndex-B5MvUSWNOaQ_.js","assets/SkeletonIndex-C_X3lKShAJh_.css","SkeletonTwoColumn-CHelLd_0LKAk.js","hooks-BLhEHI3U8FQc.js","FilePickerModal-05cUfM4irCGr.js","FilesManagerContextProvider-CXh7e3XzA3pk.js","FileCreateMutation-ByN7W4oHi4Ve.js","utilities-C2EuT5I00DDP.js","browser-9xrVj07-iYV6.js","Document-Pdf-BgrXrChma5Ke.js","types-C5xYqLngryhZ.js","get-extension-from-mime-type-BK5tFJIB1zvY.js","get-mime-type-from-filename-C-HnswxbALml.js","index.m-BkBQNCO6iAIf.js","index-CuRYkl5XU_QW.js","index-DU9Zp7Exc3Q6.js","index-i-0FUPw20vLm.js","assets/FilesManagerContextProvider-BwDnYQFbjQ_0.css","ErrorBoundary-CmdDNJOTa8-E.js","use-os-file-picker-Di-5kLmEPWoi.js","ExternalVideoPlayer-CYTinjFm6tCI.js","empty-state-missing-permissions-CAZqk_jFYN4_.js","assets/ExternalVideoPlayer-5neJIO3i7W4V.css","Video-D5-PPIT0_Qfr.js","ConditionalWrap-SpV3chpWXk-t.js","use-is-touch-device-C-1EYjIzhGJs.js","ChoiceListWithSearch-CQJ2OyAUaaWD.js","assets/ChoiceListWithSearch-BDkYRs_662mo.css","use-list-formatter-DEvIrmXCWLw6.js","assets/FilePickerModal-mvPEBPfRKFZd.css","FilePreviewModal-3EG5F4SEVmIh.js","use-resource-preview-CkDuZejc-hK6.js","context-BfxPk6sQKTsF.js","use-default-variant-CMRivnNeLGGl.js","hooks-BCYgmcDHNPTi.js","FileBatchStatus-DzT8x6tHCEuP.js","use-poller-DIaCUOn1e80x.js","clamp-DpsXwMULzJoR.js","InlineLoading-BIBl3V74VBhf.js","assets/InlineLoading-CeyTxfU33owP.css","FileDownloader-DfUp7XJDt_HZ.js","assets/FilePreviewModal-BXorg7S7wGo9.css","FileEditorModal-m268y0NpNPrk.js","useLazyLoading-mlSnEPBCIAhC.js","use-import-remote-oZsIxOQi8BHU.js","useFileSize-Dny5bIwXN8HC.js","linear-CXDBUpXMebsN.js","string-rljVTuBHpzxT.js","useMediaUploader-CNIAI4vyQDDX.js","assets/FileEditorModal-5Rviaz4C4Y1u.css","Navigation-B6aWA63KEOlS.js","AppTitleBar-C5vuyKVARRIm.js","AppTitleBarSkeleton-DaMXo4iaTEaF.js","assets/AppTitleBarSkeleton-OUTkMhMVh7Lj.css","assets/AppTitleBar-hSxpxs23R3nE.css","use-definition-type-BlTMkMginqGU.js","use-json-form-value-Cte-h_8kQvSO.js","is-different-json-Diz1299daXUS.js","InContextSaveBar-Bwm4c2SAU8ww.js","ContextualSaveBar-BtdBw04iApZM.js","assets/InContextSaveBar-B54XUbT04NpR.css","get-value-at-index-BDJe9xo4AXSy.js","isNil-D-qUOWPaYqT6.js","useMutationWithErrorHandling-CqJTakn0Vsw0.js","uniq-BXwf1gDOxAhb.js","AutoFocus-kMOJUyLnl8um.js","Preview-mI3zPzPVgQez.js","ViewOnlyField-CNh_v2irWcSl.js","isString-BvCY06VIQreP.js","assets/Preview-CQeS7acz7DVH.css","LearnMoreLink-3jIXnw98pP2U.js","MarketFlag-Dszy_PkvZIy1.js","SettingsFlag-o0I8YaR0zlU4.js","assets/SettingsFlag-D_G4uJ_D6GpI.css","assets/MarketFlag-DTrXDQbUmFIG.css","use-created-by-CdA4BYsA4d3w.js","useIsMobileApp-d611CCFMTXmI.js","ContextBar-BdyCIK8T10mG.js","xor-Cj42dk1WVGwJ.js","partition-Dh57BNTqVSnY.js","ThumbnailPreview-Cyb8MPyasg3q.js","assets/ThumbnailPreview-DJ5IblTnshmM.css","PopoverOptionList-B_Azryu057q-.js","assets/PopoverOptionList-Coe2pWGKLuDE.css","hook-DAyUac9nO93e.js","TextPicker-DmNnfA4cB_Qi.js","assets/TextPicker-CV7RcSSYF2ZO.css","DatePickerTextField-BEykcfUIRK5v.js","DatePicker-OnJ92-30wwOa.js","format-measurement-BaYacJIpNZuV.js","DateTimePicker-C7tm9fDDB3uC.js","TimePicker-BAvxpKOMMKHf.js","Autocomplete-Dh_I54GuahgH.js","index-BCLpFBiTPIuS.js","assets/Autocomplete-8H0vjZ6On7KZ.css","HelpDocLink-Dt_UCr-hNXd7.js","TagTextField-YHNVFcof5p6I.js","assets/TagTextField-C98MO5g-rVnm.css","SelectButton-DkNF7JdgDxMR.js","assets/SelectButton-uHzKxKEUlCqD.css","display-name-BT--JlldaeQf.js","CurrencyField-SxWi4EZbbEBG.js","FormattedNumberField-DUfRUiBMO1SI.js","ProductResourcePicker-_DOis80ZXk1Z.js","getIsAccessibleFont-CV4WHMWKKMLo.js","ResourcePicker-ayzcpTgPIcm-.js","search-Dv-fOnB7WZuH.js","useResponsiveExperience-CLR6E0NHX1EZ.js","LoadingState-CYBqYya_8vv4.js","assets/LoadingState-QRx6tpJBAEib.css","css-unit-conversion-Buwmgi9Z8Ao2.js","index-D9p3gnhX56lJ.js","assets/ResourcePicker-m5_pfdvNO9xt.css","ResourceThumbnail-68PFT5apz9Hb.js","assets/ResourceThumbnail-CCbxk5dB4dxw.css","ProductStatusBadge-CBwg2zvgkui1.js","utilities-DZfl89zW1EHr.js","helpers-BXiRWw7kgZaN.js","hook-C6jFCtpDmpWN.js","isEmpty-CdOZFnB4fmS1.js","CollectionsForFiltersQuery-DyuISCfYkpzj.js","assets/ProductResourcePicker-C_zMYmMCEX7i.css","configure-CpJr0euRRGki.js","dynamic-import-helper-1IudPZaJaEcK.js","useCommonAction-36PUQ4F89Vbw.js","css-D_U9alzE-dIr.js","FeaturesProvider-B8znbGAyvWRg.js","throttle-XyKqXhs5f6RT.js","ResizeObserver-D_CoWKkzIdYR.js","useDebouncedCallback-B4f5J7IC74ML.js","MediaQueryProvider-C0aJhQk_89jM.js","ScrollAnchor-CeGmFjKRMrAt.js","namespace-and-key-Bs-erkTNU5CS.js","normalize-validation-C0CMw6KXcOvY.js","list-DKghoZ-S-7pm.js","baselist-CTLvWJEkLaSv.js","ErrorBanner-DykEvyK54ToZ.js","assets/use-definition-type-Chm41z41iY_f.css","assets/EmbeddedApp-BSol8am68Eve.css","domains-extensibility-web-WebRuntimeProvider-BKnWkNvR_J1w.js","AppBridgeManager-pDgyOxpUwNNs.js","domains-extensibility-web-plugins-main-FramePluginMain-vjjYziv4xH1t.js","AppBridgeHostToast-DhM_JPHDIa5Y.js","domains-extensions-BO_1nMoeOHwg.js","domains-extensibility-order-routing-LocationList-FiwFRSK6apuA.js","uniqueId-CCVbRzRzP8__.js","assets/index-DxWJX-EsvZO3.css","domains-extensibility-order-routing-InlineResourcePicker-BzTRJazcV-UB.js","Address-B6el5kwOpwo6.js","PhoneNumberFormatter-BlGaNGfOG9Gm.js","ShopifyOffice-_GSNhKIwwVaZ.js","shopify-logo-jRVBu2nVJUni.js"])))=>i.map(i=>d[i]);
var Gi=Object.defineProperty;var vn=e=>{throw TypeError(e)};var Wi=(e,n,t)=>n in e?Gi(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var k=(e,n,t)=>Wi(e,typeof n!="symbol"?n+"":n,t),kt=(e,n,t)=>n.has(e)||vn("Cannot "+t);var N=(e,n,t)=>(kt(e,n,"read from private field"),t?t.call(e):n.get(e)),C=(e,n,t)=>n.has(e)?vn("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),V=(e,n,t,i)=>(kt(e,n,"write to private field"),i?i.call(e,t):n.set(e,t),t),xe=(e,n,t)=>(kt(e,n,"access private method"),t);import{b6 as E,eb as Xi,_ as T,ad as y,fH as ii,dA as pe,ci as P,dM as mt,dP as q,p as H,aP as ye,aX as Ot,O as Ee,jv as Qi,cj as Ne,rO as ai,rP as ft,dR as Yi,d7 as Ji,M as z,d_ as yn,b9 as bt,Y as ri,aR as Zi,aQ as ea,$ as ta,cm as na,rQ as ia,fO as aa,rR as ra,rS as sa,cS as oa,cU as la,cV as ca,cO as da,rT as ua,aW as pa,rU as kn,rV as ma}from"./common-BQgXWrz2O5Bt.js";import{aI as fa,v as ha,fz as si,cd as ga,bA as dn,bh as un,I as ht,jq as va,jr as ya,eB as Q,js as oi,b_ as ka,fm as ba,ac as li,jt as Aa,bP as wa,bv as Ea,ju as Na,Z as xa,au as Ia,jv as _a,h9 as Ut,jw as Sa,jx as Pa,fn as Ra,jy as Ta}from"./render-common-CBDTO_er9s96.js";import{ds as La,b as Fa,fi as Ca,md as Ma}from"./loaders-common-ci6pdX46YgGm.js";import{W as D,X as F,aq as W,cM as He,dU as Oa,cm as ci,cn as di,aL as pn,aM as R,dV as Ua,aK as Re,dW as Da,aN as Dt,aO as Bt,ao as me,dX as Ba,dY as $a,dt as Va,dZ as $t,d_ as J,an as bn,d7 as ui,b1 as pi,d$ as Ha,e0 as za,aQ as O,e1 as mi,e2 as gt,e3 as ja,e4 as Ka,aY as qa,e5 as Ga,e6 as Wa,e7 as An,B as Xa,e8 as Qa,e9 as Ya,bV as Ja,dA as Za,ea as er,br as tr,eb as nr,ec as ir,bt as ar}from"./router-D2A3v33YTGz9.js";import{a as ze,b as je,d as rr,R as fi,e as hi,f as sr}from"./useController-BAtIEeph53UE.js";import{a as or}from"./AppRevokeAccessScopesMutation-Dr_dPVAh3Zp7.js";import{g as lr}from"./get-legacy-store-handle-BXlB6R6Uehq2.js";import{g as cr}from"./GenerateSessionToken-DR-bIdJFNy_V.js";import{i as wn,j as dr,k as gi,f as ur,l as pr,m as mr,A as fr,o as En,p as Nn,e as hr,g as gr}from"./url-CHcIWjHiD9OW.js";import{A as vr,P as yr}from"./enums-ZAGdov3tNem4.js";import{d as kr,g as br,s as Ar}from"./index-CrKdLvTyLMrc.js";import{F as wr}from"./constants-FmOF2D2YeoVg.js";const vi=E.createContext(void 0);function Er(){return E.useContext(vi)}function yi({children:e,...n}){var t=D(1);try{var i=D(1);try{return F.jsx(vi.Provider,{value:n,children:e})}finally{i.f()}}finally{t.f()}}const Nr="Something went wrong displaying this app.",xr={errorMessage:Nr},Ir={[Symbol.for("i18n-id")]:"ui-extensions_iho67d",en:xr};class _r extends E.Component{constructor(){super(...arguments);k(this,"state",{hasError:!1})}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(){var t,i;(i=(t=this.props.instance)==null?void 0:t.pluginApi.loading)==null||i.setLoading(!1)}render(){const t=this.props.i18n.translate("errorMessage");return this.state.hasError?F.jsx(ha,{tone:"critical",children:F.jsx("p",{children:t})}):this.props.children}}const mn=fa(Xi(Ir))(_r);function Sr(e,n,t){const i=a=>{const r=Object.keys(a).sort().join(",");return E.useEffect(()=>{t.increment(`component.${e}`,{context:r})},[r]),E.createElement(n,a)};return i.displayName=`MonitoredComponent(${n.displayName||n.name||"Component"})`,i}async function ki({launchOptions:e,componentLoader:n,telemetry:t,legacy:i=!1}){const a=i?Rr:Pr;let r=n?await n(e,a,i):await a();xn(r)||(r=await a());const{context:s}=e;return xn(s==null?void 0:s.components)&&(r={...r,...(s==null?void 0:s.components)??{}}),r?Object.entries(r).reduce((o,[c,d])=>(o[c]=Sr(c,d,t),o),{}):{}}async function Pr(){return T(()=>import("./domains-extensibility-ui-extensions-CqV79cwYKYsd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))}async function Rr(){return T(()=>import("./domains-extensibility-ui-extensions-legacy-CD7uAwCfzHt1.js"),__vite__mapDeps([21,2,3,1,22,4,5,6,7,23,24,11,25,17,12,13,14,15,16,18,19,20,26]))}function xn(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&Object.keys(e).length>0}class bi extends W{constructor(){super(...arguments);k(this,"components");k(this,"componentLoader");k(this,"endpoint",ze("https://extensions.shopifycdn.com/shopifycloud/v2/admin-ui-extensions/index.js",{name:je(this)}));k(this,"sandbox",this.endpoint.call);k(this,"renderable",y(null));k(this,"partnerInitialized",!1);k(this,"partnerReadyToUse",!1)}get timerId(){var t;return(t=this.instance.launchOptions.context)==null?void 0:t.timerId}async create(){var i;const t=this.instance.launchOptions;if(this.instance.ready.then(()=>{this.instance.telemetry.increment("ready.count"),this.timerId&&this.instance.pluginApi.perceivedPerformance&&this.instance.pluginApi.perceivedPerformance.stopInstanceReady(this.timerId)}).catch(()=>{}),(i=t.context)!=null&&i.api){const{api:a}=this.instance;a.expose(t.context.api)}this.components=await ki({launchOptions:t,componentLoader:this.componentLoader,telemetry:this.instance.telemetry,legacy:!0}),await this.sandbox.sandbox(this.instance.api.getGlobal()),await this.start()}async reload(){await this.start()}async start(){let t=!1;const i=rr(this.components,{renderComponent:(d,{renderDefault:p})=>{var l;return t||(t=!0,(l=this.instance.telemetry)==null||l.increment("first-contentful-paint")),this.partnerReadyToUse||(this.partnerReadyToUse=!0,this.instance.telemetry.increment("partner.readyToUse.count"),this.instance.pluginApi.perceivedPerformance&&this.timerId&&this.instance.pluginApi.perceivedPerformance.stopReadyToUse(this.timerId)),p()}}),a=si(),r=async d=>{if(!URL.canParse(d))return console.error("Invalid URL:",d),!1;const p=this.instance.extensionPoint.host,l=await p.resolveUrl(d,{instance:this.instance});return l.length>0?(p.launch(l[0]),!0):!1};this.renderable.value=E.createElement(mn,{instance:this.instance},E.createElement(yi,{resolveUrl:r,instance:this.instance},E.createElement(fi,{controller:i,receiver:a})));const{api:s,extensionPoint:o}=this.instance,c=o.target;s.expose({extension:{target:c}}),this.instance.telemetry.increment("readyToLoad.count"),this.timerId&&this.instance.pluginApi.perceivedPerformance&&(this.instance.pluginApi.perceivedPerformance.stopReadyToLoad(this.timerId),this.instance.pluginApi.perceivedPerformance.startReadyToUse(this.timerId),this.instance.pluginApi.perceivedPerformance.startPartnerInitialized(this.timerId)),await this.sandbox.load(o.manifest.url),this.partnerInitialized||(this.partnerInitialized=!0,this.instance.telemetry.increment("partner.initialized.count"),this.timerId&&this.instance.pluginApi.perceivedPerformance&&this.instance.pluginApi.perceivedPerformance.stopPartnerInitialized(this.timerId)),await this.sandbox.render(c,{channel:a.receive,components:Object.keys(this.components)},s.get(),o.manifest.localization)}setComponentLoader(t){this.componentLoader=t}terminate(){this.endpoint.terminate()}get outlet(){return this.renderable}}k(bi,"type",He);function Tr(e){return e.setComponentLoader!==void 0}const At=Symbol("properties"),Lr={rule:"${number}",rulesRegex:/\${number}/,regex:/([0-9.]*)/},Fr={rule:"${string}",regex:/(\w*)\b/,rulesRegex:/\${string}/},Ai={rule:"${token[0-9]}",regex:/\${token[0-9]}/},Cr=[Lr,Fr,Ai],ge={string:{parse:e=>String(e),serialize:e=>String(e)},boolean:{parse:e=>e!=="false",serialize:e=>e?"":null},number:{parse:e=>Number.parseFloat(e),serialize:e=>String(e)},function:{parse:()=>{},serialize:()=>null},object:{parse:e=>{try{return JSON.parse(e)}catch{return}},serialize:e=>JSON.stringify(e)},array:{parse:e=>ge.object.parse(e),serialize:e=>ge.object.serialize(e)},union:{parse:()=>{},serialize:()=>null},stringEnum:{parse:e=>String(e),serialize:e=>String(e)}};function Mr(e){const{options:n,...t}=e;switch(e.type){case"boolean":return{...t,type:Boolean};case"object":return{...t,type:Object};case"array":return{...t,type:Array};case"string":return{...t,type:String};case"number":return{...t,type:Number};case"function":return{...t,type:Function};case"union":{const i=n.map(({type:a})=>a);return{...t,type:{parse(a){if(a==null)return;const r=typeof a;for(let s=i.length-1;s>0;s--)if(r===i[s]&&i.includes(i[s]))return ge[i[s]].parse(a);return ge[i[0]].parse(a)},serialize(a){if(a==null)return null;const r=typeof a;for(let s=i.length-1;s>0;s--)if(r===i[s]&&i.includes(i[s]))return ge[i[s]].serialize(a);return ge[i[0]].serialize(a)}}}}case"stringEnum":return{...t,type:String,setter:(i,a,r)=>{const s=t;let o=String(r);const c=s.values.find(p=>p===o),d=Ur(s,o);!c&&!d&&(o=s.default),i[At]||(i[At]={}),i[At][a]=o}};default:return e}}function Or(e){return{...e,properties:e.properties&&Object.entries(e.properties).reduce((n,[t,i])=>({...n,[t]:Mr(i)}),{})}}function Ur(e,n){var t;return(t=e==null?void 0:e.interpolationRules)==null?void 0:t.find(i=>{const a=Cr.filter(s=>(s.rulesRegex||s.regex).test(i));if(!a.length)return;let r=i;return a.forEach(s=>{r=Dr(s,r,e.tokens).source}),new RegExp(r).test(n)})}function Dr({rule:e,regex:n},t,i){if(e===Ai.rule&&i){let r=t;return Object.keys(i).forEach(s=>{const o=new RegExp(`(?:${i[s].map(c=>`(?:${c}\\b)`).join("|")})`);r=r.replace(new RegExp(`\\\${${s}}`,"g"),o.source)}),new RegExp(`^${r.replace("/","//")}$`)}const a=t.split(e);return new RegExp(`^${a.join(n.source.replace("/","//"))}$`)}function Br(e){return e.slice(2).toLowerCase()}function wi({data:e}){return String(e)}function Ei({children:e}){return e}class wt{constructor(n,t,i){var a;this.receiver=n,this.id=t,this.parent=null,this.isRoot=!1,this.props={},this.eventHandlers={},this.ref={current:void 0},this.currentProperties={},this.definition=i.definition,this.type=i.renderer;const r=this.dispatchEvent.bind(this);if(!(this.type===Ei||this.type===wi||!((a=this.definition)!=null&&a.events)))for(const s in this.definition.events)this.eventHandlers[s]=o=>r(Br(s),s,o)}get instance(){return this.ref.current}setProperty(n,t){const{props:i}=this;i[n]!==t&&(i[n]=t,this.invalidate())}insertBefore(n,t){n.parent=this;const i=this.children||[],a=t?i.indexOf(t):-1;a===-1?i.push(n):i.splice(a,0,n),this.children=i,this.invalidate()}removeChild(n){n.parent=null;const t=this.children||[],i=t.indexOf(n);if(i===-1)throw Error("Node is not a child of this parent");t.splice(i,1),this.children=t,this.invalidate()}resolved(){var n;if(this.cache!==void 0)return this.cache;const t={...this.props,...this.eventHandlers,key:this.id,ref:this.ref};if(this.children)for(const a of this.children){const r=a==null||typeof a!="object"?a:a.resolved(),s=(n=a==null?void 0:a.props)==null?void 0:n.slot;if(s){const o=t[s];o?Array.isArray(o)?o.push(r):t[s]=[o,r]:t[s]=r}else t.children?t.children.push(r):t.children=[r]}const i=this.receiver._createElement(this.type,t);return this.cache=i,i}clear(){this.props={},this.children=[],this.invalidate()}invalidate(){var n,t;if(!this.isRoot&&(!this.cache||!this.parent)){this.cache=void 0;return}if(((t=(n=this.receiver)._beforeTriggerRender)==null?void 0:t.call(n,this))===!1)return;let i=this,a=!1;for(;i;)i.isRoot&&(a=!0),i.cache=void 0,i=i.parent;a&&this.receiver._triggerRender(this)}dispatchEvent(n,t,i){var a;const r={detail:void 0,bubbles:!0,cancelable:!0};let s=[];if(i instanceof Event){if(i.eventPhase!==Event.AT_TARGET)return;"detail"in i&&(r.detail=i.detail),r.bubbles=i.bubbles,r.cancelable=i.cancelable;const c=(a=this.definition.events)==null?void 0:a[t];if(i.currentTarget&&c){const d=i.currentTarget;typeof c.updateProperties=="function"?s=c.updateProperties(i,this):c.updateProperties&&c.updateProperties.forEach(p=>{const l=d[p];(!(p in this.currentProperties)||l!==this.currentProperties[p])&&(this.currentProperties[p]=l,s.push({id:this.id,type:"setProperty",name:p,value:l}))})}}else i!=null&&(r.detail=i);const o=this.receiver.send([...s,{id:this.id,type:"dispatchEvent",event:n,properties:r}]);return o==null?void 0:o.then(c=>(c==null?void 0:c.response)??(c==null?void 0:c.returnValue))}}class $r{constructor({components:n,rerender:t,createElement:i}){this.components=new Map([["#fragment",{definition:{},renderer:Ei}],["#text",{definition:{},renderer:wi}]]),this.nodes=new Map,Object.entries(n||{}).forEach(([a,{renderer:r,definition:s}])=>{const o=Or(s);this.components.set(a,{renderer:r,definition:o})}),this.rerender=t,i&&(this._createElement=i),this.root=new wt(this,0,this.components.get("#fragment")),this.nodes.set(0,this.root),this.root.isRoot=!0}resolved(){return this.root.resolved()}connect(n){this.client=n}send(n){if(this.client)return this.client.send(n)}receive(n){var t;if(this.client)for(const i of n){const{type:a,id:r}=i;switch(a){case"createElement":if(r===0)return;if(this.nodes.has(r))throw Error(`Node#${r} already exists`);const s=this.components.get(i.tagName)||this.components.get("#fragment");this.nodes.set(r,new wt(this,r,s));break;case"createTextNode":if(this.nodes.has(r))throw Error(`Node#${r} already exists`);this.nodes.set(r,new wt(this,r,this.components.get("#text")));break;case"destroy":this.nodes.delete(r);break;case"insertBefore":const o=this.getNode(i.parentId),c=this.getNode(r),d=(t=o.children)==null?void 0:t[i.index];o.insertBefore(c,d);break;case"removeChild":this.getNode(i.parentId).removeChild(this.getNode(r));break;case"setProperty":this.getNode(r).setProperty(i.name,i.value);break}}}async reset(){var n;await((n=this.client)==null?void 0:n.disconnect()),this.client=void 0,this.root.clear(),this.nodes.clear(),this.nodes.set(0,this.root)}getNode(n){const t=this.nodes.get(n);if(!t)throw Error(`Node#${n} not found`);return t}_beforeTriggerRender(n){}_triggerRender(n){var t;(t=this.rerender)==null||t.call(this,this.root.resolved())}_createElement(n,t){return{type:n,props:t}}}class Vr extends $r{_createElement(n,t){return n.prototype&&n.prototype.render||"$$typeof"in n||(t.ref=void 0),E.createElement(n,t)}}const Hr="s",zr=["URL"],jr=new RegExp(`(${zr.join("|")})`,"g");async function Kr(e,n=!1){const t={},i=n?await T(()=>import("./definitions-CaMX74iZjO7I.js"),__vite__mapDeps([27,28])):await T(()=>import("./definitions-C0T7G5DChhRN.js"),__vite__mapDeps([29,28]));return Object.keys(e).forEach(a=>{const r=a.replace(jr,d=>`${d[0]}${d.slice(1).toLowerCase()}`),s=`${Hr}${n?"-legacy":""}${r.replace(/[A-Z](?=[a-z])/g,d=>`-${d.toLowerCase()}`)}`,o=e[a],c=i[a]||{};i[a]&&(c.name=a),t[s]={definition:c,renderer:o}}),t["remote-fragment"]={definition:{},renderer:a=>a.children},t}var re,se;class qr extends EventTarget{constructor(t,i){super();C(this,re);C(this,se,null);V(this,re,t);const a=globalThis.WeakRef?new WeakRef(this):this;i(r=>{const s=a instanceof globalThis.WeakRef?a.deref():a;if(!s){console.warn("EventTargetWithValue instance is out of reference");return}r!==N(s,re)&&(V(s,re,r),s.dispatchEvent(new Event("change")))})}get value(){return N(this,re)}get onchange(){return N(this,se)}set onchange(t){N(this,se)&&this.removeEventListener("change",N(this,se)),V(this,se,t),t&&this.addEventListener("change",t)}}re=new WeakMap,se=new WeakMap;const In=globalThis.FinalizationRegistry?new FinalizationRegistry(e=>e()):null;function Gr(e,n){let t;const i=new qr(e,r=>t=r),a=n(t);return a&&In&&In.register(i,a),i}const Wr="__remote-event-target__";function Xr(e){if(e==null||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);return n==null||n===Object.prototype}function Ni(e){return{[Wr]:!0,value:e.value,addEventListener:(n,t,i)=>{t&&(P(t),e.addEventListener(n,a=>{const r={...a,type:a.type,target:Ni(e)};typeof t=="function"?t(r):t.handleEvent(r)},i))},removeEventListener:(n,t,i)=>{pe(t),e.removeEventListener(n,t,i)}}}function Qr(e){const n=Gr(e.peek(),t=>{e.subscribe(i=>{t(i)})});return Ni(n)}function Vt(e){if(e==null)return e;if(e instanceof ii)return Qr(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(n=>Vt(n));if(Xr(e))return Object.keys(e).reduce((n,t)=>({...n,[t]:Vt(e[t])}),{})}return e}const Yr=/Cannot append a node that was not created by this remote root/;var Ce,oe,te,Me,be,le,ce,Oe,ne,Ue;class xi extends W{constructor(){super(...arguments);C(this,Ce,y(null));C(this,oe);C(this,te);C(this,Me,{});C(this,be);C(this,le);C(this,ce);C(this,Oe,y(null));C(this,ne);C(this,Ue);k(this,"partnerInitialized",!1);k(this,"partnerReadyToUse",!1)}get timerId(){var t;return(t=this.instance.launchOptions.context)==null?void 0:t.timerId}get outlet(){return N(this,Ce)}async create(){var d;const t=this.instance.launchOptions;this.instance.ready.then(()=>{this.instance.telemetry.increment("ready.count"),this.timerId&&this.instance.pluginApi.perceivedPerformance&&this.instance.pluginApi.perceivedPerformance.stopInstanceReady(this.timerId)}).catch(()=>{});const{extensionPoint:i}=this.instance,r=(await fetch(i.manifest.url).then(p=>p.text())).match(Yr),s=!!r;if(V(this,be,ze(r?"https://extensions.shopifycdn.com/shopifycloud/v2/admin-remote-dom-compat/index.js":"https://extensions.shopifycdn.com/shopifycloud/v2/admin-remote-dom/index.js",{name:je(this)})),V(this,le,N(this,be).call),(d=t.context)!=null&&d.api){const{api:p}=this.instance;p.expose(t.context.api)}const c=await ki({launchOptions:t,componentLoader:N(this,Ue),telemetry:this.instance.telemetry,legacy:s});V(this,te,await Kr(c,s)),Object.entries(N(this,te)).forEach(([p,{definition:l}])=>{N(this,Me)[p]=l}),V(this,ce,new Vr({rerender:p=>{N(this,Oe).value=p,this.partnerReadyToUse||(this.partnerReadyToUse=!0,this.instance.telemetry.increment("partner.readyToUse.count"),this.instance.pluginApi.perceivedPerformance&&this.timerId&&this.instance.pluginApi.perceivedPerformance.stopReadyToUse(this.timerId))},components:N(this,te)})),await this.connect(),await this.start()}setComponentLoader(t){V(this,Ue,t)}async connect(){const t=await N(this,le).setup({globalApi:this.instance.api.getGlobal(),componentsDefinitions:N(this,Me)});V(this,oe,await t.connect({send:async(...i)=>{N(this,ce).receive(...i)}})),P(N(this,oe)),N(this,ce).connect(N(this,oe))}async reload(){await this.cleanup(),await this.connect(),await this.start()}async start(){if(!N(this,te)||!Object.keys(N(this,te)).length)throw new Error("No components provided");const{api:t,extensionPoint:i}=this.instance,a=i.target;t.expose({extension:{target:a}});const r=async c=>{const d=i.host,p=await d.resolveUrl(c,{instance:this.instance});return p.length>0?(d.launch(p[0]),!0):!1};N(this,Ce).value=E.createElement(mn,{instance:this.instance},E.createElement(yi,{resolveUrl:r,instance:this.instance},N(this,Oe))),this.instance.telemetry.increment("readyToLoad.count"),this.timerId&&this.instance.pluginApi.perceivedPerformance&&(this.instance.pluginApi.perceivedPerformance.stopReadyToLoad(this.timerId),this.instance.pluginApi.perceivedPerformance.startReadyToUse(this.timerId),this.instance.pluginApi.perceivedPerformance.startPartnerInitialized(this.timerId)),await N(this,le).load(i.manifest.url),this.partnerInitialized||(this.partnerInitialized=!0,this.instance.telemetry.increment("partner.initialized.count"),this.timerId&&this.instance.pluginApi.perceivedPerformance&&this.instance.pluginApi.perceivedPerformance.stopPartnerInitialized(this.timerId));const s=Vt(t.get()),o=await N(this,le).render({api:s,target:a,localization:i.manifest.localization});P(o),V(this,ne,o)}async terminate(){await this.cleanup(),setTimeout(()=>N(this,be).terminate())}async cleanup(){N(this,ne)&&(await N(this,ne).call(this),pe(N(this,ne)),V(this,ne,void 0)),await N(this,ce).reset(),pe(N(this,oe))}}Ce=new WeakMap,oe=new WeakMap,te=new WeakMap,Me=new WeakMap,be=new WeakMap,le=new WeakMap,ce=new WeakMap,Oe=new WeakMap,ne=new WeakMap,Ue=new WeakMap,k(xi,"type",He);function Jr(e){return e.setComponentLoader!==void 0}const Zr="loadUiComponents";function Et({loader:e,exclude:n,include:t}){return{name:Zr,instanceCreated:async i=>{if(!(!Tr(i.runtime)&&!Jr(i.runtime))){if(e){i.runtime.setComponentLoader(e);return}if(n){i.runtime.setComponentLoader(async(a,r)=>{const s=await r();return ga(s,n)});return}t&&i.runtime.setComponentLoader(async(a,r)=>{const s=await r();return La(s,t)})}}}}const es={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AppNeedsAuth"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"appByHandleOrKey"},name:{kind:"Name",value:"appByHandleOrKey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"handleOrKey"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"apiKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"needsMerchantAuthorization"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:184,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"bb17126967f71eec7468a190393a63e90910de15ef0542bc72a77f6b9ca3bdff"},ts={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AppNeedsAuthLegacy"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"appByHandle"},name:{kind:"Name",value:"appByHandle"},arguments:[{kind:"Argument",name:{kind:"Name",value:"handle"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AppNeedsAuthDetails"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"appByKey"},name:{kind:"Name",value:"appByKey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"apiKey"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AppNeedsAuthDetails"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AppNeedsAuthDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"App"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"apiKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"needsMerchantAuthorization"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:318,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"d4828d8b71646917869222e42667a87bc610fad3ab2a2b673918a5996614a67d"};function ns(e){const{betaFlags:n}=e.value,t=n.get(mt),i=async a=>{var p,l,u,f;const{apolloClient:r}=e.value,s=a.extension.manifest.app.apiKey??a.extension.manifest.app.handle,o=await r.query({query:t?es:ts,errorPolicy:"all",fetchPolicy:"network-only",variables:{handleOrKey:s,projectZero:t??!1}});if(o.error!=null)throw o.error;const c=t?(p=o.data)==null?void 0:p.appByHandleOrKey:((l=o.data)==null?void 0:l.appByKey)??((u=o.data)==null?void 0:u.appByHandle);return!!(c&&((f=c.installation)!=null&&f.needsMerchantAuthorization))};return{name:"appAuth",expose(a,r){var u;if(!r)throw new Error("No instance found. This plugin should not be a global plugin.");const{url:s}=e.value,o=s?`https://${s.hostname}${s.install({client_id:(u=r.extension.app)==null?void 0:u.manifest.apiKey})}`:"",c=y(null),d=!0;let p;return{ready:new Promise(f=>{p=()=>f(!0)}),get needsGrant(){return c.value},setNeedsGrant(f){c.value=f,p(),f&&r.telemetry.increment("error",{ok:!1,context:"Failed to load due to scope changes"})},grantUrl:o,shouldFetch:d}},async instanceCreated(a){const r=a.pluginApi.appAuth,s=await i(a);r&&(r.setNeedsGrant(s),r.shouldFetch=!1)},async instanceActivated(a){const r=a.pluginApi.appAuth;if(r!=null&&r.shouldFetch){const s=await i(a);r.setNeedsGrant(s)}},instanceDeactivated(a){const r=a.pluginApi.appAuth;r&&(r.shouldFetch=!0)}}}const Ze=class Ze extends Error{constructor(...t){var i;super(...t);k(this,"name","ScopesApiError");(i=Error.captureStackTrace)==null||i.call(Error,this,Ze)}get isScopesApiError(){return!0}};k(Ze,"className","ScopesApiError");let B=Ze;const et=class et extends B{constructor(){super("No instance found. This plugin should not be registered as a global plugin."),this.name=et.className}};k(et,"className","PluginInvalidGlobalRegistrationError");let Ht=et;const tt=class tt extends B{constructor(n){super(`Error occurred when attempting to fetch scopes detail: ${n.name}: ${n.message}`),this.name=tt.className}};k(tt,"className","FetchScopesDetailQueryError");let zt=tt;const nt=class nt extends B{constructor(n){super(`No data returned for app with handle or key: ${n}`),this.name=nt.className}};k(nt,"className","FetchScopesDetailInvalidResponseError");let jt=nt;const it=class it extends B{constructor(n){super(`${n.name}: ${n.message}`),this.name=it.className}};k(it,"className","FetchScopesDetailReturnedApolloError");let Kt=it;const at=class at extends B{constructor(){super("Please provide an array of scopes to request."),this.name=at.className}};k(at,"className","RequestInvalidParamError");let qt=at;const rt=class rt extends B{constructor(n,t){super(`This set of scopes (${n.join(", ")}) is already being requested. (Request found asking for: ${t.join(", ")})`),this.name=rt.className}};k(rt,"className","RequestAlreadyInFlightError");let Gt=rt;const st=class st extends B{constructor(n){super(`Error occurred when attempting to request access scopes: ${n.name}: ${n.message}`),this.name=st.className}};k(st,"className","RequestError");let Wt=st;const ot=class ot extends B{constructor(n){const t=n.map(i=>`${i.name}: ${i.message}`).join(", ");super(`Multiple errors occurred when attempting to request access scopes: ${t}`),this.name=ot.className}};k(ot,"className","RequestMultipleErrors");let Xt=ot;const lt=class lt extends B{constructor(n){super(`Error occurred when attempting app revoke access scopes mutation: ${n.name}: ${n.message}`),this.name=lt.className}};k(lt,"className","RevokeFailedMutationError");let Qt=lt;const ct=class ct extends B{constructor(){super("Please provide an array of scopes to revoke."),this.name=ct.className}};k(ct,"className","RevokeInvalidParamError");let Yt=ct;const dt=class dt extends B{constructor(){super("No data received from appRevokeAccessScopes."),this.name=dt.className}};k(dt,"className","RevokeInvalidResponseError");let Jt=dt;const ut=class ut extends B{constructor(n){super(n),this.name=ut.className}};k(ut,"className","RevokeUserError");let Zt=ut;const pt=class pt extends B{constructor(n){super(n),this.name=pt.className}};k(pt,"className","RevokeReturnedError");let en=pt;const K={PluginInvalidGlobalRegistrationError:Ht,FetchScopesDetailQueryError:zt,FetchScopesDetailInvalidResponseError:jt,FetchScopesDetailReturnedApolloError:Kt,RequestInvalidParamError:qt,RequestAlreadyInFlightError:Gt,RequestError:Wt,RequestMultipleErrors:Xt,RevokeFailedMutationError:Qt,RevokeInvalidParamError:Yt,RevokeInvalidResponseError:Jt,RevokeUserError:Zt,RevokeReturnedError:en};function is(e,n){return Array.from(new Set(e.filter(t=>!n.includes(t))))}function as({queue:e,request:n}){e.value=e.peek().concat(n)}const rs={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FetchScopesDetail"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"appByHandleOrKey"},name:{kind:"Name",value:"appByHandleOrKey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"handleOrKey"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FetchAppScopesDetail"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FetchAppScopesDetail"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"App"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"apiKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessScopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"requestedAccessScopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"optionalAccessScopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:344,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"def97c3792d15e40b68fc62f4fe9f9531fe9c5f05496f9eb9dbe7aa6a93fd2f1"},ss={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FetchScopesDetailLegacy"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"appByHandle"},name:{kind:"Name",value:"appByHandle"},arguments:[{kind:"Argument",name:{kind:"Name",value:"handle"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FetchAppScopesDetailLegacy"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"appByKey"},name:{kind:"Name",value:"appByKey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"apiKey"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FetchAppScopesDetailLegacy"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FetchAppScopesDetailLegacy"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"App"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"apiKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessScopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"requestedAccessScopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"optionalAccessScopes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:427,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"d2ae8da35b57a5cc7d615e18ab6fca727ffe84c0b7157e981f35e390be104486"};function Nt(e){return e.map(n=>n.handle)}async function Ke(e,n){var m;const{apolloClient:t,betaFlags:i}=n.value,a=e.extension.manifest.app.apiKey&&e.extension.manifest.app.apiKey.trim()!==""?e.extension.manifest.app.apiKey:e.extension.manifest.app.handle,s=i.get(mt)?rs:ss,{data:o,error:c}=await t.query({query:s,errorPolicy:"all",fetchPolicy:"network-only",variables:{handleOrKey:a}}).catch(h=>{throw new K.FetchScopesDetailQueryError(h)}),d=o.appByHandleOrKey??o.appByKey??o.appByHandle;if(c)throw new K.FetchScopesDetailReturnedApolloError(c);if(!o||!d)throw new K.FetchScopesDetailInvalidResponseError(a);const p=((m=d.installation)==null?void 0:m.accessScopes)??[],l=d.requestedAccessScopes??[],u=d.optionalAccessScopes??[];return{granted:Nt(p),required:Nt(l),optional:Nt(u)}}function os(e,n,t){return e.filter(i=>i.appId===t).find(i=>n.every(a=>i.scopes.includes(a)))}const Y=y([]);function ls(e){return{name:"scopes",expose(n,t){if(!t)throw new K.PluginInvalidGlobalRegistrationError;const i=t.extension.manifest.app.id,a={async query(){return await Ke(t,e)},async request(r){var l;if(!r||!Array.isArray(r)||r.length===0)throw new K.RequestInvalidParamError;const s=await Ke(t,e);if(r.every(u=>s.granted.includes(u)))return{result:"granted-all",detail:s};const o=is(r,s.required),c=os(Y.value,o,i);if(c)throw new K.RequestAlreadyInFlightError(r,c.scopes);const d={scopesRequestId:q(),createdAt:Date.now(),appId:i,scopes:o,deferred:hi()};return(l=t.pluginApi.scopes)==null||l.addRequestToQueue({queue:Y,request:d}),await d.deferred.promise.then(async u=>({result:u,detail:await Ke(t,e)})).catch(u=>{throw u.length>1?new K.RequestMultipleErrors(u):new K.RequestError(u[0]??u)}).finally(()=>{Y.value=Y.peek().filter(u=>u!==d)})},async revoke(r){if(!r||!Array.isArray(r)||r.length===0)throw new K.RevokeInvalidParamError;const{apolloClient:s}=e.value,{data:o,errors:c}=await s.mutate({mutation:or,variables:{id:t.extension.manifest.app.id,scopes:r}}).catch(p=>{throw new K.RevokeFailedMutationError(p)});if(!o||!o.appRevokeAccessScopes)throw new K.RevokeInvalidResponseError;return o.appRevokeAccessScopes.userErrors.length>0&&o.appRevokeAccessScopes.userErrors.map(({message:p})=>{throw new K.RevokeUserError(p)}),c&&c.length>0&&c.map(({message:p})=>{throw new K.RevokeReturnedError(p)}),{detail:await Ke(t,e)}},canRequestNextScopes(r){const s=a.inFlightRequests[0],o=a.requestId;return!(!a.requestScopes||!s||o===r)},get requestId(){var r;return((r=Y.value[0])==null?void 0:r.scopesRequestId)??null},get requestScopes(){var r;return((r=Y.value[0])==null?void 0:r.scopes)??null},get requestPromise(){var r;return((r=Y.value[0])==null?void 0:r.deferred)??null},get inFlightRequests(){return Y.value},set inFlightRequests(r){Y.value=r},addRequestToQueue:as};return a},instanceCreated(n){if(!n.pluginApi.scopes)return;const t={query:n.pluginApi.scopes.query,request:n.pluginApi.scopes.request,revoke:n.pluginApi.scopes.revoke};n.api.exposeGlobal({scopes:t})}}}const cs="action-extension-launches",ds=new Set([...ci.map(({target:e})=>e),...di.map(({target:e})=>e)]);function us(){const e=typeof localStorage>"u"?y({}):Oa({},cs,localStorage);return{name:"actionExtensionLaunchTracking",expose(){return{getLaunchCount(n){return e.peek()[n.id]||0}}},instanceCreated(n){const{id:t,target:i}=n.extensionPoint;if(ds.has(i)){const a=e.value[t]||0;e.value={...e.value,[t]:a+1}}}}}const ps="/admin/internal/web/app-proxy/graphql",ms="/api/app_proxy",fs="x-shopify-app-id",Ii=/\/admin\/api(?:\/((?:[0-9]{4}-[0-9]{2})|unstable))?\/graphql\.json/;function hs(e){const n=H(()=>`https://${e.value.myshopifyDomain}`),t=(i,a)=>{const r=URL.parse(i);if(!r)throw new Error(`Invalid URL: "${i}"`);const s=new URL(r.href.replace(/^shopify:\/*/,"/"),a||n.value);return s.pathname=s.pathname.toLowerCase(),s};return{name:"adminApi",expose(i,a){var p,l,u,f,m;if(!a)return{};const r=h=>{var x;const g=Ot(),v=lr(n.value),b=t(h,g?window.location.origin:void 0),w=(x=Ii.exec(b.pathname))==null?void 0:x[1],A=a.extension.manifest.apiVersion;return b.pathname=g?`${ms}/${v}`:ps,b.searchParams.set("version",w||A||"latest"),b.toString()},s=(f=(u=(l=(p=a==null?void 0:a.extensionPoint)==null?void 0:p.extension)==null?void 0:l.app)==null?void 0:u.manifest)==null?void 0:f.embeddedAppDirectApiAccess,c=!(((m=a.extensionPoint)==null?void 0:m.type)===pn)||s,d=H(()=>({monorail:e.value.monorail,instance:a,event:"direct_api_success",shopId:e.value.shop.shopId,userId:e.value.staffMember.userId,sessionId:e.value.sessionId}));return{internalApi:{async shouldIntercept(h,g,v){if(!c)return{intercept:!1};const{myshopifyDomain:b}=e.value,w=new Headers(v),A=t(g);return gs(A,b)?w.has("x-shopify-access-token")?{intercept:!1}:{intercept:!0}:{intercept:!1}},async fetch(h){var L;const{csrfToken:g}=e.value,v=h.url;if(!c)return xt({...d.value,event:"direct_api_disabled"}),{url:v,body:'{"error": "Forbidden"}',headers:[],status:403};const{appAuth:b}=a.pluginApi;if(b){await b.ready;const{needsGrant:M,grantUrl:S}=b;M&&S&&await a.pluginApi.auth.internalApi.request({url:t(S).href})}const w=new Request(r(v),h);w.headers.set("accept","application/json"),w.headers.set("content-type","application/json"),w.headers.set("x-csrf-token",g),w.headers.set(fs,ye(a.extension.app.id)),w.headers.set("x-shopify-extension-id",a.extension.id),w.headers.set("x-shopify-instance-id",(L=a.id)==null?void 0:L.toString());const A=await fetch(w),x=await A.text(),_={url:v,body:x,headers:Array.from(A.headers.entries()).filter(M=>M[0].match(/^(content-|vary$|date$|x-shopid$|x-shopify-api-version$)/i)),status:A.status},I=A.headers.get("X-Request-ID")||void 0;return x.includes("errors")?xt({...d.value,context:`error: ${x}`,event:"direct_api_error",requestId:I}):xt({...d.value,requestId:I}),_}}}},instanceCreated(i){i.api.exposeGlobal({adminApi:i.pluginApi.adminApi.internalApi})}}}function gs(e,n){return e.host===n&&Ii.test(e.pathname)}function xt({monorail:e,instance:n,event:t,shopId:i,userId:a,sessionId:r,requestId:s,context:o}){var p,l,u,f,m,h,g,v,b,w,A,x;let c=`plugin: Admin API 
 feature: direct_api 
`;typeof o<"u"&&(c=c.concat(o));const d={eventName:t,context:c,instanceId:((p=n.id)==null?void 0:p.toString())??"unknown",requestId:s,extensionVersionId:((u=(l=n.extension)==null?void 0:l.manifest)==null?void 0:u.extensionVersionId)??"unversioned",extensionType:(f=n.extensionPoint)==null?void 0:f.type,extensionTarget:(m=n.extensionPoint)==null?void 0:m.target,extensionId:((g=(h=n.extension)==null?void 0:h.id)==null?void 0:g.toString())??"unknown",apiClientId:((w=(b=(v=n.extension)==null?void 0:v.app)==null?void 0:b.id)==null?void 0:w.toString())??"unknown",apiVersion:((x=(A=n.extension)==null?void 0:A.manifest)==null?void 0:x.apiVersion)??"unknown",sessionId:r??"unknown",shopId:parseInt(i||"0",10),userId:parseInt(a||"0",10)};e==null||e.produce({schemaId:"extension_plugin_usage/2.0",payload:d})}function qe(){return{name:"appChrome",expose(){const e=new Map([["primary",()=>{}],["secondary",()=>{}]]),n=y(void 0),t=y(""),i=y(""),a=y(""),r=y(!1),s=y(!1),o=y(!1),c=y(!1),d=y(""),p=y(""),l=y(""),u=y(""),f=y(!1),m=y(!1);return{handlePrimaryAction:async()=>{var h;o.value=!0;try{await((h=e.get("primary"))==null?void 0:h())}finally{o.value=!1}},handleSecondaryAction:async()=>{var h;c.value=!0;try{await((h=e.get("secondary"))==null?void 0:h())}finally{c.value=!1}},get primaryLoading(){return o.value},get secondaryLoading(){return c.value},get title(){return n.value},set title(h){n.value=h},get summary(){return t.value},set summary(h){t.value=h},get primaryText(){return i.value},set primaryText(h){i.value=h},get secondaryText(){return a.value},set secondaryText(h){a.value=h},get hasPrimaryButton(){return r.value},set hasPrimaryButton(h){r.value=h},get hasSecondaryButton(){return s.value},set hasSecondaryButton(h){s.value=h},get primaryDisabled(){return f.value},set primaryDisabled(h){f.value=h},get secondaryDisabled(){return m.value},set secondaryDisabled(h){m.value=h},onPrimaryAction(h){P(h),e.set("primary",h)},onSecondaryAction(h){P(h),e.set("secondary",h)},get primaryUrl(){return d.value},set primaryUrl(h){d.value=h},get secondaryUrl(){return p.value},set secondaryUrl(h){p.value=h},get primaryDownload(){return l.value},set primaryDownload(h){l.value=h},get secondaryDownload(){return u.value},set secondaryDownload(h){u.value=h}}}}}function vs(e){return{name:"auth",expose(n,t){if(!t)return{};const i=y(null);let a;const r=async()=>{var p;const{apolloClient:c}=e.value,{data:d}=await c.mutate({mutation:cr,variables:{appId:t.extension.app.id}});return(p=d==null?void 0:d.adminGenerateSession)==null?void 0:p.session},s=t.extension.app.manifest,o=s.applicationUrl??s.url;return{needsAuth:i,authComplete:()=>{i.value=null,a(void 0)},internalApi:{origin:o?new URL(o).origin:null,request:c=>new Promise(d=>{i.value=c,a=d}),getIdToken:r,getSessionToken:r},publicApi:{idToken:r,sessionToken:{get:r}}}},instanceCreated(n){n.api.exposeGlobal({auth:n.pluginApi.auth.internalApi}),n.api.expose({auth:n.pluginApi.auth.publicApi})}}}function It(){return{name:"close",expose(e,n){return{publicApi:{close(){var t;n==null||n.terminate(),(t=n==null?void 0:n.pluginApi.refetchKey)==null||t.triggerRefetch()}}}},instanceCreated(e){e.api.expose({close:e.pluginApi.close.publicApi.close})}}}function _n(e){ks(e,n=>{_i(n)&&!n.hasAttribute("defaultChecked")?n.defaultChecked=n.checked:n.hasAttribute("defaultValue")||(n.defaultValue=n.value)})}function ys(e,n){const t=e.querySelectorAll("*");for(const i of t)_i(i)&&n(i)}function ks(e,n){const t=e.querySelectorAll("*");for(const i of t)As(i)&&n(i)}function _i(e){return/s-checkbox/.test(e.localName)}const bs=/^(input|(s?-([a-z]+-field|select|checkbox|choice-list|text-area)))$/;function As(e){return bs.test(e.localName)}function ws({id:e,children:n,...t}){var i=D(1);try{var a=D(1);try{const r=E.useRef(t);r.current=t;const s=dn({fields:{dirty:un(!1)}}),o=E.useRef(s);o.current=s;const c=E.useRef(null);return E.useEffect(()=>{const d=r.current,p=c.current,l=new FormData(p);_n(p),d.setHandlers(e,{async submit(){await d.onSubmit(),p.reset(),m()},async reset(){await d.onReset(),p.reset(),m()}}),d.setDirty(e,!1);function u(){const h=new FormData(p);let g=!1;return h.forEach((v,b)=>{l.get(b)!==v&&(g=!0)}),ys(p,v=>{v.defaultChecked!==v.checked&&(g=!0)}),g}new MutationObserver(h=>{h.forEach(g=>{g.addedNodes.length>0&&_n(p),g.removedNodes.length>0&&m()})}).observe(p,{childList:!0,subtree:!0});const m=ht(()=>{const h=u();d.setDirty(e,h)},50);return p.addEventListener("valuemodified",m),p.addEventListener("change",m),p.addEventListener("input",m),()=>{p.removeEventListener("valuemodified",m),p.removeEventListener("change",m),p.removeEventListener("input",m),d.setHandlers(e,{}),d.setDirty(e,!1)}},[e]),F.jsx("form",{ref:c,className:"block-form",id:e,children:n})}finally{a.f()}}finally{i.f()}}const Es=/^(input|(ui(-lit)?-([a-z]+-field|select|checkbox|choice-list|text-area)))$/,Sn=Symbol.for("fieldId");let Ns=0;function X(e){let n=e[Sn];return n||(n=`ext_${++Ns}-${e.name}`,e[Sn]=n),n}function Ye(e,n=!1){const t={};return Le(e,(i,a)=>{t[a]=ke(i,n)}),t}function ke(e,n=!1){return e.type==="checkbox"?n&&e.hasAttribute("checked")?e.defaultChecked:e.checked:n&&e.hasAttribute("value")?e.defaultValue:e.value}function Si(e,n){if(e.type==="checkbox"){e.checked=n;return}e.value=n}function xs(e,n){Le(e,(t,i)=>{const a=n[i]??void 0,r=ke(t);Si(t,a),a!==r&&Is(t)})}function Le(e,n){const t=e.querySelectorAll("*");for(const i of t)Fe(i)&&n(i,X(i))}function Fe(e){return Es.test(e.localName)}function Is(e){e.dispatchEvent(new InputEvent("input",{bubbles:!0,inputType:"insertText",data:ke(e)})),e.dispatchEvent(new Event("change",{bubbles:!0}))}function _s({id:e,children:n,...t}){var i=D(1);try{var a=D(1);try{const r=E.useRef(t);r.current=t;const s=dn({fields:{dirty:un(!1)}}),o=E.useRef(s);o.current=s;const c=E.useRef(null);return E.useEffect(()=>{const d=r.current,p=o.current,l=c.current;let u=Ye(l,!0);const f=new Set;d.setHandlers(e,{async submit(){await d.onSubmit(),p.reset(),u=Ye(l,!0),f.clear(),h()},async reset(){await d.onReset(),p.reset(),Le(l,(b,w)=>{const A=u[w];Si(b,b.hasAttribute("value")?b.defaultValue:A)}),f.clear(),h()}}),d.setDirty(e,!1);function m(){let b=!1;return Le(l,(w,A)=>{const x=ke(w),_=w.hasAttribute("value")?w.defaultValue:u[A];f.has(A)?x!==_&&(b=!0):u[A]=ke(w,!0)}),b}const h=ht(()=>{const b=m();p.fields.dirty.onChange(b),d.setDirty(e,b)},50);function g(b){f.add(X(b.target)),h()}l.addEventListener("valuemodified",g),l.addEventListener("change",g),l.addEventListener("input",g);const v=new MutationObserver(b=>{for(const w of b){for(const A of w.addedNodes)Fe(A)&&(f.delete(X(A)),u[X(A)]=ke(A,!0));for(const A of w.removedNodes)Fe(A)&&(f.delete(X(A)),delete u[X(A)])}h()});return v.observe(l,{childList:!0,subtree:!0}),()=>{v.disconnect(),l.removeEventListener("valuemodified",g),l.removeEventListener("change",g),l.removeEventListener("input",g),d.setHandlers(e,{}),d.setDirty(e,!1)}},[e]),F.jsx("div",{ref:c,className:"block-form",id:e,children:n})}finally{a.f()}}finally{i.f()}}function Pi(e){var s,o;const t=((s=e.extensionPoint.host.pluginApi.internalExperiments)==null?void 0:s.isEnabled("remote-ui-shim"))??!1,i=(o=e==null?void 0:e.extension)==null?void 0:o.manifest.apiVersion,[a,r]=(i==null?void 0:i.split("-").map(c=>parseInt(c,10)))||[];return a>2025||a===2025&&r>=7||t}function Ss(){return{name:"formData",instanceCreated:(e,{context:n})=>{n.components||(n.components={}),n.components.Form=t=>{const{instance:i}=Er()??{};if(!i)throw new Error("instance is undefined");const{setHandlers:a,setDirty:r}=i.pluginApi.formData,s=Pi(i);return E.createElement(s?ws:_s,{...t,setHandlers:a,setDirty:r,id:`${i.extensionPoint.id}${t.id?`-${t.id}`:""}`})}},expose(e,n){if(n){const s=y(new Map),o=H(()=>Array.from(s.value.values()).some(l=>l.value)),c=y(!1),d=y({}),p=y("");return{isDirty:()=>o.value||!1,setDirty(l,u){const f=s.value.get(l);if(f)f.value=u;else{const m=new Map(s.value);m.set(l,y(u)),s.value=m}},setHandlers(l,{submit:u,reset:f}){d.value={...d.value,[l]:{submit:u,reset:f}}},reset:()=>(p.value="",Promise.all(Object.entries(d.value).map(async([l,{reset:u}])=>{try{await(u==null?void 0:u())}catch{p.value=l}}))),isSubmitting:()=>c.value||!1,get errorFormId(){return p.value},submit:async()=>{p.value="",c.value=!0,await Promise.all(Object.entries(d.value).map(async([l,{submit:u}])=>{try{await(u==null?void 0:u())}catch{p.value=l}})),p.value||await n.reload(),c.value=!1}}}if(e.pluginApi.formData)return e.pluginApi.formData;const t=s=>e.instances.map(o=>o.pluginApi.formData[s]()),i=H(()=>t("isDirty").some(Boolean)),a=H(()=>e.instances.map(s=>{var o,c,d,p,l;if(s.pluginApi.formData.errorFormId)return{errorFormId:s.pluginApi.formData.errorFormId,label:((c=(o=s.pluginApi)==null?void 0:o.appChrome)==null?void 0:c.title)||((p=(d=s.extensionPoint)==null?void 0:d.manifest)==null?void 0:p.label)||((l=s.extension)==null?void 0:l.name)}}).filter(s=>s)),r=H(()=>t("isSubmitting").some(Boolean));return{isDirty:()=>i.value,isSubmitting:()=>r.value,get errors(){return a.value},setDirty(){throw Error("This method is only available on instance.pluginApi")},setHandlers(){throw Error("This method is only available on instance.pluginApi")},submit:()=>Promise.all(t("submit")),reset:()=>Promise.all(t("reset"))}}}}function Ps(){return{name:"navigation",instanceCreated(e,{context:n}){e.api.expose({navigation:{navigate:t=>{const i=Rn.call(this,t,{instance:e});i&&i.launch({data:{...e.launchOptions.data},context:{launchUrl:t}})}},intents:{launchUrl:n.launchUrl}})},resolveUrl(e,{instance:n}){if(!n)return;const t=Rn.call(this,e,{instance:n});if(t)return[{extensionPoint:t,data:{...n.launchOptions.data},context:{launchUrl:e.href}}]}}}const Pn=e=>{try{return new URL(e)}catch{return null}},Rs=e=>{const n=e.toString();if(n.startsWith("extension:")){const t=n.replace(/^extension:(\/{0,2})/,"extension://");return Pn(t)}return Pn(e)};function Rn(e,{instance:n}){const t=Rs(e);if((t==null?void 0:t.protocol)!=="extension:")return;const i=(n.extensionPoint.target.match(/(.+)\.block\.render$/)||[])[1];if(!i)return;const a=n.extension.app.id,s=[`${i}.action.render`,`${i}.print-action.render`].map(p=>({appId:a,target:p})),o=this.findAll(s),c=t.host,d=o.find(p=>p.extension.manifest.handle===c);if(!d)throw new Error(`No extension found with the provided handle: ${c}`);return d}function Ts(){const e=y([]);return{name:"notification",expose(){return{globalApi:{show:n=>{const t=q(),i=()=>{e.value=e.value.filter(a=>a.id!==t)};e.value=[...e.value,{message:n,id:t,dismiss:i}]}},list:e}},instanceCreated(n){n.api.exposeGlobal({notification:n.pluginApi.notification.globalApi})}}}function Ls(){const e=y(1);return{name:"refetchKey",expose(n){return{triggerRefetch:()=>{e.value+=1},get key(){return e.value},resetRefetchKey:()=>{e.value=1}}}}}function Fs(){return{name:"loading",expose(e,n){if(n){const t=y(!0);return{setLoading:a=>{t.value=a},isLoading:()=>t.value||n.status==="loading"}}return{}}}}const Cs={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExtensibilityHostUIExtensions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"identifier"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"group"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extensionPoints"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extensions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"specificationIdentifier"},value:{kind:"Variable",name:{kind:"Name",value:"identifier"}}},{kind:"Argument",name:{kind:"Name",value:"group"},value:{kind:"Variable",name:{kind:"Name",value:"group"}}},{kind:"Argument",name:{kind:"Name",value:"extensionPoints"},value:{kind:"Variable",name:{kind:"Name",value:"extensionPoints"}}},{kind:"Argument",name:{kind:"Name",value:"userScoped"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uuid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"registrationUuid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"config"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"apiVersion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extensionPoints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shouldRender"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"scriptUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"scriptUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"translations"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extensionLocale"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"apiKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"applicationUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"developerName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"directApiMode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"embeddedAppDirectApiAccess"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"handle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"transformedSrc"},name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"transform"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"maxWidth"},value:{kind:"IntValue",value:"36"}}]}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"installation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"launchUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"supportEmail"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportLocales"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabledFlags"},arguments:[{kind:"Argument",name:{kind:"Name",value:"names"},value:{kind:"ListValue",values:[]}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:667,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"e513906ab5547253198c255aaa10754bfe627558a940b5605df243b4d469439a"};function Ms(e){var n;return((n=e.type)==null?void 0:n.startsWith(He))&&e.target!==void 0}function Os(e){return{name:"fetch-ui-extensions",async search(n){const t=Array.from(new Set(n.filter(Ms).map(s=>s.target)));if(!t.length)return[];const{apolloClient:i}=e.value,{data:a,error:r}=await Us(i,{identifier:"ui_extension",extensionPoints:t});return r?[]:a.map(s=>{const o=s.app;return{id:s.registrationUuid,name:s.name||s.registrationUuid,handle:s.handle||void 0,description:s.description,app:{...o,name:o.title,icon:o.icon.transformedSrc},extensionPoints:s.extensionPoints.map(({target:c,shouldRender:d})=>({id:`${c}-${s.registrationUuid}`,target:c,shouldRender:d,type:Ds(c,this.host.options),url:s.scriptUrl,name:s.name,handle:s.handle,description:s.description,localization:typeof s.translations=="string"&&typeof s.extensionLocale=="string"?{translations:s.translations,extensionLocale:s.extensionLocale}:void 0})),apiVersion:s.apiVersion,extensionVersionId:s.uuid}})}}}async function Us(e,n){try{const t=await e.query({query:Cs,variables:n,fetchPolicy:"network-only"}),{shop:{extensions:i}}=t.data||{shop:{extensions:[]}};return{data:i.map(({app:a,...r})=>({...r,app:{apiKey:a.apiKey,id:a.id,installation:a.installation||void 0,developerName:a.developerName||void 0,applicationUrl:a.applicationUrl||"",handle:a.handle||"",icon:a.icon||{transformedSrc:""},title:a.title||"",supportEmail:a.supportEmail||void 0,supportLocales:a.supportLocales||void 0,embeddedAppDirectApiAccess:a.embeddedAppDirectApiAccess||!1,directApiMode:(a==null?void 0:a.directApiMode)||"online",betas:{}}})),loading:t.loading,error:t.error}}catch(t){return{error:t,data:[],loading:!1}}}function Ds(e,{extensionPoints:n}){var t,i;return((i=(t=n.find(a=>{var r;return a.targets.includes(e)&&((r=a.runtimes)==null?void 0:r[0])!==void 0}))==null?void 0:t.runtimes)==null?void 0:i[0].type)||He}const Bs={maxInstances:1/0,inactivityTimeout:-1,experimentalKeepAlive:!1},$s=R((e={})=>{const n=new Set,t=new Map,{maxInstances:i,inactivityTimeout:a,experimentalKeepAlive:r}={...Bs,...e};function s(o){n.delete(o),t.set(o,o.terminate().finally(()=>t.delete(o)))}return{name:"instanceManager",expose(o,c){let d;return{get useExperimentalKeepAlive(){var p;return!c||((p=c.extension.app.manifest.betas)==null?void 0:p.appBackgroundingOptOut)!==!1?!1:r&&c.extension.app.manifest.shopifyDeveloped},startInactivityTimer(){a<0||!c||(d=setTimeout(()=>{c.terminate()},a))},stopInactivityTimer(){d&&(clearTimeout(d),d=void 0)}}},instanceCreated(o){var c;if(r&&((c=o.pluginApi.instanceManager)==null?void 0:c.useExperimentalKeepAlive)===!1&&n.forEach(d=>{var p;((p=d.pluginApi.instanceManager)==null?void 0:p.useExperimentalKeepAlive)===!1&&s(d)}),n.size>=i){const[d]=n;s(d)}n.add(o)},instanceActivated(o){var c;(c=o.pluginApi.instanceManager)==null||c.stopInactivityTimer(),t.has(o)?t.get(o).finally(()=>o.extensionPoint.launch()):(n.delete(o),n.add(o))},instanceDeactivated(o){var c;(c=o.pluginApi.instanceManager)==null||c.startInactivityTimer(),o.pluginApi.client&&!o.pluginApi.client.experimentalFeatures.includes(Ua.KEEP_ALIVE)&&o.terminate()},instanceTerminated(o){var c;(c=o.pluginApi.instanceManager)==null||c.stopInactivityTimer(),n.delete(o)}}}),Tn=R(()=>({name:"client",expose(e,n){if(!n)throw new Error("The client plugin should only be used as a target plugin.");const t=y([]),i=y([]),a=y({}),r=y([]),s=y([]);return{set(o){t.value=_t(t.peek(),o.appOrigins),i.value=_t(i.peek(),o.disabledFeatures),s.value=_t(s.peek(),o.experimentalFeatures),a.value=o.debug||a.peek();const{interface:c}=o;c!=null&&r.peek().some(p=>p.name===c.name&&p.version===c.version)===!1&&(r.value=r.peek().concat(c))},get appOrigins(){return t.value},get disabledFeatures(){return i.value},get experimentalFeatures(){return s.value},get versions(){return r.value},get usesLatestAppBridge(){return!!r.value.find(o=>o.name==="app-bridge-cdn")},get debug(){return a.value}}},instanceActivated(e){e.api.exposeGlobal({client:{set(n){var t;(t=e.pluginApi.client)==null||t.set(n)}}})}}));function _t(e,n){return n&&Array.isArray(n)?e.concat(n.filter(t=>typeof t=="string"&&!e.includes(t))):e}function fn(e){return"dispatchEvent"in e&&typeof e.dispatchEvent=="function"}class Vs extends W{constructor(t){super(t);k(this,"remoteClientApiResolver");k(this,"remoteClientApi");this.remoteClientApiResolver=hi()}async dispatchEvent(t,i){if(await this.remoteClientApiResolver.promise,!this.remoteClientApi)throw new Error("Remote client API not initialized");return this.remoteClientApi.call.dispatchEvent(t,i)}}class Hs extends E.Component{componentDidCatch(n){var i,a;const t=n instanceof Error?n:new Error(String(n));(a=(i=this.props.instance)==null?void 0:i.telemetry)==null||a.increment("error",{ok:!1,context:t.message})}render(){return this.props.children}}const zs="mobileBridge",js=R(e=>{let n;const t=H(()=>Ks(e.value.mobileBridge.api.value)?qs(e.value.mobileBridge.api.value):void 0);return Ee(()=>{const i=t.value;if(!i)return;const{extensibility:{initialize:a,navigation:r}}=i,s={get context(){return e.peek()},get host(){if(!n)throw new Error("Host is not available");return n},openWebBrowser(o){r.openWebBrowser(o)}};a({async search(o){if(!n)return[];const{queries:c,adminUrls:d,externalUrls:p}=Gs(o,s);return[...(await n.search(c)).map(u=>Ws(u,s)),...d.map(u=>Xs(u,s)),...p.map(u=>Qs(u,s))]},async getDefaultTitleBar(){var o;return(o=n==null?void 0:n.pluginApi.mobileBridge)==null?void 0:o.defaultTitleBar}})}),{name:zs,expose(i){return n=i,{get mobileBridge(){return t.value},defaultTitleBar:void 0,get isAndroid(){return Qi(e.value.browser)},get isAvailable(){return!!t.value}}}}});function Ks(e){return!!(e&&"extensibility"in e)}function Ri(e){return{...e,async showLoadingToast(n){const t=await e.showLoadingToast(n);return P(t),t}}}function qs(e){return e.extensibility.toast=Ri(e.extensibility.toast),e}function Gs(e,{context:n}){const t=[],i=[],a=[];return e.map(r=>{const s=r.url?new URL(r.url).toString():void 0;return s&&wn(s)?{...r,url:dr(s,n.url)}:r}).forEach(r=>{const s=r.url?new URL(r.url).toString():void 0;if(s){const o=gi(s);if(o){const{search:c}=ur(s)||{};t.push({type:"embedded-app",target:"admin.app.home.render",handleOrKey:o,search:c})}else pr(s)?a.push(s):wn(s)?i.push(s):a.push(s)}else t.push(r)}),{queries:t,adminUrls:i,externalUrls:a}}function Ws(e,n){return{id:e.id,type:e.type,url:e.url,target:e.target,manifest:e.manifest,app:{icon:e.extension.manifest.app.icon},async launch(t){return P(t),e.target===Re?Ti(e,t,n):/^admin\..+\.(action|selection-action)\.render$/.test(e.target)?Ys(e,t,n):()=>{}}}}function Xs(e,n){return{id:e,type:"admin",url:e,target:"admin",manifest:{id:e,type:"admin",target:"admin",url:e},async launch(t){var r;P(t);const i=(r=t.context)==null?void 0:r.mobile;if(!i)throw new Error("Missing mobile launch context");let a;return i.screen.update({onClose(){a==null||a.terminate()},onInit(s){P(s);const o=q();a=va(o,d=>{s.adminWebView.injectJavaScript(`(function() {
                window.postMessage(${JSON.stringify(d)}, location.origin);
              })()`)}),a.expose({subscribe:()=>{var p,l,u;const d=(l=(p=n.host.pluginApi.mobileBridge)==null?void 0:p.mobileBridge)==null?void 0:l.extensibility;P(s),P(d),(u=a==null?void 0:a.call)==null||u.register(Te(s),Te(d??null))}});async function c(d,p){const l=await Cn(d,n),u=p(l);!l||!u||(s.adminWebView.unload(),Ti(l,{context:{mobile:{...i,url:u}}},n))}i.screenOverridesLoading||s.loading.set(null),s.adminWebView.setOnLoadHandlers([{matcher:mr,async onMatch(d){if(i.openAppInNewScreen){const p=await Cn(Nn(e),n),{launchUrl:l}=(p==null?void 0:p.extension.manifest.app.installation)||{};await Fn(n,s,l)}else await c(Nn(e),p=>{var m;const{launchUrl:l}=(p==null?void 0:p.extension.manifest.app.installation)||{};if(!l)return;const u=new URL(d.url).origin;if((((m=p==null?void 0:p.extension.manifest.app.redirectUrls)==null?void 0:m.map(h=>new URL(h).origin))||[]).includes(u))return l})}},{matcher:fr,async onMatch(d){i.openAppInNewScreen?await Fn(n,s,d.url):await c(gi(e)||"",()=>e)}},{matcher:En,async onIntercept(d){await s.adminWebView.loadUrlWithoutHistory(Ln(d.url,o))}}]),s.adminWebView.load(e.match(new RegExp(En))?Ln(e,o):e)}}),()=>{}}}}function Ln(e,n){const t=new URL(e);return t.searchParams.set("screenChannelId",n),t.href}async function Fn(e,n,t){var a,r,s,o;P(n);const i=(a=e.host.pluginApi.mobileBridge)==null?void 0:a.mobileBridge;n.adminWebView.unload(),await((r=i==null?void 0:i.extensibility.navigation)==null?void 0:r.goBack()),t&&((o=(s=i==null?void 0:i.extensibility.navigation)==null?void 0:s.navigate)==null||o.call(s,"FullscreenModal",{screen:"ExtensibilityEmbeddedApp",params:{url:t}}))}function Qs(e,{openWebBrowser:n}){return{id:e,type:"external",url:e,target:"external",manifest:{id:e,type:"external",target:"external",url:e},async launch(t){var i,a,r;return P(t),(r=(a=(i=t.context)==null?void 0:i.mobile)==null?void 0:a.screen)==null||r.update({onInit(s){P(s),s.close(),n(e)}}),()=>{}}}}async function Cn(e,n){if(!e)return;const[t]=await n.host.search({type:"embedded-app",target:"admin.app.home.render",handleOrKey:e});return t}async function Ti(e,n,t){var a,r,s,o,c;try{n.timerId=(r=(a=e==null?void 0:e.activeInstance)==null?void 0:a.launchOptions.context)==null?void 0:r.timerId,(s=t.host)!=null&&s.pluginApi.perceivedPerformance&&!e.activeInstance&&(n.timerId=t.host.pluginApi.perceivedPerformance.createTimerNamespace())}catch{(o=t.host)==null||o.telemetry.increment("error",{ok:!1,context:"Failed to start performance tracking on mobile bridge"})}const i=(c=n.context)==null?void 0:c.mobile;if(!i)throw new Error("Missing mobile launch context");return e.activeInstance||(e.extension.manifest.app.embedded?await e.launch(n):await i.screen.update({onInit(d){P(d),d.close(),t.openWebBrowser(i.url)}})),async()=>{var d;await((d=e.activeInstance)==null?void 0:d.terminate())}}function Ys(e,n,t){var o;const{extensibility:i}=((o=t.host.pluginApi.mobileBridge)==null?void 0:o.mobileBridge)||{};if(!i)throw new Error("Missing mobile bridge plugin");const{navigation:a}=i,r=new URL(t.context.url.extensibilityExtension(),location.origin).toString(),s=ya();return a.navigate("Modal",{screen:"ExtensibilityWebView",params:{titleBar:{title:e.manifest.name,iconUrl:e.extension.manifest.app.icon,backAction:{icon:"XIcon",iosPrefersText:!1}},onInit(c){P(c),c.loading.set(null),s.expose({extensibilityApi:i,screenApi:c,extensionPointId:e.id,extensionManifest:JSON.parse(JSON.stringify(e.extension.manifest)),launchOptions:n}),c.adminWebView.load(r)},onClose(){var c,d;(d=(c=n.context)==null?void 0:c.refetch)==null||d.call(c)}}}),()=>{}}function Te(e){return e!==null&&typeof e=="object"?Array.isArray(e)?e.map(Te):Object.keys(e).reduce((n,t)=>({...n,[t]:Te(e[t])}),{}):typeof e=="function"?(...t)=>(P(t),e(...Te(t))):e}function Js(e){const n=y(void 0),t=y([]);function i(l){const u=hr(l);if(!(e!=null&&e.appHomeUrl)||!u)return u;const f=new URL(e.appHomeUrl,location.href).toString();return gr(u)==="/"?f:u}function a(l=!1){const u=[],f=[...l?t.value:t.peek()];for(const m of f.reverse()){const h=i(m),g=i(u[u.length-1]);!h||h===g||u.push(h)}return u.reverse()}function r(){n.value=void 0,t.value=[]}function s(){return!1}function o(l){const u=a(),f=u[u.length-1]||void 0,m=i(l);if(!m)throw new Error("Invalid url for navigate");m!==f&&(n.value=m)}function c(){}function d(l){const u=i(new URL(l,location.href).toString());if(!u)throw new Error("Invalid url for pushState");n.value=void 0;const f=a(),m=f[f.length-1]||void 0;u!==m&&(t.value=[...f,u])}function p(l){const u=i(new URL(l,location.href).toString());if(!u)throw new Error("Invalid url for replaceState");n.value=void 0;const f=a();f.pop(),t.value=[...f,u]}return{get url(){const l=a(!0);return l[l.length-1]||""},get pendingUrl(){return n.value},reset:r,canGoBack:s,history:{get length(){return a().length},back:c,pushState:d,replaceState:p,get backstack(){return a()}},navigation:{navigate:o}}}const Zs=500;function eo(e,n){const{back:t}=e.history;let i;return e.history.back=function(){if(i){const r=Date.now()-i<Zs;if(i=void 0,r){n();return}}else i=Date.now();return t()},e}const to="webView",vt="remote-iframe",Mn=R(e=>({name:to,expose(n,t){if(!t)throw new Error("WebViewPlugin must be used in an instance context");const i=q(),a=Q(),r=y(void 0),s=y(void 0),o=y(void 0),c=oi(i,l=>{var u;(u=s.value)==null||u.injectJavaScript(`(function() {
            window.postMessage(${JSON.stringify(l)}, location.origin);
          })()`)});c.addEventListener("message",({data:l})=>{if(typeof l!="string"||!l.startsWith("ping:"))return;Ne(c.copy(l)).expose({onLoad(f){P(f),r.value=f,f&&a.resolve()}}),c.postMessage(l.replace("ping","pong"))});const d=Js({get appHomeUrl(){var l;return(l=t.pluginApi.navMenuApi)==null?void 0:l.appHomeUrl}}),p=eo(d,()=>{var l;(l=s.value)==null||l.close()});return{uuid:i,reset(){a.reset(),r.value=void 0},get staffMember(){return e.value.staffMember},remoteApi:{async createIframe(l,u){await a.promise;const f=r.peek();if(!f)throw new Error("Remote Api is not available");const m=await f.createIframe(l,u);return P(m),m},async print(l){await a.promise;const u=r.peek();if(!u)throw new Error("Remote Api is not available");return u.print(l)},channel:c},get mainFrameApi(){return s.value},set mainFrameApi(l){s.value=Un(l)},get modalFrameApi(){return o.value},set modalFrameApi(l){o.value=Un(l)},routerApi:p}}})),ve=class ve extends HTMLElement{constructor(){super(...arguments);k(this,"_styleObserver");k(this,"_readyResolver",Q());k(this,"_instance");k(this,"_pendingMessages",[]);k(this,"_contentWindow",{postMessage:(t,i)=>{if(i===this._origin)if(this._iframe)if(no(t)){const{port:a}=t.payload.payload;a.start(),this._iframe.setupAppBridgeClientRpc(On(a))}else if(io(t)){const{port:a}=t;a.start(),this._iframe.setupGuidesInit(On(a))}else this._iframe.postMessage(t);else this._pendingMessages.push(t)},location:{replace:t=>{var i;(i=this._iframe)==null||i.setAttribute("src",t)}}});k(this,"_localIframe")}get _iframeName(){return this.getAttribute("name")||void 0}get _iframe(){const t=this.getAttribute("name");if(!t)return;const i=ve._iframes.get(t);if(i===this._localIframe)return i}get contentWindow(){return this._contentWindow}get ready(){return this._readyResolver.promise}get _origin(){try{return new URL(this.getAttribute("src")||"").origin||""}catch{}return""}async setInstance(t){t!==this._instance&&(this._instance=t,await this._uninitialize(),await this._initialize())}connectedCallback(){this._styleObserver=new MutationObserver(async()=>{var t;(t=this._iframe)==null||t.setAttribute("style",this.style.cssText)}),this._styleObserver.observe(this,{attributes:!0,attributeFilter:["style"]}),this._initialize()}disconnectedCallback(){var t;(t=this._styleObserver)==null||t.disconnect(),this._uninitialize()}async setAttribute(t,i){var a;super.setAttribute(t,i),await((a=this._iframe)==null?void 0:a.setAttribute(t,i))}async _initialize(){var r;if(!this._instance||!this.isConnected)return;const{createIframe:t}=((r=this._instance.pluginApi.webView)==null?void 0:r.remoteApi)||{};if(!t)return;const i=this._iframeName;if(!i)throw new Error("Missing iframe name attribute");const a=await t(i,this._getAttributes());ve._iframes.set(i,a),this._localIframe=a,this._pendingMessages.forEach(s=>a.postMessage(s)),a.onMessage(async({data:s})=>{if(!this._iframe)return;const o={data:s,origin:this._origin,source:this.contentWindow};window.dispatchEvent(new CustomEvent(vt,{detail:o}))}),this._readyResolver.resolve()}async _uninitialize(){const t=this._iframeName;if(!t)return;const i=this._iframe;ve._iframes.delete(t),i&&(await(i==null?void 0:i.remove()),this._readyResolver.reset())}_getAttributes(){const t={};for(const i of this.attributes){const a=i.name,r=i.value;t[a]=r}return t}};k(ve,"_iframes",new Map);let tn=ve;Da(vt,tn);function On(e){return{addEventListener:(n,t)=>{P(t),e.addEventListener(n,i=>{t({data:JSON.stringify(i.data)})})},postMessage:n=>{e.postMessage(JSON.parse(n))}}}function no(e){var n;return e&&typeof e=="object"&&(e==null?void 0:e.type)==="dispatch"&&((n=e.payload)==null?void 0:n.type)==="APP::CLIENT::RPC"}function io(e){return e&&typeof e=="object"&&(e==null?void 0:e.type)==="internal::guides::init"}function Je(e){return e&&typeof e=="object"&&e instanceof CustomEvent&&e.type===vt}function Un(e){if(e)return e.toast=Ri(e.toast),e}async function Li(){const{AppHomeProvider:e}=await T(async()=>{const{AppHomeProvider:n}=await import("./domains-extensibility-app-home-AppHomeProvider-Bud49gQsubFd.js");return{AppHomeProvider:n}},__vite__mapDeps([30,2,3,31,32,33,34,35,36,37,38,39,4,5,6,7,40,41,42,43,44,45]));return{default:e}}const ao=me({load:Li});let St=null;class ue extends Vs{constructor(t){super(t);k(this,"iframeUrl");k(this,"preloadFrame");k(this,"renderable",y(null));k(this,"root",E.createRef());k(this,"embeddedAppModule");k(this,"EmbeddedApp");k(this,"_partnerInitialized",!1);k(this,"iframeInitialized",!1);this.iframeUrl=t.extensionPoint.url;const i=t.host.context.flags.get(ai);this.hasMobileBridge||(t.telemetry.set("experiment.preload",i?"sandbox":"none"),i&&this.preloadIframe(this.iframeUrl));const a=this.handleMessage.bind(this);this.handleMessage=r=>{try{a(r)}catch{}},addEventListener("message",this.handleMessage,!0),addEventListener("remote-iframe",this.handleMessage)}static async preload(t,{target:i}){var a;i===Dt?await T(()=>import("./EditorInternal-Bsy--9Wo6WAT.js"),__vite__mapDeps([46,2,3,47,48,49,50,4,5,6,7,51,52,53,54,31,55,56,57,58,59,60,61,37,36,34,35,38,39,62,63,64,40,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,41,86,87,88])):i===Bt?await T(()=>import("./FlowOutlet-IsIWWlxA5k_6.js"),__vite__mapDeps([89,2,3,47,48,49,50,4,5,6,7,52,53,54,31,51,90,85,40,34,35,36,37,38,39,91,92,93,45,94,95,70,96,75,60,61,97])):(a=t.pluginApi.mobileBridge)!=null&&a.isAvailable?await T(()=>import("./EmbeddedApp-DTvwcu6cvpfD.js"),__vite__mapDeps([98,2,3,47,48,49,56,36,34,35,50,99,4,5,6,7,100,40,37,38,39,90,85,51,101,102,103,54,31,53,104,65,66,67,33,17,105,70,68,69,86,106,82,81,107,108,84,109,110,80,111,112,79,113,114,83,115,12,116,117,118,119,120,121,72,122,123,124,87,13,14,15,16,18,19,20])):await T(()=>import("./domains-extensibility-app-home-EmbeddedApp-CDaTsVs24Dj7.js"),__vite__mapDeps([125,2,3,4,5,6,7,126,102,103,127,128,129,53,54,31,56,47,48,49,36,34,35,50,130,131,51,52,104,45,94,91,92,93,95,70,38,39,37,96,132,90,85,40,78,79,67,80,81,82,83,66,84,69,41,86,87,77,100,32,33,42,43,44,106,133,134,135,136,137,12,138,139,68,120,121,110,118,114,112,124,140,64,71,72,105,58,59,141,142,143,144,145,146,147,101,148,57,149,150,151,152]))}get timerId(){var t;return(t=this.instance.launchOptions.context)==null?void 0:t.timerId}get hasMobileBridge(){var i;const{host:t}=this.instance.extensionPoint;return(i=t.pluginApi.mobileBridge)==null?void 0:i.isAvailable}get outlet(){return this.renderable}get frame(){var a;const t=this.hasMobileBridge?"remote-iframe":"iframe",i=(a=this.root.current)==null?void 0:a.querySelector(t);return i&&!this.iframeInitialized&&(this.iframeInitialized=!0,this.instance.telemetry.increment("readyToLoad.count"),this.timerId&&this.instance.pluginApi.perceivedPerformance&&(this.instance.pluginApi.perceivedPerformance.stopReadyToLoad(this.timerId),this.instance.pluginApi.perceivedPerformance.startReadyToUse(this.timerId),this.instance.pluginApi.perceivedPerformance.startPartnerInitialized(this.timerId))),i}initialize(){this.instance.ready.then(()=>{this.instance.telemetry.increment("ready.count"),this.timerId&&this.instance.pluginApi.perceivedPerformance&&this.instance.pluginApi.perceivedPerformance.stopInstanceReady(this.timerId)}).catch(()=>{}),this.hasMobileBridge?this.initializeEmbeddedApp({embeddedAppModule:T(()=>import("./EmbeddedApp-DTvwcu6cvpfD.js"),__vite__mapDeps([98,2,3,47,48,49,56,36,34,35,50,99,4,5,6,7,100,40,37,38,39,90,85,51,101,102,103,54,31,53,104,65,66,67,33,17,105,70,68,69,86,106,82,81,107,108,84,109,110,80,111,112,79,113,114,83,115,12,116,117,118,119,120,121,72,122,123,124,87,13,14,15,16,18,19,20])),isMobile:!0}):this.instance.extensionPoint.target===Dt?this.initializeEmbeddedApp({embeddedAppModule:T(()=>import("./EditorInternal-Bsy--9Wo6WAT.js"),__vite__mapDeps([46,2,3,47,48,49,50,4,5,6,7,51,52,53,54,31,55,56,57,58,59,60,61,37,36,34,35,38,39,62,63,64,40,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,41,86,87,88]))}):this.instance.extensionPoint.target===Bt?this.initializeEmbeddedApp({embeddedAppModule:T(()=>import("./FlowOutlet-IsIWWlxA5k_6.js"),__vite__mapDeps([89,2,3,47,48,49,50,4,5,6,7,52,53,54,31,51,90,85,40,34,35,36,37,38,39,91,92,93,45,94,95,70,96,75,60,61,97]))}):this.initializeEmbeddedApp({embeddedAppModule:T(()=>import("./domains-extensibility-app-home-EmbeddedApp-CDaTsVs24Dj7.js"),__vite__mapDeps([125,2,3,4,5,6,7,126,102,103,127,128,129,53,54,31,56,47,48,49,36,34,35,50,130,131,51,52,104,45,94,91,92,93,95,70,38,39,37,96,132,90,85,40,78,79,67,80,81,82,83,66,84,69,41,86,87,77,100,32,33,42,43,44,106,133,134,135,136,137,12,138,139,68,120,121,110,118,114,112,124,140,64,71,72,105,58,59,141,142,143,144,145,146,147,101,148,57,149,150,151,152]))})}async create(){await this.embeddedAppModule}terminate(){var t;removeEventListener("message",this.handleMessage,!0),removeEventListener("remote-iframe",this.handleMessage),(t=this.preloadFrame)==null||t.remove(),this.preloadFrame=void 0}setOnInitializeListener(t){const i=a=>{const r=Je(a)?a.detail:a,s=this.frame;if(!s||r.source!==(s==null?void 0:s.contentWindow)||!this._getAbnVersion(r.data))return;const o=this.iframeUrl||this.instance.extensionPoint.url;t(o)};return window.addEventListener("message",i),window.addEventListener("remote-iframe",i),()=>{window.removeEventListener("message",i),window.removeEventListener("remote-iframe",i)}}preloadIframe(t){var a;if(!St){const r=document.createElement("div");r.style.cssText="position:absolute; left:0; top:-9999px; width:1px; height:1px;",document.documentElement.appendChild(r),St=((a=r.attachShadow)==null?void 0:a.call(r,{mode:"closed"}))||r}const i=document.createElement("iframe");i.setAttribute("sandbox","allow-same-origin"),i.name=`preload:${this.instance.loadId}`,i.src=t,i.onload=i.remove,St.appendChild(i),this.preloadFrame=i}initializeEmbeddedApp({embeddedAppModule:t,isMobile:i=!1}){this.embeddedAppModule=t,this.EmbeddedApp=E.createElement(me({load:()=>this.embeddedAppModule,displayName:i?"MobileEmbeddedApp":"EmbeddedApp",renderLoading:i?void 0:()=>E.createElement(ka,{key:"embedded-app-loading",handleOrKey:this.instance.extension.app.handle})}),{key:this.instance.id}),this.renderable.value=E.createElement(Hs,{instance:this.instance,key:this.instance.extensionPoint.target+this.instance.id},E.createElement(ao,{instance:this.instance},E.createElement("embedded-app",{ref:this.root},this.EmbeddedApp))),Li()}handleMessage(t){var u,f,m,h,g,v,b,w,A,x,_;const i=Je(t)?t.detail:t,a=new URL(this.instance.extensionPoint.url);if(i.origin!==a.origin&&!new URL(i.origin).host.endsWith(`.${a.host}`)||(this._partnerInitialized===!1&&(this._partnerInitialized=!0,this.instance.telemetry.increment("partner.initialized.count"),this.timerId&&this.instance.pluginApi.perceivedPerformance&&this.instance.pluginApi.perceivedPerformance.stopPartnerInitialized(this.timerId),(u=this.preloadFrame)==null||u.remove(),this.preloadFrame=void 0),i.data.type==="dispatch"&&i.data.payload.type==="APP::CLIENT::INITIALIZE"&&((w=this.instance.pluginApi.client)==null||w.set({interface:{name:((m=(f=i.data.payload)==null?void 0:f.clientInterface)==null?void 0:m.name)??((h=i.data.payload)==null?void 0:h.interfaceName)??$a,version:((v=(g=i.data.payload)==null?void 0:g.clientInterface)==null?void 0:v.version)??((b=i.data.payload)==null?void 0:b.version)??Ba}})),!this._getAbnVersion(i.data)))return;const s=i.source&&i.source===((A=this.frame)==null?void 0:A.contentWindow),o=new MessageChannel,c=Ne(ft(o.port1));o.port1.start();let d;const p=this.instance.ready.then(I=>{const L={api:s?I.api.get():{},internal:s?I.api.getGlobal():{}};return d=L,L});c.expose({getApi:()=>d??p,onClientReady:()=>{this.remoteClientApi=c,this.remoteClientApiResolver.resolve()}});const l={type:"dispatch",payload:{version:"1",type:"APP::CLIENT::RPC",payload:{port:o.port2}}};(_=(x=i.source)==null?void 0:x.postMessage)==null||_.call(x,l,i.origin,[o.port2])}_getAbnVersion(t){try{if(t.type==="dispatch"&&t.payload.type==="APP::CLIENT::INITIALIZE"&&t.payload.clientInterface.name==="app-bridge-cdn")return t.payload.clientInterface.version.toString()}catch{}return!1}}k(ue,"type",pn);function nn(e,n){try{return new URL(e,n)}catch{}}function ro(e){return so(e)?Ot()?new URL(e).pathname:Yi(new URL(e).pathname):oo(e)?Ot()?Ji(e):new URL(e).pathname:e}function so(e){try{const n=new URL(e);return/^admin\.(shopify|myshopify|shopifyinternal)\.(com|io)$/.test(n.host)&&n.pathname.startsWith("/store/")}catch{return!1}}function oo(e){try{const n=new URL(e);return/^(?!admin\.)[\w-]+\.(myshopify|shopify|shopifyinternal)\.(com|io)$/.test(n.host)&&n.pathname.startsWith("/admin/")}catch{return!1}}function lo(e){return e instanceof ue}function Pt(e){var n;return(n=e==null?void 0:e.extension.manifest.app.betas)==null?void 0:n.appBridgeGuidesApi}const Dn=R(()=>({name:"guides",expose(e,n){if(!n||!Pt(n))return{};const t=new Set;let i=null;const a=r=>{var d,p,l;if(!lo(n.runtime))return;const s=nn(n.extensionPoint.url);if(!s)return;const o=Je(r)?r.detail:r;if(!(URL.canParse(o.origin)===!1||o.origin!==s.origin&&!new URL(o.origin).host.endsWith(`.${s.host}`)||!(o.source&&o.source===((d=n.runtime.frame)==null?void 0:d.contentWindow))||typeof o.data!="object")&&o.data.type==="internal::guides::ready"){const u=new MessageChannel,f=Ne(ft(u.port1));u.port1.start(),f.expose({getApi:()=>{var m;return(m=n.pluginApi.guides)==null?void 0:m.rpcApi}}),(l=(p=n.runtime.frame)==null?void 0:p.contentWindow)==null||l.postMessage({type:"internal::guides::init",port:u.port2},o.origin,[u.port2])}};return{messageHandler(r){try{a(r)}catch{}},dispatchGuides(r){i=r,t.forEach(s=>{i&&s(i)})},release(){i=null,t.forEach(r=>pe(r)),t.clear()},rpcApi:{subscribe(r){P(r),t.add(r),i&&r(i)},unsubscribe(r){pe(r),t.delete(r)}}}},instanceCreated(e){!Pt(e)||!e.pluginApi.guides||(window.addEventListener("message",e.pluginApi.guides.messageHandler,!0),window.addEventListener("remote-iframe",e.pluginApi.guides.messageHandler))},instanceTerminated(e){!Pt(e)||!e.pluginApi.guides||(window.removeEventListener("message",e.pluginApi.guides.messageHandler,!0),window.removeEventListener("remote-iframe",e.pluginApi.guides.messageHandler),e.pluginApi.guides.release())}}));class U extends W{constructor(t){super(t);k(this,"instance");return this.instance=t,Pi(this.instance)?new xi(t):new bi(t)}}k(U,"type",He);class Fi extends W{constructor(){super(...arguments);k(this,"_output");k(this,"endpoint",ze("https://extensions.shopifycdn.com/shopifycloud/v2/admin-ui-extensions/index.js",{name:je(this)}));k(this,"sandbox",this.endpoint.call)}async initialize(){await this.sandbox.sandbox()}async create(){await this.start()}async reload(){await this.start()}async start(){const{api:t,extensionPoint:i}=this.instance,a=i.target;t.expose({extension:{target:a}}),await this.sandbox.load(i.manifest.url),this._output=await this.sandbox.run(a,t.get())}async terminate(){await this.endpoint.terminate()}get output(){return this._output??null}get outlet(){return null}}k(Fi,"type","ui-extension-script");class Ci extends W{constructor(){super(...arguments);k(this,"endpoint",ze("https://extensions.shopifycdn.com/shopifycloud/v2/admin-app-home/index.js",{name:je(this)}));k(this,"sandbox",this.endpoint.call);k(this,"context");k(this,"renderable");k(this,"launchedManifest");k(this,"components")}async initialize({context:t}){this.context=t,this.components=(await T(async()=>{const{default:i}=await import("./domains-extensibility-ui-extensions-UiExtensionAppRuntime-BIW6T8UTLu6Y.js");return{default:i}},__vite__mapDeps([153,2,3,4,5,6,7,154,155,156,157,158,159]))).default}async create(){await this.sandbox.sandbox(this.instance.api.getGlobal()),await this.start()}async reload(){const{url:t,localization:i}=this.instance.extensionPoint.manifest;(!this.launchedManifest||this.launchedManifest.url!==t||this.launchedManifest.localization!==i)&&await this.start()}async start(){var o,c,d;const t=sr(this.components),i=si();this.renderable=E.createElement(fi,{controller:t,receiver:i});const{api:a,extensionPoint:r}=this.instance,s=r.target;a.expose({extensionPoint:s,...((o=this.context)==null?void 0:o.api)||{}}),await this.sandbox.load(r.manifest.url),await this.sandbox.render(s,{proxy:(c=this.context)==null?void 0:c.proxy,subscribables:(d=this.context)==null?void 0:d.subscribables,api:a.get()},Object.keys(this.components),(p,...l)=>(P(l),i.receive(p,...l)),r.manifest.localization),this.launchedManifest={url:r.manifest.url,localization:r.manifest.localization}}terminate(){this.endpoint.terminate()}get outlet(){return this.renderable??null}}k(Ci,"type",Va);const co={type:yr,query:"",selectionIds:[],action:vr,multiple:!1,filter:{hidden:!0,variants:!0,draft:void 0,archived:void 0,query:void 0}},uo=R(()=>({name:"resourcePicker",expose(){const e=y([]);function n(i){const a=typeof i=="string"?i:i.id;e.value=e.value.filter(r=>r.id!==a)}function t(i){const a={id:q(),...co,...i,onSelect(r){var s;(s=i.onSelect)==null||s.call(i,r),n(a)},onCancel(){var r;(r=i.onCancel)==null||r.call(i),n(a)}};return e.value=e.value.concat(a),a}return{get activePicker(){return e.value[0]},open:t,close:n}}}));function Mi(){let e,n;return{promise:new Promise((i,a)=>{e=i,n=a}),resolve:e,reject:n}}const po={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExtensibilityResourcePickerQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"appByHandleOrKey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"handleOrKey"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publication"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:172,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"421179a94397534ad5321be00912131b07890f46172a533e4a9edb4f085c975a"},mo={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExtensibilityResourcePickerQueryLegacy"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"appByHandle"},name:{kind:"Name",value:"appByHandle"},arguments:[{kind:"Argument",name:{kind:"Name",value:"handle"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"InstallationPublication"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"appByKey"},name:{kind:"Name",value:"appByKey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"apiKey"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"InstallationPublication"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"InstallationPublication"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"App"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publication"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:335,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"3b0ee7099be0ea10a37b82bbc8c7402501ccf00d98b95e75e2671e4ac0599be3"};async function fo(e,n,t){var c,d,p,l,u,f,m,h,g;if(t==null||t.extension.app.manifest.publicationId!=null)return!0;const{betaFlags:i}=e.value,r=i.get(mt)?po:mo,s=await e.value.apolloClient.query({query:r,errorPolicy:"all",fetchPolicy:"cache-first",variables:{handleOrKey:t.extension.app.handle}}),o=s.error==null;if(o){const v=s.data;n.addExtension({...t.extension.manifest,app:{...t.extension.app.manifest,publicationId:((p=(d=(c=v.appByHandleOrKey)==null?void 0:c.installation)==null?void 0:d.publication)==null?void 0:p.id)||((f=(u=(l=v.appByHandle)==null?void 0:l.installation)==null?void 0:u.publication)==null?void 0:f.id)||((g=(h=(m=v.appByKey)==null?void 0:m.installation)==null?void 0:h.publication)==null?void 0:g.id)}})}return o}const Ie=R((e,n)=>({name:"resourcePickerApi",expose(t,i){if(!i)throw new Error("The resourcePickerApi plugin should not be used as a global plugin.");return{publicApi:{async resourcePicker(a){var s;if(!t.pluginApi.resourcePicker)throw new Error("The global resourcePickerPlugin is not available. Make sure to register it before using the resource picker API.");const r=Mi();return(s=t.pluginApi.resourcePicker)==null||s.open({...a,publicationId:i==null?void 0:i.extension.app.manifest.publicationId,onSelect:o=>r.resolve(o),onCancel:()=>r.resolve(void 0),transparentBackdrop:!!(n!=null&&n.transparentBackdrop)}),r.promise}}}},async instanceCreated(t){t.pluginApi.resourcePickerApi&&t.api.expose(t.pluginApi.resourcePickerApi.publicApi)},async instanceActivated(t){await fo(e,this.host,t)?t.api.grant("resourcePicker"):t.api.revoke("resourcePicker")},async instanceDeactivated(t){t.api.revoke("resourcePicker")}}));class Oi extends ue{static async preload(n){var t;(t=n.pluginApi.mobileBridge)!=null&&t.isAvailable?await T(()=>import("./EmbeddedApp-DTvwcu6cvpfD.js"),__vite__mapDeps([98,2,3,47,48,49,56,36,34,35,50,99,4,5,6,7,100,40,37,38,39,90,85,51,101,102,103,54,31,53,104,65,66,67,33,17,105,70,68,69,86,106,82,81,107,108,84,109,110,80,111,112,79,113,114,83,115,12,116,117,118,119,120,121,72,122,123,124,87,13,14,15,16,18,19,20])):await T(()=>import("./EmbeddedApp-D8EXEZ2DG9N3.js"),__vite__mapDeps([160,2,3,4,5,6,7,47,48,49,50,52,161,100,40,34,35,36,37,38,39,162,111,112,79,67,163,109,110,80,164,119,120,121,86,33,70,31,165,73,74,99,101,102,103,54,166,16,167,127,57,58,59,53,56,168,169,170,171,172,173,174,175,176,177,64,61,178,179,180,12,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,43,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,108,224,71,72,65,66,77,122,106,82,81,225,133,134,135,136,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,137,138,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,78,83,84,85,69,41,87,312]))}initialize(){this.instance.ready.then(()=>{this.instance.telemetry.increment("ready.count"),this.timerId&&this.instance.pluginApi.perceivedPerformance&&this.instance.pluginApi.perceivedPerformance.stopInstanceReady(this.timerId)}).catch(()=>{}),this.hasMobileBridge?this.initializeEmbeddedApp({embeddedAppModule:T(()=>import("./EmbeddedApp-DTvwcu6cvpfD.js"),__vite__mapDeps([98,2,3,47,48,49,56,36,34,35,50,99,4,5,6,7,100,40,37,38,39,90,85,51,101,102,103,54,31,53,104,65,66,67,33,17,105,70,68,69,86,106,82,81,107,108,84,109,110,80,111,112,79,113,114,83,115,12,116,117,118,119,120,121,72,122,123,124,87,13,14,15,16,18,19,20])),isMobile:!0}):this.initializeEmbeddedApp({embeddedAppModule:T(()=>import("./EmbeddedApp-D8EXEZ2DG9N3.js"),__vite__mapDeps([160,2,3,4,5,6,7,47,48,49,50,52,161,100,40,34,35,36,37,38,39,162,111,112,79,67,163,109,110,80,164,119,120,121,86,33,70,31,165,73,74,99,101,102,103,54,166,16,167,127,57,58,59,53,56,168,169,170,171,172,173,174,175,176,177,64,61,178,179,180,12,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,43,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,108,224,71,72,65,66,77,122,106,82,81,225,133,134,135,136,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,137,138,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,78,83,84,85,69,41,87,312]))})}preloadIframe(){}}k(Oi,"type",ba);function ho(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Mobile")>=0}function go(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify POS")>=0}function vo(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Ping")>=0}function yo(){return ho()?"mobile":go()?"pos":vo()?"ping":"web"}const ko={maxEventInBatch:25,debounceTime:500};class bo{constructor(n,t){k(this,"monorailProducer");k(this,"_events");k(this,"debouncedSendAllBufferedEvents");k(this,"_options");this.monorailProducer=n,this._events=[],this._options={...ko,...t},this.debouncedSendAllBufferedEvents=ht(()=>this.sendAllBufferedEvents(),this._options.debounceTime)}produce(n){this._events.push(n),this.debouncedSendAllBufferedEvents()}get events(){return this._events}sendAllBufferedEvents(){const n=this._events.slice(0,this._options.maxEventInBatch);this._events=this._events.slice(this._options.maxEventInBatch),this._events.length>0&&this.debouncedSendAllBufferedEvents(),n.length>0&&this.monorailProducer.produceBatch({events:n})}}const Ge=new Set;function We(e,...n){return e!=null&&!Array.isArray(e)&&typeof e=="object"&&n.every(t=>t(e))}function ie(e){return typeof e=="string"}function ae(e,...n){return e==null||n.every(t=>t(e))}const Ao="@shopify/app-bridge";function wo(e){return We(e)&&ie(e.appId)&&We(e.action,n=>ie(n.type)&&ae(n.group,ie)&&ae(n.payload,We)&&ae(n.version,ie)&&ae(n.interfaceName,ie)&&ae(n.clientInterface,We,t=>ae(t.name,ie)&&ae(t.version,ie)))}function Rt(e,n){return`${n}:${e.id}`}const Eo=/^host\.plugin\.([^.]+)\.([^.]+)$/;function No(e){const n=e.match(Eo);return n?{plugin:n[1],lifecycle:n[2]}:null}const Pe=["host.error","host.instance.error","host.instance.api.error"];function Xe(e,n){if(e.data.context!=null)return e.data.context;if(n==null)return e.name;const t="message"in n?n.message:n;if(n!=null)return Pe.includes(e.name)?t:`${e.name}: ${t}`}function Bn(e){return e.type==="ms","extension_point_performance/3.0"}const j=yo();function $n(e,n){return"loadId"in e.data.target?`${e.data.target.loadId}:${e.name}:${n}`:"id"in e.data.target?`${e.data.target.id}:${e.name}:${n}`:`${q()}:${e.name}:${n}`}function xo(e,n){const t=n.value.monorail?new bo(n.value.monorail):null;function i(l){var x;const{sessionId:u,shop:f,staffMember:m,metrics:h}=n.value;if(!t||!u||!f||!m||!(l.data.target instanceof $t))return;const{shopId:g}=f,{userId:v}=m;if(!g||!v)return;const b=l.data.target,w=l.data.ok===!1?"host.error":l.name,A={eventName:w,sessionId:u,shopId:Number(g),userId:Number(v),loadId:e.id,value:Number(l.value),unit:((x=l.data)==null?void 0:x.unit)??l.type,context:l.data.ok===!1?Xe(l,b.error):""};t.produce({schemaId:"extensibility_host_performance/3.0",payload:A}),l.data.errors&&l.data.errors.length>0&&l.data.errors.forEach(_=>{t.produce({schemaId:"extensibility_host_performance/3.0",payload:{...A,eventName:"host.error",context:Xe(l,_)}})}),h!=null&&(Pe.includes(w)?h.record(z.ExtensibilityHostError,1,{surface:j}):h.record(z.ExtensibilityHostLifecycle,Math.floor(Number(l.value)),{lifecycle:w,surface:j}),l.data.errors&&l.data.errors.length>0&&h.record(z.ExtensibilityHostError,l.data.errors.length,{surface:j}))}function a(l){var v;const{sessionId:u}=n.value;if(!t||!u)return;const f=$n(l,"monorail");if(!(l.data.target instanceof J)||l.data.target.extensionPoint.type==="dev-console"||Ge.has(f)||l.data.target.extensionPoint.target===Re&&l.data.target.extension.app.manifest.embedded===!1)return;const m=l.data.target,h=l.data.ok===!1?"host.instance.error":l.name;Pe.includes(h)||Ge.add(f);const g={eventName:h,sessionId:u,loadId:m.loadId,value:l.value,unit:((v=l.data)==null?void 0:v.unit)??l.type,context:l.data.ok===!1?Xe(l,m.error):l.data.context??"",instanceId:Rt(m,u),extensionVersionId:m.extension.manifest.extensionVersionId??"unversioned",extensionType:m.extensionPoint.type,extensionTarget:m.extensionPoint.target,extensionId:m.extension.id,apiClientId:m.extension.app.id??"unknown",apiVersion:m.extension.manifest.apiVersion??"unknown"};t.produce({schemaId:Bn(l),payload:g}),l.data.errors&&l.data.errors.length>0&&l.data.errors.forEach(b=>{t.produce({schemaId:Bn(l),payload:{...g,eventName:"host.instance.error",context:Xe(l,b)}})})}function r(l){a(l);const u=$n(l,"observe"),{metrics:f}=n.value,m=l.data.target,h=l.data.ok===!1?"host.instance.error":l.name;!(m instanceof J)||m.extensionPoint.type==="dev-console"||f==null||l.data.context==="canceled"||Ge.has(u)||m.extensionPoint.target===Re&&m.extension.app.manifest.embedded===!1||(Pe.includes(h)||Ge.add(u),Pe.includes(h)?f.record(z.ExtensibilityInstanceError,1,{surface:j}):l.name.startsWith("host.instance.api")||f.record(z.ExtensibilityInstanceLifecycle,Math.floor(Number(l.value)),{lifecycle:h,surface:j}),h==="host.instance.activation"&&f.record(z.ExtensibilityLaunchAttempt,1,{surface:j,extensionType:m.extensionPoint.type,extensionTarget:m.extensionPoint.target}),l.data.errors&&l.data.errors.length>0&&f.record(z.ExtensibilityInstanceError,l.data.errors.length,{surface:j}))}function s(l){const{sessionId:u,metrics:f}=n.value;if(!t)return;const{target:m}=l.data;t.produce({schemaId:"app_bridge_actions/2.5",payload:{appId:parseInt(ye(l.data.payload.id),10)||0,action:l.data.payload.action,interfaceName:"app-bridge-cdn",interfaceVersion:"1",clientInterfaceName:"app-bridge-cdn",clientInterfaceVersion:"1",modalType:l.data.payload.modalVariant??void 0,loadId:m instanceof J?m.loadId:void 0,instanceId:m instanceof J?Rt(m,u):void 0}}),f!=null&&f.record(z.ExtensibilityInstanceAppBridgeAction,1,{surface:j,action:l.data.payload.action})}function o(l){var x,_;const{sessionId:u,metrics:f}=n.value,{target:m,payload:h}=l.data;if(!wo(h))return;const{group:g,payload:v={},type:b,version:w,clientInterface:A={}}=h.action;if(t!=null){const I=m instanceof J?m.loadId:e.id,L=h.action.interfaceName||Ao,M=w||"0",S=A.name||L,$=A.version||w||"0";let fe;g==="Modal"&&(v.message||v.path)&&(fe=v.path?"iframe":"message");const yt=g==="Modal"&&((_=(x=v.footer)==null?void 0:x.buttons)!=null&&_.secondary)?v.footer.buttons.secondary.length:void 0;t.produce({schemaId:"app_bridge_actions/2.5",payload:{appId:parseInt(ye(h.appId),10)||0,action:b,interfaceName:L,interfaceVersion:M,clientInterfaceName:S,clientInterfaceVersion:$,modalSecondaryButtonsCount:yt,modalType:fe,loadId:I,instanceId:m instanceof J?Rt(m,u):void 0}})}f!=null&&f.record(z.ExtensibilityInstanceAppBridgeAction,1,{surface:j,action:b})}function c(l){var x;const{metrics:u}=n.value;if(!t)return;const{appId:f,shopId:m,userId:h,appLoadId:g,loadId:v,instanceId:b,metrics:w=[]}=l.data,A=new Map;if(w.forEach(({name:_,value:I})=>{A.set(_,I)}),A.forEach((_,I)=>{t.produce({schemaId:"app_bridge_embedded_apps_performance_metrics/1.1",payload:{appId:Number(ye(f)),shopId:Number(m),userId:Number(h),appLoadId:g,metricName:I,value:_,loadId:v,instanceId:b}}),u==null||u.record(z.ExtensibilityInstanceLifecycle,Math.floor(Number(_)),{surface:j,lifecycle:`host.instance.partner.${I}`})}),l.data.target instanceof J&&((x=l.data.target.pluginApi.client)!=null&&x.debug.webVitals)){const _=Object.fromEntries(A);console.group("Shopify Web Vitals Record"),console.table(_),console.groupEnd()}}function d(l){r(l);const{metrics:u}=n.value,f=l.data.target;!(f instanceof J)||f.extensionPoint.type==="dev-console"||u==null||f.extensionPoint.target===Re&&f.extension.app.manifest.embedded===!1||(l.data.ok===!1?u.record(z.ExtensibilityInstanceError,1,{surface:j}):u.record(z.ExtensibilityLaunchSuccess,1,{surface:j,extensionType:f.extensionPoint.type,extensionTarget:f.extensionPoint.target}))}function p(l){const{target:u}=l.data,{metrics:f}=n.value,m=Math.floor(Number(l.value)),h=No(l.name);!f||!("name"in u)||h==null||(h.lifecycle==="search"&&m>1e3||m>750)&&f.record(z.ExtensibilityPluginSlowRun,m,{...h,surface:j})}e.telemetry.addListener("host.initialization",i),e.telemetry.addListener("host.search",i),e.telemetry.addListener("host.invocation",i),e.telemetry.addListener("host.launch",r),e.telemetry.addListener("host.instance.initialization",r),e.telemetry.addListener("host.instance.activation",r),e.telemetry.addListener("host.instance.deactivation",r),e.telemetry.addListener("host.instance.termination",r),e.telemetry.addListener("host.instance.ready",r),e.telemetry.addListener("host.instance.app-bridge-rpc-call",s),e.telemetry.addListener("host.instance.app-bridge-action",o),e.telemetry.addListener("host.instance.action-extension-primary-action",a),e.telemetry.addListener("host.instance.action-extension-secondary-action",a),e.telemetry.addListener("host.instance.block-extension-interaction",a),e.telemetry.addListener("host.instance.partner.readyToUse",r),e.telemetry.addListener("host.instance.readyToLoad",r),e.telemetry.addListener("host.instance.first-contentful-paint",a),e.telemetry.addListener("host.instance.component.*",a),e.telemetry.addListener("host.plugin.*.*",p),e.telemetry.addListener("host.instance.webVitals",c),e.telemetry.addListener("host.instance.partner.initialized",r),e.telemetry.addListener("host.instance.ready.count",r),e.telemetry.addListener("host.instance.readyToLoad.count",r),e.telemetry.addListener("host.instance.partner.initialized.count",d),e.telemetry.addListener("host.instance.partner.readyToUse.count",r),e.telemetry.addListener("host.error",i),e.telemetry.addListener("host.instance.error",a),e.telemetry.addListener("host.instance.api.*",a),e.telemetry.addListener("host.instance.picker.opened",a),e.telemetry.addListener("host.instance.picker.cancelled",a),e.telemetry.addListener("host.instance.picker.confirmed",a),e.telemetry.addListener("host.instance.block-collapsed",a),e.telemetry.addListener("host.instance.experiment.preload.*",a),e.ready.then(()=>e.telemetry.start()).catch(()=>{})}function he(){return{name:"saveMetafieldsPlugin",instanceCreated(e){const n=e.pluginApi.saveMetafieldsPlugin;e.api.expose({applyMetafieldChange:n.applyMetafieldChange,applyMetafieldsChange:n.applyMetafieldsChange})},instanceTerminated(e){e.pluginApi.saveMetafieldsPlugin.clearChangesets()},expose(e,n){if(!n)return{};const t=y({}),i=y({}),a=H(()=>({updates:Object.values(t.value),deletions:Object.values(i.value)})),r=async s=>{const[o,c,d]=Io(s,n);if(o)return{type:"error",errors:[{message:o}]};const p=[];return c.forEach(l=>{const u=Vn(l);p.push(()=>t.value={...t.value,[u]:l})}),d.forEach(l=>{const u=Vn(l);if(t.value[u]){const{[u]:f,...m}=t.value;p.push(()=>t.value=m)}}),yn(()=>{p.forEach(l=>l())}),{type:"success"}};return{applyMetafieldsChange:r,async applyMetafieldChange(s){const o=await r(s);return o.type==="error"?{type:"error",message:o.errors[0].message}:o},get changesets(){return a.peek()},clearChangesets(){yn(()=>{t.value={},i.value={}})}}}}}function Io(e,n){let t=null;const i=[],a=[],r=Array.isArray(e)?e:[e];if(!e||!(r!=null&&r.length))return[`Invalid changes argument passed to applyMetafieldsChange. Received type ${typeof e}, expected type MetafieldsChange.`,i,a];const s=[],o=[];for(const d of r){if(typeof d.type!="string"||d.type!=="updateMetafield"&&d.type!=="removeMetafield")return['Invalid change operation type, expected either string "updateMetafield" or "removeMetafield".',i,a];d.type==="updateMetafield"?o.push(d):s.push(d)}const c=ye(n.extension.manifest.app.id);for(const d of o){if(!d.key||typeof d.key!="string"){t=`invalid key received, must be of type string, instead received: ${typeof d.key}`;break}if(!d.value||!(typeof d.value=="string"||typeof d.value=="number")){t=`invalid value received, must be of type string or number, instead received: ${typeof d.key}`;break}if(!zn(c,d.namespace)){t="Access to this namespace and key are denied";break}i.push({type:d.valueType??null,namespace:Hn(c,d.namespace)??null,key:d.key,value:String(d.value)??null})}for(const d of s){if(!d.key||typeof d.key!="string"){t=`invalid key received, must be of type string, instead received: ${typeof d.key}`;break}if(!d.namespace||typeof d.namespace!="string"){t=`invalid namespace received, must be of type string, instead received: ${typeof d.namespace}`;break}if(!zn(c,d.namespace)){t="Access to this namespace and key are denied";break}a.push({namespace:Hn(c,d.namespace),key:d.key})}return[t,i,a]}function _o(e){if(!e)return;const t=/app--(.*?)--/.exec(e);return t==null?void 0:t[1]}function Vn(e){return`${e.key}|${e.namespace||"namespace"}`}function Hn(e,n){if(n)return n.replace(/^\$app:/,`app--${e}--`)}function So(e){return e?/app--\d*--/.test(e):!1}function zn(e,n){return!n||!So(n)||e===_o(n)}function Po({id:e,children:n,...t}){var i=D(1);try{var a=D(1);try{const r=E.useRef(t);r.current=t;const s=dn({fields:{dirty:un(!1)}}),o=E.useRef(s);o.current=s;const c=E.useRef(null);return E.useEffect(()=>{const d=r.current,p=o.current,l=c.current,u=new Set;let f=Ye(l);d.setHandlers({async save(){var b;await((b=d.onSave)==null?void 0:b.call(d)),p.reset(),f=Ye(l),u.clear(),h()},error(b){var w;(w=d.onError)==null||w.call(d,b)},reset(){var b;(b=d.onReset)==null||b.call(d),p.reset(),xs(l,f),u.clear(),h()}}),d.setDirty(!1);function m(){let b=!1;return Le(l,(w,A)=>{u.has(A)?w.value!==f[A]&&(b=!0):f[A]=w.value}),b}const h=ht(()=>{const b=m();p.fields.dirty.onChange(b),d.setDirty(b)},50);function g(b){u.add(X(b.target)),h()}l.addEventListener("valuemodified",g),l.addEventListener("change",g),l.addEventListener("input",g);const v=new MutationObserver(b=>{for(const w of b){for(const A of w.addedNodes)Fe(A)&&(u.delete(X(A)),f[X(A)]=A.value);for(const A of w.removedNodes)Fe(A)&&(u.delete(X(A)),delete f[X(A)])}h()});return v.observe(l,{childList:!0,subtree:!0}),()=>{v.disconnect(),l.removeEventListener("valuemodified",g),l.removeEventListener("change",g),l.removeEventListener("input",g),d.setHandlers(null),d.setDirty(!1)}},[e]),F.jsx("div",{ref:c,className:"function-settings-form",id:e,children:F.jsx(li,{gap:"300",children:n})})}finally{a.f()}}finally{i.f()}}const jn={error:bt,save:bt,reset:bt};function Kn(){return{name:"functionSettingsPlugin",instanceCreated(e,{context:n}){n.components.FunctionSettings=t=>E.createElement(Po,{...t,setDirty:e.pluginApi.functionSettingsPlugin.setDirty,setHandlers:e.pluginApi.functionSettingsPlugin.setHandlers,id:`${e.extensionPoint.id}-${t.id}`})},expose(e,n){if(!n)return{};const t=y(!1),i=y(!1);let a=jn;return{setHandlers(r){a=r??jn},async save(){t.value=!0;try{await a.save()}finally{t.value=!1}},setErrors(r){a.error(r)},setDirty(r){i.value=r},get dirty(){return i},get submitting(){return t},reset(){a.reset()}}}}}function Ro(){const e=Q();return{name:"overlay",expose(){return{...{async show(i,a){return(await e.promise).show(i,a)},async hide(i){return(await e.promise).hide(i)}},initialize(i){return e.resolved&&e.reset(),e.resolve(i),()=>{e.reset()}}}}}}function hn(e){return typeof e=="object"&&e!=null&&"type"in e.constructor&&e.constructor.type===pn}function Ui(e=[]){return e.length<3?e:[e[0],e[1]]}function Di(e){return`modal-container-${e}`}function To(e){const n=Di(e),t=document.getElementById(n);if(t)return t;const i=document.createElement("div");return i.id=n,document.body.appendChild(i),i}function Lo(e){const n=Di(e),t=document.getElementById(n);t&&document.body.removeChild(t)}function Fo(e,n,t){const i=e.pluginApi.overlay,a=e.pluginApi.saveBar;if(!a)throw new Error("Missing SaveBarPlugin");let s=`frame://${H(()=>e.extension.app.handle).value}/modal/${q()}`;t!=null&&t.src&&(s+="/src");const o=q(),c=y(t),d=y(!1),p=H(()=>{var A;return((A=c.value)==null?void 0:A.variant)==="max"?a.maxModal.value:void 0}),l=Q(),u=y(!1);async function f(){if(!i)throw new Error("Missing OverlayPlugin");const A=await i.show({header:{title:""},variant:"base",open:!1,showChildrenByDefault:!0},o),x=Aa.createRoot(To(A)),_=document.getElementById(A);if(!_)throw new Error(`Could not find element with id ${A}`);return x.render(wa.createPortal(F.jsx(Co,{name:s,instance:e,modalSignal:c,showSignal:d,contentId:A,loadResolver:l,defaultIframeUrl:n}),_)),()=>{x.unmount(),Lo(A)}}const m=f();Ee(async()=>{const A=d.value,x=c.value,_=A?x:void 0,I=p==null?void 0:p.value;if(!i)throw new Error("Missing OverlayPlugin");if(await m,_)if(I){const L=()=>{var $;const S=I.onSave??(($=I.saveButton)==null?void 0:$.onAction);S==null||S()},M=async()=>{var $;const S=I.onDiscard??(($=I.discardButton)==null?void 0:$.onAction);I.discardConfirmation?await a.showDiscardConfirmationModal()&&(S==null||S()):S==null||S()};await i.show({header:{title:"unsavedChanges",icon:"contextualSaveBarIcon",closeButton:!1},buttons:[{label:"discard",onAction:M},{label:"save",variant:"primary",onAction:L}],variant:_.variant,onClose:M,open:!0,showChildrenByDefault:!0},o)}else await i.show({header:{title:_.title||"",icon:e.extension.manifest.app.icon},buttons:Ui(_.buttons).reverse(),variant:_.variant,onClose:()=>{_.onClose?_.onClose():v()},open:!0,showChildrenByDefault:!0},o);else await i.show({header:{title:""},variant:"base",open:!1,showChildrenByDefault:!0},o)});const h=A=>{c.value=A},g=async()=>{var A;await m,d.value=!0,u.value||e.telemetry.increment("app-bridge-rpc-call",{target:sn,payload:{id:e.extension.app.id,action:"APP::MODAL::OPEN",modalVariant:(A=c.value)==null?void 0:A.variant}}),u.value=!0,await l.promise},v=async()=>{await m,d.value=!1,u.value=!1},b=a.leaveConfirmation.setConfirmCallback(v);async function w(){b(),await(i==null?void 0:i.hide(o)),(await m)()}return{uuid:void 0,name:s,get modal(){return c.peek()},set:h,show:g,hide:v,terminate:w}}function Co({instance:e,name:n,modalSignal:t,showSignal:i,contentId:a,loadResolver:r,defaultIframeUrl:s}){var o=D(1);try{var c=D(1);try{const d=e.pluginApi.searchForAppHome;if(!d)throw new Error("Missing SearchForAppHomePlugin");const p=bn(()=>e.extension.app.handle).value,l=bn(()=>t.value).value,u=E.useMemo(()=>(l==null?void 0:l.variant)==="max"?"max":"classic",[l==null?void 0:l.variant]),f=E.useRef(null),[m,h]=E.useState(),g=E.useMemo(()=>(l==null?void 0:l.src)||s,[s,l]);E.useEffect(()=>{let I=!0;return g?(async()=>{try{if(!I||!g)return;const L=new URL(g),M=await d.fetchAppInstallation(p,L.search,!0),{appUrl:S}=M||{};if(!I||!S)return;const $=new URL(S);L.search=$.search,h(L.toString())}catch{}})():h(void 0),()=>{I=!1}},[p,g,d]);const[v,b]=E.useState(!1);E.useEffect(()=>{v?(r.resolve(),t.value=t.peek()):r.reset()},[v,r,t]),E.useEffect(()=>{b(!1)},[g]);const[w,A]=E.useState(0);if(E.useEffect(()=>{v||A(0)},[v]),E.useEffect(()=>{const I=document.getElementById(a),L=i.peek();if(!I||u!=="classic")return;let M;return L?M=setTimeout(()=>{I.style.transition="height 0.2s ease-in-out"},1e3):I.style.transition="",requestAnimationFrame(()=>{I.style.height=w>0?`${w}px`:Uo}),()=>clearTimeout(M)},[w,a,u,i]),E.useEffect(()=>{function I(L){var $;const M=document.getElementById(a),S=f.current;if(!(!M||!S||L.source!==S.contentWindow))switch(($=L.data)==null?void 0:$.type){case"load":{b(!0);break}case"unload":{b(!1);break}case"resize":{A(L.data.height);break}case"keyboard":{const{keys:fe,held:yt}=L.data.payload;if(fe.includes("Escape")){const ee=document.getElementById(a);ee==null||ee.dispatchEvent(new KeyboardEvent("keyup",{key:"Escape",keyCode:Ea.Escape,bubbles:!0}))}else{const ee=fe[0],G=yt,qi=new KeyboardEvent("keydown",{key:ee,code:`Key${ee.toUpperCase()}`,charCode:ee.charCodeAt(0),keyCode:ee.charCodeAt(0),metaKey:G==null?void 0:G.includes("Meta"),ctrlKey:G==null?void 0:G.includes("Control"),altKey:G==null?void 0:G.includes("Alt"),shiftKey:G==null?void 0:G.includes("Shift")});document.dispatchEvent(qi)}break}}}return window.addEventListener("message",I),()=>{window.removeEventListener("message",I)}},[a]),!m)return null;const x=v?null:F.jsx("div",{style:Oo,children:F.jsx(Na,{i18n:_a,children:F.jsx(li,{inlineAlign:"center",children:F.jsx(xa,{align:"center",children:F.jsx(Ia,{size:"small"})})})})}),_={...Mo,maxHeight:v?"unset":"0"};return F.jsxs(F.Fragment,{children:[F.jsx("iframe",{ref:f,name:n,title:e.extension.manifest.name,style:_,src:m,allow:ui},n),x]})}finally{c.f()}}finally{o.f()}}const Mo={border:"none",width:"100%",flex:1},Oo={position:"absolute",inset:0,display:"flex",justifyContent:"center",alignItems:"center"},Uo="4rem";async function Do(e,n){const{searchForAppHome:t}=e.pluginApi;if(!t)throw new Error("Missing SearchForAppHomePlugin");const{origin:i}=new URL(e.extensionPoint.url),a=new URL(n,i),r=await t.fetchAppInstallation(e.extension.app.handle,a.search,!0),{appUrl:s}=r||{};if(!s)throw new Error("Failed to sign app URL");const o=new URL(s);return a.search=o.search,a.toString()}async function an(e){return new Promise(n=>{setTimeout(()=>{n()},e)})}const rn=400;function Bo(e){let n;const t=Q(),i=Q();async function a(r,s){var o;return((o=e.onInterceptModalUrl)==null?void 0:o.call(e,r,s))||s.url}return{async show(r){const s=n;if(s&&r.webViewId!==s.webViewId)throw new Error("Switch to different webViewId is not supported");if(s&&r.fullscreen!==s.fullscreen)throw new Error("Toggle fullscreen is not supported");const{mobileBridge:o,webView:c}=e.instance.pluginApi,{mobileBridge:d,isAndroid:p=!1}=o||{};if(!d)throw new Error("Missing mobileBridge");const{remoteApi:l}=c||{};if(!l)throw new Error("Missing webViewPlugiremoteApi");n={...r};const{screenApi:u}=await $o({modal:r,resolver:t,mobileBridge:d,iframeResolver:i,isAndroid:p});u.actionBar.set(n.actions?{actions:n.actions}:null);const f=i.resolved,m=await a(s,r),h={...r,url:m},{iframe:g,terminate:v}=await qn({modal:h,resolver:i,remoteApi:l,waitForLoadMessage:e.waitForLoadMessage});f||await an(rn);let b;if(s&&r.iframeName!==s.iframeName){await u.loading.set({blocking:!1,opacity:1}),await v();const{iframe:w}=await qn({modal:h,resolver:i,remoteApi:l,waitForLoadMessage:e.waitForLoadMessage});b=w,await an(rn),await u.loading.set(null)}else s&&r.url!==s.url&&g.contentWindow.location.replace(h.url);return u.titleBar.set({title:n.title}),u.loading.set(n.loading?{blocking:!1}:null),{screenApi:u,iframe:b||g}},async hide(){if(!n)return;n=void 0;const{terminate:r}=await t.promise,{terminate:s}=await i.promise;await r(()=>s())}}}async function $o({modal:e,resolver:n,mobileBridge:t,iframeResolver:i,isAndroid:a}){if(n.isResolving||n.resolved)return n.promise;n.resolving();let r,s;const o=Q();async function c(l){!r||o.isResolving||o.resolved||(o.resolving(),s=l,r.close(),await o.promise,n.reset())}const d={title:e.title,titleBar:{backAction:{onAction(){e==null||e.onDismiss()}}},loading:{blocking:!1,opacity:1},onInit(l){P(l),r=l,l.update({webViewId:e.webViewId})},async onWebViewAppear(){r&&(n.resolve({screenApi:r,terminate:c}),a&&Ut(async()=>{const{iframe:l}=await i.promise;l.setAttribute("scrolling","auto")}),await an(rn))},async onWebViewDisappear(){s?(await s(),o.resolve()):a&&Ut(async()=>{const{iframe:l}=await i.promise;l.setAttribute("scrolling","no")})}},p=e.fullscreen?"FullscreenModal":"Modal";return t.extensibility.navigation.navigate(p,{screen:"ExtensibilityWebView",params:d}),n.promise}const Vo="margin: 0px; padding: 0px; border: none; width: 100%; height: 100%; position: fixed; inset: 0px; background-color: white; z-index: 1000;";async function qn({modal:e,resolver:n,remoteApi:t,waitForLoadMessage:i}){if(n.isResolving||n.resolved)return n.promise;n.resolving();const{createIframe:a}=t,r=await a(e.iframeName,{title:e.title,allow:ui,style:Vo,...e.delayLoadUrl?{}:{src:e.url}}),s=await Ut(()=>new URL(e.url).origin||""),o={postMessage(d,p){p===s&&r.postMessage(d)},location:{replace(d){r.setAttribute("src",d)},reload(){r.setAttribute("src",e.url)}}},c=await r.onMessage(async({data:d})=>{const p={data:d,origin:s||"",source:o};window.dispatchEvent(new CustomEvent(vt,{detail:p}))});if(i){const d=Q(),p=await r.onMessage(async({data:l})=>{l&&typeof l=="object"&&l.type==="load"&&(d.resolve(),p())});await d.promise}return n.resolve({iframe:{contentWindow:o,setAttribute(d,p){r.setAttribute(d,p)}},async terminate(){await c(),await r.remove(),n.reset()}}),n.promise}const Ho=(e,n,t)=>{const i=Bo({instance:e,waitForLoadMessage:!0,async onInterceptModalUrl(m,h){return!m||h.url!==m.url?Do(e,h.url):h.url}});let r=`frame://${e.extension.app.handle}/modal/${q()}`;t!=null&&t.src&&(r+="/src");const s=y(t),o=y(!1),c=y(void 0),d=Q();Ee(()=>{const m=s.value,h=o.value,g=c.value,{webView:v}=e.pluginApi||{};if(!h||!m||!g||!v)return;const b=zo(m,n);(async()=>{const{screenApi:w}=await i.show({...b,webViewId:g,iframeName:r,fullscreen:m.variant==="max"});v.modalFrameApi=w,d.resolve()})()});const p=m=>{s.value=m},l=async()=>{var m,h;c.value=await((h=(m=e.pluginApi.webView)==null?void 0:m.mainFrameApi)==null?void 0:h.getWebViewId()),o.value=!0,await d.promise},u=async()=>{d.reset(),o.value=!1,i.hide()};async function f(){o.value=!1,i.hide()}return{uuid:void 0,name:r,get modal(){return s.peek()},set:p,show:l,hide:u,terminate:f}};function zo(e,n){var t,i;return{title:e.title||"",url:e.src||n,actions:(i=(t=Ui(e.buttons))==null?void 0:t.reverse())==null?void 0:i.map(({label:a,disabled:r,variant:s,loading:o,onAction:c})=>({label:a.trim(),disabled:r,loading:o,emphasis:s==="primary"?"high":void 0,flexGrow:s==="primary"?1:void 0,onAction(){c==null||c()}})),onDismiss(){var a;(a=e.onClose)==null||a.call(e)}}}const jo=["small","base","large"],Ko=[...jo,"max"],sn=R(()=>{const e=new Map,n=new Map,t=new ii;return{name:"modal",expose(i,a){var r;if(!a)throw new Error("Modal must be an instance plugin");return{modalManager:Go(a,t,(r=a.pluginApi.mobileBridge)!=null&&r.isAvailable?Ho:Fo)}},instanceCreated(i){const{modalManager:a}=i.pluginApi.modal||{};if(!a)throw new Error("modalManager not found");async function r(u,f){if(!a)throw new Error("modalManager not found");qo(u),P(u),a==null||a.set(f,u)}async function s(u){if(!a)throw new Error("modalManager not found");const f=a.obtain(u);return await f.show(),f.name}async function o(u){if(!a)throw new Error("modalManager not found");await a.release(u)}async function c(){return location.reload(),Promise.resolve()}const{runtime:d}=i,p=hn(d)?d:void 0,l=p==null?void 0:p.setOnInitializeListener(u=>{t.value=u,a.release()});e.set(i,()=>{a.release()}),n.set(i,()=>{l==null||l(),a.release()}),i.api.exposeGlobal({modal:{set:r,show:s,hide:o},setModal:c})},async instanceDeactivated(i){var a;(a=e.get(i))==null||a(),e.delete(i)},async instanceTerminated(i){var a;(a=n.get(i))==null||a(),n.delete(i)}}});function qo(e){if(!e)return;const{variant:n=""}=e;if(!Ko.includes(n))throw new Error("Invalid model variant")}function Go(e,n,t){const i=[],a=new Map;function r(l){return i.find(u=>u.uuid===l)}function s(l,u){if(u){a.set(l,u);const f=r(l);f&&f.set(u)}else a.delete(l);p()}function o(l){const u=t(e,n.value,l);return i.push(u),u}function c(l){const u=a.get(l);if(!u)throw new Error("Modal not found");const f=r(l)||!u.src&&i.find(m=>!m.uuid)||o(u);return f.set(u),f.uuid=l,f}async function d(l){var u,f;if(l){const m=r(l);if(!m)return;await m.hide(),m.uuid=void 0,((u=m.modal)!=null&&u.src||((f=m.modal)==null?void 0:f.variant)==="max")&&(await m.terminate(),i.splice(i.indexOf(m),1))}else{for(const m of i)await m.terminate();i.length=0}}async function p(){var m;const l=Array.from(a.values()).some(h=>!h.src);let u=!1,f=0;for(const h of i)h.uuid?((m=h.modal)==null?void 0:m.variant)==="max"&&(u=!0):f++;l&&(i.length===0&&o(),f===0&&u&&o())}return{get:r,set:s,populate:o,obtain:c,release:d,getModalFrames:()=>i,getModals:()=>a}}const Gn="saveBar",Wn=R(()=>{const e=Q(),n=y(null),t=y(null),i=y(!1),a=new Set,r=new Set,s=new Map;function o(){n.value=null,t.value=null}return{name:Gn,expose(){return{mainApp:n,maxModal:t,async showDiscardConfirmationModal(){return(await e.promise).showDiscardConfirmationModal()},leaveConfirmation:{open:i,onConfirm(){r.forEach(c=>c())},onDiscard(){a.forEach(c=>c())},setConfirmCallback(c){return r.add(c),()=>r.delete(c)},setDiscardCallback(c){return a.add(c),()=>a.delete(c)}},initialize(c){return e.resolved&&e.reset(),e.resolve(c),()=>{e.reset()}}}},instanceCreated(c){const{runtime:d}=c;if(hn(d)){const l=d.setOnInitializeListener(o);s.set(c,()=>l())}const p={async set(l,u){var f;P(l),u==="max-modal"?t.value=l:(f=n.peek())!=null&&f.legacy||(n.value=l)},async leaveConfirmation(){const{saveBar:l}=c.pluginApi;if(!l||!n.value&&!t.value)return;i.value=!0;const u=Q(),f=[l.leaveConfirmation.setConfirmCallback(()=>{m(),u.resolve(null)}),l.leaveConfirmation.setDiscardCallback(()=>{m()})];function m(){i.value=!1,f.forEach(h=>h())}await u.promise}};c.api.exposeGlobal({[Gn]:p})},instanceDeactivated(){o()},instanceTerminated(c){var d;(d=s.get(c))==null||d(),s.delete(c)}}}),Wo={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExtensionAppInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"appByHandleOrKey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"handleOrKey"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"src"},name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"shopifyDeveloped"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isChannel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportEmail"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportPortalUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportPreferredMethod"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportLocales"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:256,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"4cd70d61484606c7f623c1d7a4654319adb3fc1fdc75c1906fb347b59653d721"},Xo={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExtensionAppInfoLegacy"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"appByHandle"},name:{kind:"Name",value:"appByHandle"},arguments:[{kind:"Argument",name:{kind:"Name",value:"handle"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AppSupportDetails"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"appByKey"},name:{kind:"Name",value:"appByKey"},arguments:[{kind:"Argument",name:{kind:"Name",value:"apiKey"},value:{kind:"Variable",name:{kind:"Name",value:"handleOrKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AppSupportDetails"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"shop"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AppSupportDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"App"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"src"},name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"shopifyDeveloped"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isChannel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportEmail"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportPortalUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportPreferredMethod"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportLocales"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:401,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"72cc5da30b8ce60c48a09cbb0e589f818a1c485b4a342a9c6da21c48c55ac534"};function Qo(e){const{betaFlags:n}=e.value,t=n.get(mt),i=y(null),a=new Map;return{name:"getSupport",expose(r){function s(c){const d=a.get(c)??y(!1);return a.set(c,d),d}const o=new Map;return{hasRequestedSupport:s,skipSupportHandler(c){o.set(c,!0)},dontSkipSupportHandler(c){o.set(c,!1)},requestWasHandled(c){const d=a.get(c);d&&(d.value=!1)},async showSupport(c){const d=t?Wo:Xo,{apolloClient:p}=e.value,[l,u]=await Promise.all([r.search({...pi}),p.query({query:d,errorPolicy:"all",fetchPolicy:"network-only",variables:{handleOrKey:c}})]),f=l.find(h=>h.extension.app.apiKey===c);if(f){const h=ro(f.url);if(h.startsWith("http")||h.startsWith("www"))return window.open(f.url,"_blank");if(s(c).value=!0,o.get(c))return;e.value.navigate(h);return}if(u.error!=null)throw u.error;const m=u.data;if(m!=null&&m.appByHandleOrKey||m!=null&&m.appByHandle||m!=null&&m.appByKey){const h=m.appByHandleOrKey||m.appByHandle||m.appByKey;i.value={...h,apiKey:c,supportPreferredMethod:h==null?void 0:h.supportPreferredMethod,shop:u.data.shop}}},async hideSupport(){i.value=null},supportData:i}}}}function Yo({appId:e,extensionHandle:n,url:t,search:i}){const a=new URLSearchParams(i);if(a.has("checkoutProfileId")){const r=a.get("checkoutProfileId");return r?t.checkoutEditor({profileId:r,queries:{context:"apps",app:e,collection:n}}):null}return null}function Tt(e){return{name:"navigation",instanceCreated(n){const{searchForAppHome:t,webView:i}=n.pluginApi;if(!t)throw new Error("Missing SearchForAppHomePlugin");const a=H(()=>n.extension.app.handle),r=H(()=>new URL(n.extensionPoint.url).origin),{runtime:s}=n;function o(d){const{protocol:p,pathname:l,search:u}=Xn(d,r.value);if(p!=="app:")return;const f=e.value.url;if(f)return new URL(f.app(a.value,`${l}${u}`),location.origin)}const c={async navigate(d){var f;if(!hn(s))return;const{protocol:p,pathname:l,search:u}=Xn(d,r.value);switch(p){case"app:":{const m=await t.fetchAppInstallation(a.value,u,!0);if(!(m!=null&&m.appUrl)||!URL.canParse(m.appUrl)){const v=`App handle: ${a.value} - Original URL: ${d}`;throw new TypeError(m!=null&&m.appUrl?`Invalid App installation URL: "${m.appUrl}"`:"Missing App installation URL",{cause:v})}const h=new URL(m.appUrl);h.pathname=l;const g=(f=s.frame)==null?void 0:f.contentWindow;g==null||g.location.replace(h.toString());break}case"extension:":{const m=l.split("/").pop(),h=ye(n.extension.app.id);if(m){const g=Yo({appId:h,extensionHandle:m,url:e.value.url,search:u});if(g)e.value.navigate(g);else throw new Error("Navigating to this extension is not supported")}break}default:throw new Error("Not supported")}},async pushState(d){var m;const p=o(d);if(!p||p.href===window.location.href)return;const{navigate:l}=e.value,{pathname:u,search:f}=p;(m=n.pluginApi.mobileBridge)!=null&&m.isAvailable&&i?i.routerApi.history.pushState(`${u}${f}`):l(`${u}${f}`,{replace:!1})},async replaceState(d){var m;const p=o(d);if(!p||p.href===window.location.href)return;const{navigate:l}=e.value,{pathname:u,search:f}=p;(m=n.pluginApi.mobileBridge)!=null&&m.isAvailable&&i?i.routerApi.history.replaceState(`${u}${f}`):l(`${u}${f}`,{replace:!0})}};n.api.exposeGlobal({navigation:c})}}}function Xn(e,n){const t=URL.parse(e,n);if(!t)throw new Error(`Invalid URL: "${e}"`);const i=t.origin===n?"app:":t.protocol;switch(i){case"app:":{const a=e.replace(/^app:\/*/,""),{pathname:r,search:s}=new URL(a,n);return{protocol:i,pathname:r,search:s}}default:return t}}const Jo=R(()=>{const e=new Map;return{name:"perceivedPerformance",expose(n,t){const i={partnerInitialized:void 0,readyToUse:void 0};return{createTimerNamespace(){const a=Math.random().toString(36).substring(2,15);return e.set(a,performance.now()),a},stopInstanceReady(a){const r=e.get(a);!t||!r||n.telemetry.timing("instance.ready",performance.now()-r,{target:t,ok:!0},r)},stopReadyToLoad(a,r){const s=e.get(a);!t||!s||n.telemetry.timing("instance.readyToLoad",performance.now()-s,{target:t,ok:!0,...r},s)},startPartnerInitialized(a){const r=e.get(a);!t||!r||(i.partnerInitialized=n.telemetry.performanceStart("instance.partner.initialized"))},stopPartnerInitialized(a){const r=e.get(a);!t||!r||!i.partnerInitialized||(i.partnerInitialized.stop({target:t??n,ok:!0}),delete i.partnerInitialized)},startReadyToUse(a){const r=e.get(a);!t||!r||(i.readyToUse=n.telemetry.performanceStart("instance.partner.readyToUse"))},stopReadyToUse(a){const r=e.get(a);!t||!r||!i.readyToUse||(i.readyToUse.stop({target:t??n,ok:!0}),delete i.readyToUse)},cancelTimers(a){if(!(!t||!e.get(a))){for(const r of Object.values(i))r===null||typeof r=="boolean"||r.stop({target:t??n,ok:!0,context:"canceled"});e.delete(a)}}}},instanceCreated(n){n.api.exposeGlobal({perceivedPerformance:{appIsReady:()=>{var t;n.telemetry.increment("partner.readyToUse.count"),n.pluginApi.perceivedPerformance&&((t=n.launchOptions.context)!=null&&t.timerId)&&n.pluginApi.perceivedPerformance.stopReadyToUse(n.launchOptions.context.timerId)},reportWebVitals(...t){const{webVitals:i}=n.pluginApi;!i||i.wasReported||i.metrics.push(...t)}}})},instanceDeactivated(n){var t;n.pluginApi.perceivedPerformance&&((t=n.launchOptions.context)!=null&&t.timerId)&&n.pluginApi.perceivedPerformance.cancelTimers(n.launchOptions.context.timerId)}}});var _e=function(e){return e.Host="host",e.Plugin="plugin",e.Instance="instance",e.Unknown="unknown",e}({});const Zo=R(()=>{let e=!1;const n=y([]);let t=0;const i=y([]);let a=0;const r=y([]);let s=0;const o=y([]),c=y([]),d=y(!1);return{name:"extensibilityHostDevTools",expose(p){return e===!1&&(e=!0,r.value=r.value.concat(p.plugins.map(u=>({id:++a,name:u.name,type:"global",entity:u,pluggableId:0}))),p.telemetry.addListener("host.instance.*",u=>{u.data.target instanceof J&&(i.value=i.value.concat({id:++t,name:u.name,value:u.value,type:u.type,data:u.data,entity:u,eventableId:u.data.target.id,eventableType:_e.Instance}))}),p.telemetry.addListener("host.plugin.*",u=>{const f={id:++t,name:u.name,value:u.value,type:u.type,data:u.data,entity:u,eventableId:0,eventableType:_e.Unknown},m=r.value.find(h=>h.entity===u.data.target);m?(f.eventableId=m.id,f.eventableType=_e.Plugin):u.data.target instanceof Ha&&(f.eventableType=_e.Host),i.value=i.value.concat(f)}),p.telemetry.addListener("host.*",u=>{u.data.target===p&&(i.value=i.value.concat({id:++t,name:u.name,value:u.value,type:u.type,data:u.data,entity:u,eventableId:0,eventableType:_e.Host}))}),Ee(()=>{const u=[];p.error&&(u.push(p.error),n.peek().includes(p.error));for(const f of p.instances)f.error&&(u.push(f.error),n.peek().includes(f.error));n.value=u})),{errors:n,hasError:H(()=>n.value.length>0),terminatedInstances:c,plugins:r,targetConfigurations:o,telemetryEvents:i,locateInstanceUi:d,openDocs(u="/"){open(new URL(u,"https://extensibility-host.docs.shopify.io"),"exthostdocs","status=no, toolbar=no, popup")}}},targetConfigCreated(p){const l={id:++s,target:p.target,multiInstance:p.multiInstance,entity:p};o.value=o.value.concat(l),r.value=r.value.concat(p.plugins.reduce((u,f)=>(this.host.plugins.includes(f)||u.push({id:++a,name:f.name,type:"target",entity:f,pluggableId:l.id}),u),[]))},instanceTerminated(p){c.value=c.value.concat(p)}}}),el=E.createContext(null),tl="web",nl=me({async load(){const{WebRuntimeProvider:e}=await T(async()=>{const{WebRuntimeProvider:n}=await import("./domains-extensibility-web-WebRuntimeProvider-BKnWkNvR_J1w.js");return{WebRuntimeProvider:n}},__vite__mapDeps([313,2,3,38,39,4,5,6,7,36,34,35]));return{default:e}}});class Bi extends W{constructor(t){super(t);k(this,"appBridge");k(this,"iframeUrl");k(this,"root",E.createRef());this.handleMessage=this.handleMessage.bind(this),addEventListener("message",this.handleMessage,!0)}get frame(){var t;return(t=this.root.current)==null?void 0:t.querySelector("iframe")}get outlet(){const{appBridge:t}=this;return E.createElement("web-extension",{ref:this.root},E.createElement(el.Provider,{value:this.instance},t&&E.createElement(nl,{appBridge:t})))}async create(){const{AppBridgeManager:t}=await T(async()=>{const{AppBridgeManager:i}=await import("./AppBridgeManager-pDgyOxpUwNNs.js");return{AppBridgeManager:i}},__vite__mapDeps([314,3,36,34,35,50,49]));this.appBridge=new t(this.instance)}terminate(){removeEventListener("message",this.handleMessage,!0)}setOnInitializeListener(t){const i=a=>{const r=this.frame;!r||a.source!==(r==null?void 0:r.contentWindow)||this.isLegacyAppBridge(a.data)&&t(this.iframeUrl)};return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}}handleMessage(t){var d,p,l;const i=new URL(this.instance.extensionPoint.url);if(t.origin!==i.origin&&!new URL(t.origin).host.endsWith(`.${i.host}`)||this.isLegacyAppBridge(t.data))return;const a=t.source&&t.source===((d=this.frame)==null?void 0:d.contentWindow),r=new MessageChannel,s=Ne(ft(r.port1));r.port1.start();let o;const c=this.instance.ready.then(u=>{const f={api:a?u.api.get():{},internal:a?u.api.getGlobal():{}};return o=f,f});s.expose({getApi:()=>o??c}),(l=(p=this.frame)==null?void 0:p.contentWindow)==null||l.postMessage({type:"dispatch",payload:{version:"1",type:"APP::CLIENT::RPC",payload:{port:r.port2}}},t.origin,[r.port2])}isLegacyAppBridge(t){try{if(t.type==="dispatch"&&t.payload.type==="APP::CLIENT::INITIALIZE"&&t.payload.clientInterface.name==="app-bridge-cdn")return!1}catch{}return!0}}k(Bi,"type",tl);function gn(e){return"appBridge"in e}const il=me({load:()=>T(()=>import("./domains-extensibility-web-plugins-main-FramePluginMain-vjjYziv4xH1t.js"),__vite__mapDeps([315,2,3,63,4,5,6,7,64,36,34,35,40,37,38,39,65,66,67,68,69,70,71,72,12,13,14,15,16,17,18,19,20])),displayName:"AppBridgeMainFrame"});function al(){return{name:"mainFrame",instanceCreated(e){gn(e.runtime)&&e.runtime.appBridge.addComponents(il)}}}const rl=me({load:()=>T(()=>import("./AppBridgeHostSessionToken-BDUMU3kObD9j.js"),__vite__mapDeps([166,2,3,4,5,6,7,47,48,49,36,34,35,100,40,37,38,39,54,31,16,167])),displayName:"AppBridgeSessionToken"});function sl(){return{name:"sessionToken",instanceCreated(e){gn(e.runtime)&&e.runtime.appBridge.addFeature({group:ri("SessionToken"),components:[rl]})}}}function ol(){return{name:"toast",instanceCreated(e){gn(e.runtime)&&e.runtime.appBridge.addFeature({group:ri("Toast"),components:[ll]})}}}const ll=me({load:()=>T(()=>import("./AppBridgeHostToast-DhM_JPHDIa5Y.js"),__vite__mapDeps([316,162,3,4,2,5,6,7,111,36,34,35,112,79,67,40,37,38,39])),displayName:"AppBridgeToast"}),Qn=R(()=>({name:"visibility",expose(e,n){if(!n)throw new Error("The visibility plugin requires an instance and should only be used as a target plugin");let t="visible";return{dispatchVisibilityChange(i){fn(n.runtime)&&i!==t&&(t=i,n.runtime.dispatchEvent("visibilitychange",{visibilityState:t}))}}},instanceActivated(e){var n;(n=e.pluginApi.visibility)==null||n.dispatchVisibilityChange("visible")},instanceDeactivated(e){var n;(n=e.pluginApi.visibility)==null||n.dispatchVisibilityChange("hidden")}})),Lt=R(()=>({name:"support",expose(e,n){if(!n)throw new Error("Instance is required for support plugin");const t=n.extension.app.manifest.apiKey,i=y(!1),a=H(()=>{var s,o;return(o=(s=n.pluginApi.getSupport)==null?void 0:s.hasRequestedSupport(t))==null?void 0:o.value}),r=Ee(()=>{var o;const s=i.value;a.value&&s&&fn(n.runtime)&&(n.runtime.dispatchEvent("supportRequested",{}),(o=n.pluginApi.getSupport)==null||o.requestWasHandled(t))});return{cleanup(){var s,o;r(),(s=n.pluginApi.getSupport)==null||s.requestWasHandled(n.extension.app.manifest.apiKey),(o=n.pluginApi.getSupport)==null||o.dontSkipSupportHandler(n.extension.app.manifest.apiKey)},hasCustomSupportHandler(){var s;i.value=!0,(s=n.pluginApi.getSupport)==null||s.skipSupportHandler(t)}}},instanceCreated(e){const{support:n}=e.pluginApi;if(!n)return;const t={async callbackRegistered(){n.hasCustomSupportHandler()}};e.api.exposeGlobal({support:t})},instanceDeactivated(e){var n;(n=e.pluginApi.support)==null||n.cleanup()}})),Yn="navMenuApi",cl="navMenu",Jn=R(e=>({name:Yn,expose(n,t){if(!t)throw new Error("NavMenu must be an instance plugin");const i=y([]);return{items:i,get appHomeUrl(){const a=i.value||[],{url:r}=a.filter(({rel:c})=>c==="home")[0]||{};if(!r)return;const{pathname:s,search:o}=new URL(r,location.href);return e.value.url.app(t.extension.app.handle,`${s}${o}`)},publicApi:{[cl]:{async set(a){i.value=a??[]}}}}},instanceCreated(n){var t;n.api.exposeGlobal(((t=n.pluginApi[Yn])==null?void 0:t.publicApi)??{})}}));function dl(){return{name:"print",expose(){const e=y(void 0);let n;return{setPrintHandler(t){n=t},async print(){await(n==null?void 0:n())},get src(){return e.value},set src(t){e.value=t}}}}}function ul(e){return e instanceof ue}function Ft(e){var n;return(n=e==null?void 0:e.extension.manifest.app.betas)==null?void 0:n.appBridgeFileEditorApi}const pl=R(()=>({name:"fileEditor",expose(e,n){if(!Ft(n))return{};const t=y([]),i=s=>{const o=typeof s=="string"?s:s.id;t.value=t.value.filter(c=>c.id!==o)};return{get activeFileEditor(){return t.value[0]},messageHandler:s=>{var l,u,f;if(!ul(n==null?void 0:n.runtime))return;const o=nn(n.extensionPoint.url);if(!o)return;const c=Je(s)?s.detail:s,d=nn(c.origin);if(!(d&&c.origin!==o.origin&&!d.host.endsWith(`.${o.host}`)||!(c.source&&c.source===((l=n.runtime.frame)==null?void 0:l.contentWindow))||typeof c.data!="object")&&c.data.type==="internal::fileEditor::ready"){const m=new MessageChannel,h=Ne(ft(m.port1));m.port1.start(),h.expose({getFileEditorApi:()=>{var g;return(g=n.pluginApi.fileEditor)==null?void 0:g.rpcApi}}),(f=(u=n.runtime.frame)==null?void 0:u.contentWindow)==null||f.postMessage({type:"internal::fileEditor::init",port:m.port2},c.origin,[m.port2])}},rpcApi:{open:s=>{const{onClose:o,onSaveAsNew:c}=s;P(o),P(c);const d={id:q(),...s,onClose(){o(),pe(o),pe(c),i(d)}};return t.value=t.value.concat(d),d},close:i}}},instanceCreated(e){!Ft(e)||!e.pluginApi.fileEditor||window.addEventListener("message",e.pluginApi.fileEditor.messageHandler,!0)},instanceTerminated(e){!Ft(e)||!e.pluginApi.fileEditor||window.removeEventListener("message",e.pluginApi.fileEditor.messageHandler,!0)}})),ml=5*1024*1024;function Zn(e){const{storage:n}={};return{name:"storage",expose(t,i){if(i==null)throw new Error("Storage plugin cannot be used as a global plugin");const{apiKey:a}=i.extension.app;return n||{setItem:async(r,s)=>{const o=await Qe(a);o[r]=s,ei(a,o)},getItem:async r=>(await Qe(a))[r],clear:async()=>{kr(a)},removeItem:async r=>{const s=await Qe(a);delete s[r],ei(a,s)},getAll:async()=>await Qe(a)}},instanceCreated(t){t.api.expose({storage:t.pluginApi.storage})}}}async function Qe(e){const n=await br(e)??"{}";return JSON.parse(n)}function ei(e,n){if(new Blob([n]).size>ml)throw new Error("Storage limit exceeded");Ar(e,JSON.stringify(n))}const fl=R(e=>({name:"webVitals",expose(n,t){return window.addEventListener("beforeunload",()=>{var i,a;return(a=(i=t==null?void 0:t.pluginApi)==null?void 0:i.webVitalsPlugin)==null?void 0:a.report()}),{wasReported:!1,metrics:[],async report(){const{webVitals:i}=(t==null?void 0:t.pluginApi)||{};if(!t||!i||i.wasReported)return;const{metrics:a,appLoadId:r}=i,s=t.extension.app.manifest.id,o=e.value.shop.shopId,c=e.value.staffMember.userId;if(!s||!o||!c||!r||a.length===0)return;const d={appId:s,shopId:o,userId:c,appLoadId:r,metrics:a,loadId:t.loadId,instanceId:String(t.id)};t.telemetry.increment("webVitals",d),fn(t.runtime)&&await t.runtime.dispatchEvent("webVitalsReport",{appId:s,shopId:o,userId:c,appLoadId:r,metrics:a}),i.wasReported=!0},appLoadId:"",setAppLoadId(i){const{webVitals:a}=(t==null?void 0:t.pluginApi)||{};!t||!a||(a.appLoadId=i)}}},instanceCreated(n){const{webVitals:t}=n.pluginApi;if(!t)return;const i={report(...a){t.wasReported||t.metrics.push(...a)}};n.api.exposeGlobal({webVitals:i})},async instanceDeactivated(n){var t;(t=n.pluginApi.webVitals)==null||t.report()}})),hl={heading:"",items:[]},gl=R(()=>({name:"picker",expose(){const e=y([]);function n(i){const a=typeof i=="string"?i:i.id;e.value=e.value.filter(r=>r.id!==a)}function t(i){const a={id:q(),...hl,...i,onSelect(r){var s;(s=i.onSelect)==null||s.call(i,r),n(a)},onCancel(){var r;(r=i.onCancel)==null||r.call(i),n(a)}};return e.value=e.value.concat(a),a}return{get activePicker(){return e.value[0]},open:t,close:n}}}));function vl(e){var i;const n=!!((i=e.heading)!=null&&i.trim()),t=!!e.items[0]&&!!e.items[0].heading&&e.items[0].heading.trim().length>0;return n&&t}const Se=R(e=>({name:"pickerApi",expose(n,t){if(!t)throw new Error("The pickerApi plugin should not be used as a global plugin.");return{publicApi:{async picker(i){var r,s;if(!n.pluginApi.picker)throw new Error("The global genericPickerPlugin is not available. Make sure to register it before using the picker API.");const a=Mi();return vl(i)?((r=n.pluginApi.picker)==null||r.open({...i,onSelect:o=>{t.telemetry.increment("picker.confirmed",{context:`selectedItemsCount:${o.length}`}),a.resolve(o)},onCancel:()=>{t.telemetry.increment("picker.cancelled"),a.resolve(void 0)},transparentBackdrop:!!(e!=null&&e.transparentBackdrop)}),t.telemetry.increment("picker.opened",{context:`heading:${i.heading},multiple:${i.multiple},itemsCount:${i.items.length},headersCount:${(s=i.headers)==null?void 0:s.length}`})):(t.telemetry.increment("picker.invalid",{context:`heading:${i.heading},itemsCount:${i.items.length}`}),a.reject(new Error("Invalid Picker options. Heading and items are required."))),Promise.resolve({selected:await a.promise})}}}},instanceCreated(n){n.pluginApi.pickerApi&&(n.api.expose(n.pluginApi.pickerApi.publicApi),n.api.exposeGlobal({picker:n.pluginApi.pickerApi.publicApi.picker}))}})),ti="internalExperiments",yl=R(e=>{const n=y(e);try{const t=Zi(ti,{});Object.entries(t).forEach(([i,a])=>{n.value[i]=!!a})}catch{}return Ee(()=>ea(ti,n.value)),{name:"internalExperiments",expose(){return{get experiments(){return n.value},isEnabled:t=>n.peek()[t]===!0,isDisabled:t=>!n.peek()[t],toggle:t=>{n.value={...n.peek(),[t]:!n.peek()[t]}}}}}});class on extends W{constructor(){super(...arguments);k(this,"_output",y(null));k(this,"endpoint",ze("https://extensions.shopifycdn.com/shopifycloud/v0/admin-data-extensions/index.js",{name:`${je(this)}-data`}));k(this,"sandbox",this.endpoint.call)}async create(){await this.sandbox.sandbox(this.instance.api.getGlobal()),await this.start()}async reload(){await this.start()}async start(){const{api:t,extensionPoint:i}=this.instance,a=i.target;t.expose({extension:{target:a}}),this.instance.extension.manifest.loader=y({}),await this.sandbox.load(i.manifest.url),this._output.value=await this.sandbox.run(a,t.get())}get output(){return this._output.value??null}}k(on,"type","data-extension");function kl(){return{name:"shouldRender",addExtension(e,n){const t=e.extensionPoints.filter(r=>{var s;return(s=r.shouldRender)==null?void 0:s.scriptUrl});if(t.length===0)return{manifest:e,attributes:n};const i=t.map(r=>({...r,type:za,url:r.shouldRender.scriptUrl,id:r.id.replace(/\.render/,".should-render"),target:r.target.replace(/\.render$/,".should-render")}));return{manifest:{...e,extensionPoints:[...e.extensionPoints,...i]},attributes:n}}}}const bl=O.z.enum(["param","form_data"]),Al=O.z.object({type:O.z.string(),fieldName:O.z.string().optional(),mapTo:bl.optional(),required:O.z.boolean().optional()}),wl=O.z.object({type:O.z.string().optional(),many:O.z.boolean().optional()}),El=O.z.object({action:O.z.string(),type:O.z.string().startsWith("shopify/"),schema:O.z.object({input:O.z.record(Al),output:O.z.record(wl)})}),Nl=O.z.object({data:O.z.object({id:O.z.string().or(O.z.number())})}),xl=R(e=>({name:"adminIntentRegistration",hostCreated(n){const t=e.value.router.getAllRoutes().reduce((i,a)=>{const{intent:r}=a.handle;if(r){const{success:s,data:o,error:c}=El.safeParse(r);s&&i.push({id:a.id??q(),type:gt,target:mi,url:`${ta()}${$i(a)}`,intent:o})}return i},[]);t.length>0&&n.addExtension({...ja,extensionPoints:t})}}));function $i(e){var n;return(n=e.handle)!=null&&n.parentRoute?`${$i(e.handle.parentRoute)}/${e.path}`:`/${e.path}`}const Il=R(()=>({name:"adminIntentLookup",matchExtensionPoint(e,n){const{intent:t}=n,{intent:i}=e.manifest;if(t)return!(i==null||t.action!==i.action||t.type!==i.type)},expose(){return{}}}));function _l(e){return`${e.action}:${e.type},${e.value}`}class Sl{constructor(n,t){k(this,"url");try{const i=new URL(typeof n=="string"?n:_l(n));for(const[a,r]of Object.entries(t||{}))i.searchParams.append(a,r);this.url=i}catch{throw new TypeError("Failed to construct 'IntentURL': Invalid URL")}this.validate()}get action(){var n;return((n=this.url.protocol)==null?void 0:n.replace(":",""))||""}get type(){return this.url.pathname.split(",")[0]}get value(){const n=this.url.pathname.match(/,([^?]+)/);return n?n[1]:void 0}get data(){const n=Object.fromEntries(this.url.searchParams.entries());return Object.keys(n).length===0?void 0:n}toJSON(){return{action:this.action,type:this.type,value:this.value,data:this.data}}validate(){if(!this.action)throw new TypeError("Invalid intent URL: Missing action");if(!this.type)throw new TypeError("Invalid intent URL: Missing type")}}function Pl(){let e,n;return{promise:new Promise((i,a)=>{e=i,n=a}),resolve:e,reject:n}}const Rl=R(e=>({name:"intents",expose(n,t){return{async invoke(i,a){if(!n.pluginApi.adminIntentLookup)throw new Error("The global adminIntentLookupPlugin is not available. Make sure to register it before using the intents API.");if(!e.value.betaFlags.get(na))throw new Error("The intents feature is not enabled. Make sure to enable the admin_intents flag.");let r;try{r=new Sl(i,a)}catch(c){return console.error("Error normalizing intent",c),{ok:!1,error:c}}let s;const o=Pl();try{return s=await n.invoke({context:{resourceId:r.value,intent:{...o,request:r.toJSON()}},data:{},search:{intent:r.toJSON()}}),await o.promise.then(c=>({ok:!0,data:c}),c=>({ok:!1,error:c})).finally(()=>s==null?void 0:s.terminate())}catch(c){return console.error("Error invoking intent",c),s==null||s.terminate(),o.reject({ok:!1,error:c})}}}},resolveLaunchable(n){}})),Ct=R(()=>({name:"intentsApi",expose(e,n){if(!n)throw new Error("The intentsApi plugin should not be used as a global plugin.");return{publicApi:{async invoke(t,i){if(!e.pluginApi.intents)throw new Error("The global intentsPlugin is not available. Make sure to register it before using the intents API.");return e.pluginApi.intents.invoke(t,i)}}}},instanceCreated(e){var n;(n=e.pluginApi.internalExperiments)!=null&&n.isEnabled("admin-intents")&&(e.api.expose(e.pluginApi.intentsApi.publicApi),e.api.exposeGlobal({intents:e.pluginApi.intentsApi.publicApi}))}})),Tl=R(()=>({name:"intentsInternalState",expose(e,n){let t;return{dirty:y(!1),registerDiscardCallback(i){return t=i,()=>{t=void 0}},resolve(){t==null||t(),n==null||n.terminate()}}}}));function Ll(e){return{name:"adminContext",expose(){return e.value}}}class Vi extends W{async create(){const{instance:n}=this,{mobileBridge:t}=n.pluginApi.mobileBridge||{};if(!t)throw new Error("Mobile bridge is not available");const i=new URL(n.extensionPoint.url,location.origin).toString(),{extensibility:{navigation:a}}=t;await a.isRoutableToNative(i)?(await a.routeToNative(i,"present"),n.terminate()):await a.navigate("Modal",{screen:"ExtensibilityWebView",params:{loading:{},titleBar:{title:"Intents",backAction:{icon:"XIcon",iosPrefersText:!1}},onClose(){n.terminate()},onInit(r){P(r),r.loading.set(null),r.adminWebView.load(i)}}})}}k(Vi,"type",gt);function Fl(e){var f,m,h;const n=e.router;if(!((h=(m=(f=n.routes[0])==null?void 0:f.children)==null?void 0:m[0])!=null&&h.children))throw new Error("Unable to find innerRoutes in parentRouter.");const t=n.routes[0].children[0].children,i=e.url.rootPath,a=[{path:"/___INIT___",element:null},{path:i.split("/")[1]==="admin"?"/admin":"/store/:storeHandle",children:t}],r=ia({initialIndex:0,initialEntries:[{pathname:"/___INIT___"}]}),s=Object.create(e,{...Object.getOwnPropertyDescriptors(e),router:{enumerable:!0,get:()=>c}}),o=Ka(s),c=aa({routes:a,mapRouteProperties:Cl,history:r,future:{v7_prependBasename:!0},async dataStrategy(g){var b;const v=await o(g);return(b=c.interceptAction)==null||b.call(c,g,v),v}});Object.defineProperties(c,Object.getOwnPropertyDescriptors({history:r,get activeFetcher(){return console.warn("activeFetcher accessed on child router"),n.activeFetcher},get prefetchState(){return console.warn("prefetchState accessed on child router"),n.prefetchState},get loaderState(){return console.warn("loaderState accessed on child router"),n.loaderState},get navigationId(){return console.warn("navigationId accessed on child router"),n.navigationId},get pageViewToken(){return console.warn("pageViewToken accessed on child router"),n.pageViewToken},get previousRoute(){return console.warn("previousRoute accessed on child router"),n.previousRoute},getAllRoutes(){return n.getAllRoutes()},callLoader(g){return n.callLoader(g)},toRoute(g,v){return n.toRoute(g,v)},matchRoutes(g){return n.matchRoutes(g)},markLoaderTiming(g,v){return n.markLoaderTiming(g,v)},getLoaderTimings(){return n.getLoaderTimings()},getRouteId(g){return n.getRouteId(g)},getRouteInfo(g){return n.getRouteInfo(g)},get currentBreadcrumbs(){return n.currentBreadcrumbs},getTitle(g){return n.getTitle(g)},nextMostLikelyRoutes(){return[]},getRoute(g){return n.getRoute(g)},prefetchLoader(g){return n.prefetchLoader(g)},getDynamicTitle(g){return console.warn("getDynamicTitle called on child router"),n.getDynamicTitle(g)}}));let p=!1;const l=({navigation:{state:g}})=>{const v=g!=="idle";v!==p&&(p=v,e.loading[p?"start":"stop"]())};l(c.state),c.subscribe(l);const u=c.navigate;return c.navigate=async(g,v)=>{if(g==null||typeof g=="number")return u.call(c,g,v);const b=ra(g,c.state.location.pathname);if(c.interceptNavigation){const w=await c.interceptNavigation(b,v);if(w===!1)return;if(w&&typeof w=="object")return u.call(c,w.location??g,w.options??v)}return u.call(c,g,v)},c}function Cl(e){const n={hasErrorBoundary:"ErrorBoundary"in e||"errorElement"in e};return"ErrorBoundary"in e&&e.ErrorBoundary&&(n.errorElement=E.createElement(e.ErrorBoundary,{}),n.ErrorBoundary=void 0),"Component"in e&&e.Component&&(n.element=E.createElement(e.Component,{}),n.Component=void 0),n}function Ml({router:e,instance:n}){var t=D(1);try{var i=D(1);try{return["active","inactive"].includes(n.status)?F.jsx(Ol,{router:e}):null}finally{i.f()}}finally{t.f()}}function Ol({router:e}){var n=D(1);try{return F.jsx(sa.Provider,{value:null,children:F.jsx(oa.Provider,{value:null,children:F.jsx(la.Provider,{value:null,children:F.jsx(ca.Provider,{value:null,children:F.jsx(da.Provider,{value:{outlet:null,matches:[],isDataRoute:!1},children:F.jsx(ua,{router:e})})})})})})}finally{n.f()}}var Ae,De,Be,de,$e,Z,zi,ji,ln;class Hi extends W{constructor(t){super(t);C(this,Z);k(this,"router");k(this,"host",this.instance.extensionPoint.host);k(this,"context",this.host.pluginApi.adminContext);C(this,Ae,y(""));C(this,De,y(""));C(this,Be,y(""));C(this,de);C(this,$e,y(E.createElement(E.Fragment,null)));if(!t.extensionPoint.manifest.intent)throw new Error("Intent is required but none was defined in the extension point manifest");this.router=Fl(this.context),this.router.interceptAction=xe(this,Z,zi).bind(this),this.router.interceptNavigation=xe(this,Z,ji).bind(this)}get url(){return N(this,Ae).value}get title(){return N(this,De).value}get breadcrumbs(){return this.router.currentBreadcrumbs}get outlet(){return N(this,$e)}async initialize({context:t}){N(this,$e).value=E.createElement(Ml,{router:this.router,instance:this.instance});const{router:i}=this;N(this,Be).value=t==null?void 0:t.resourceId,i.subscribe(r=>{var s,o;if(r.navigation.state==="idle"){const c=r.location.pathname+r.location.search;c!==N(this,Ae).value&&(N(this,Ae).value=c,N(this,De).value=i.getTitle(((o=(s=r.matches.at(-1))==null?void 0:s.route)==null?void 0:o.id)||""))}});const a=i.getRoute("settings-modal");a&&(a.lazy=void 0,a.Component=void 0,a.element=void 0)}async create(){var o,c,d,p;const{router:t,instance:i}=this,r=(((o=i.launchOptions.data)==null?void 0:o.url)||((p=(d=(c=i.extensionPoint.manifest.intent)==null?void 0:c.schema)==null?void 0:d.input)==null?void 0:p.url)||i.extensionPoint.url).replace(/\/:[^/]+/g,`/${N(this,Be).value}`),s=new URL(r,"https://host");await t.navigate({hash:s.hash,pathname:s.pathname,search:s.search},{replace:!0})}}Ae=new WeakMap,De=new WeakMap,Be=new WeakMap,de=new WeakMap,$e=new WeakMap,Z=new WeakSet,zi=function({request:t},i){if(t.method!=="GET"&&this.instance.extensionPoint.id in i){const a=N(this,de)??"",{intent:r}=this.instance.launchOptions.context,s=i[this.instance.extensionPoint.id];if(s.type==="error")if(a&&s.result instanceof Response&&s.result.status>299&&s.result.status<400){const o=s.result.headers.get("Location")||"",c=xe(this,Z,ln).call(this,o,a);`${Number(c)}`===c&&r.resolve({id:`gid://${r.request.type}/${c}`})}else r.reject(s.result);else{const{success:o,data:c}=Nl.safeParse(s.result);o&&r.resolve({id:`gid://${r.request.type}/${c.data.id}`})}}return!1},ji=function(t){if(N(this,de)==null)return V(this,de,t.pathname),!0;const i=N(this,de),a=t.pathname,r=xe(this,Z,ln).call(this,a,i),{intent:s}=this.instance.launchOptions.context;return`${Number(r)}`===r&&s.resolve({id:`gid://${s.request.type}/${r}`}),!1},ln=function(t,i){if(t=new URL(t,"https://host").pathname??t,i=new URL(i,"https://host").pathname??i,t.match(/\/\d+$/)){const a=t.replace(/^\/(store\/[^/]+|admin)\/?/,"").split("/"),r=i.replace(/^\/(store\/[^/]+|admin)\/?/,"").split("/");for(const s of r)a[0]===s&&a.shift();return a.shift()}},k(Hi,"type",gt);class Ki extends W{constructor(n){var t;return super(n),(t=n.extensionPoint.host.pluginApi.mobileBridge)!=null&&t.isAvailable?new Vi(n):new Hi(n)}}k(Ki,"type",gt);const Ul=R(e=>{const n=y(!1),t=y(null);return{name:"grantAppPlugin",expose(i){return{get waitingOnMobileGrant(){return n.value},get mostRecentGrantRequestId(){return t.value},launchMobileGrant:({clientId:a,appId:r,referrer:s,scopes:o,action:c,flow:d,onGrantApprove:p,onGrantCancel:l,onGrantError:u,grantRequestId:f=null})=>{var M;if(n.value)return;const{url:m}=e.value;let h=null,g=!1;const v=(M=i.pluginApi.mobileBridge)==null?void 0:M.mobileBridge;t.value=f??q();const b=oi(t.value,S=>{g||h==null||h.injectJavaScript(`(function() {
                window.postMessage(${JSON.stringify(S)}, location.origin);
              })()`)}),w=Ne(b),A=()=>{g||(g=!0,b.terminate(),n.value=!1)},x=(S,$=!0)=>{P(v),$&&(v==null||v.extensibility.navigation.goBack()),l==null||l(S),A()};w.expose({onGrantApprove:S=>{P(v),v==null||v.extensibility.navigation.goBack(),p==null||p(S),A()},onGrantCancel:x,onGrantError:S=>{u==null||u(S),v==null||v.extensibility.navigation.goBack(),A()}}),n.value=!0;const I=Fa()({clientId:a,appId:r,referrer:s??qa.Admin,flow:d,action:c,scopes:o}),L=m.makeAbsolute(m.appGrant({action:I,grantAppChannelId:t.value}));v==null||v.extensibility.navigation.navigate("Modal",{screen:"GrantApp",params:{onClose(){P(v),!g&&x({uuid:null,errors:[]},!1)},installUrl:L,onInit:S=>{P(S),h=S}}})}}}}}),Dl={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FlowAppUserPermissions"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"app"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"StringValue",value:"gid://shopify/App/1602671",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"installed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"staffMember"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"permissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"appPermissions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userPermissions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:170,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"5f48bc61747564f6ebdbf73b84b50399ecd7d7199ada111c9b65bd5c05904823"},Bl={loading:!1,hasAppAccessPermission:!1,hasFlowAccessPermission:!1,isFlowAppInstalled:!1,hasNoAppPermissions:!1},$l=R(e=>({name:"flowAccess",expose(n,t){if(t==null)return Bl;const i=y(!0),a=y(null),r=y(!1),s=y(!1),o=y(!1),c=y(!1),d=e.value.apolloClient.query({query:Dl,fetchPolicy:"network-only"}).then(({data:p})=>{const{app:l,staffMember:u}=p,{appPermissions:f,userPermissions:m}=(u==null?void 0:u.permissions)??{};o.value=(l==null?void 0:l.installed)??!1;const h=m==null?void 0:m.includes(pa.Applications);r.value=!!h;const g=f==null?void 0:f.includes(wr);s.value=!!g,c.value=!h&&(f==null?void 0:f.length)===0}).catch(p=>{a.value=p}).finally(()=>{i.value=!1});return{loading:i,hasAppAccessPermission:r,hasFlowAccessPermission:s,hasNoAppPermissions:c,isFlowAppInstalled:o,ready:d,error:a}},async instanceCreated(n){var t;await((t=n.pluginApi.flowAccess)==null?void 0:t.ready)},outlet({outlet:n,instance:t}){var i,a,r,s;return(i=t.pluginApi.flowAccess)!=null&&i.loading.value||!((a=t.pluginApi.flowAccess)!=null&&a.isFlowAppInstalled.value)||!((r=t.pluginApi.flowAccess)!=null&&r.hasAppAccessPermission.value)&&!((s=t.pluginApi.flowAccess)!=null&&s.hasFlowAccessPermission.value)?null:n}})),Vl=E.createContext(null);function Hl({children:e,instance:n}){var t=D(1);try{var i=D(1);try{return F.jsx(Vl.Provider,{value:{instance:n},children:e})}finally{i.f()}}finally{t.f()}}var we,Ve;class cn extends W{constructor(){super(...arguments);C(this,we);C(this,Ve,y(null))}get outlet(){return N(this,Ve)}async initialize(){var i;const t=this.instance.extensionPoint.manifest.import;if(t==null)throw new Error("Invalid module extension point definition. Missing import property");V(this,we,t()),(i=this.instance.launchOptions.context)!=null&&i.api&&this.instance.api.expose(this.instance.launchOptions.context.api),this.instance.api.expose({extension:{target:this.instance.extensionPoint.target}})}async create(){if(!N(this,we))throw new Error("Invalid module extension point definition. Missing import property");N(this,Ve).value=E.createElement(mn,{instance:this.instance,key:this.instance.extensionPoint.target+this.instance.id},E.createElement(Hl,{instance:this.instance},E.createElement(me({load:()=>N(this,we),displayName:"ModuleExtension"}))))}}we=new WeakMap,Ve=new WeakMap,k(cn,"type",Ca);const zl=R(()=>{let e=!1;return{name:"searchForModuleExtensions",async search(){if(e)return[];e=!0;const{default:n}=await T(async()=>{const{default:t}=await import("./domains-extensions-BO_1nMoeOHwg.js");return{default:t}},__vite__mapDeps([317,3,12,2]));return n}}}),jl="trustChallenge",ni=R(e=>({name:jl,expose(){return{internalApi:{isChallengeUrl:kn,startChallenge:async n=>{const{trustChallenge:t}=e.peek();if(!t)throw new Error("Trust challenge not found");if(!kn(n))throw new Error("Invalid challenge URL");return t.startChallenge(n)}}}},instanceCreated(n){var t;n.extension.app.manifest.shopifyDeveloped&&n.api.exposeGlobal({trustChallenge:(t=n.pluginApi.trustChallenge)==null?void 0:t.internalApi})}}));function Kl(){const e=new Set;function n(t,i,a){if(i.preload)try{i.preload(t,{target:a})}catch(r){setTimeout(()=>{throw r},0)}}return{name:"preload",search(t){var a;const{host:i}=this;for(const{target:r,type:s,preload:o}of t)if(!(!r||!o)){for(const c of i.options.extensionPoints)if(!(!c.runtimes||!((a=c.targets)!=null&&a.includes(r))))for(const d of c.runtimes){if(s&&d.type!==s)continue;const p=`${d.type}
${r}`;e.has(p)||(e.add(p),n(i,d,r))}}return[]}}}function ql(e){const{isShopifyEmployee:n,shop:t,betaFlags:i}=e.value;if(!t.shopId||!t.shopDomain)return new $t;const a=vs(e),r=hs(e),s=ns(e),o=ls(e),c=[Jo(),Os(e),Ga(e),Qo(e),Ps(),Ts(),Ls(),Ss(),Kn(),us(),Sa(e),Ro(),Ma(e),uo(),gl(),js(e),kl(),xl(e),Il(),Rl(e),Ul(e),Ll(e),zl()];i.get(ai)&&c.push(Kl());const d=[a,qe(),r,s,Ie(e),Zn(),Se(),Ct()],p=[Mt(),qe(),a,r,It(),Fs(),s,Zn(),Ie(e,{transparentBackdrop:!0}),Se({transparentBackdrop:!0}),Ct()],l=[];(n||t.isPartnerDevelopment)&&(c.unshift(Pa()),l.push(Ta)),(n||t.isStaffShop)&&(c.unshift(yl({"remote-ui-shim":!1,"admin-intents":!1})),c.unshift(Zo()));const u=i.get(ma),f=new $t({context:e.peek(),extensionPoints:[...l,{targets:["Playground"],runtimes:[U,Fi]},{targets:[mi],runtimes:[Ki],plugins:[Tl()]},{targets:["admin.temporary.render"],runtimes:[Bi,cn],plugins:[al(),sl(),ol(),Ie(e),Se()]},{targets:["Admin::Apps::Home"],runtimes:[Ci],plugins:[Mt(),a,r,Lt(e)]},{targets:[Ra],runtimes:[Oi],plugins:[Mn(e),ni(e),r]},{targets:[Re],runtimes:[ue],plugins:(()=>{const m=[r,ni(e),Tn(),Wn(),s,o,Tt(e),Dn(),Qn(),Jn(e),pl(),sn(),Mn(e),fl(e),Se(),Lt(e),Ct()];return u&&m.push($s({experimentalKeepAlive:!0,inactivityTimeout:1e3*60*5,maxInstances:6})),m})()},{targets:[Dt],runtimes:[ue],plugins:[r,Tn(),sn(),Wn(),s,o,Tt(e),Dn(),Qn(),Jn(e),Se(),Lt(e)]},{targets:[Bt],runtimes:[ue],plugins:[r,$l(e),s,o,Tt(e)]},{targets:["admin.product-details.configuration.render","admin.product-variant-details.configuration.render"],runtimes:[U],plugins:[...d.filter(m=>m.name!=="appChrome"),Mt()]},{targets:["Admin::Product::SubscriptionPlan::Add","Admin::Product::SubscriptionPlan::Create","Admin::Product::SubscriptionPlan::Remove","Admin::Product::SubscriptionPlan::Edit"],runtimes:[U]},{targets:Wa.map(({target:m})=>m),runtimes:[on],plugins:[a,r,s]},{targets:[...ci.map(({target:m})=>m),"admin.abandoned-checkout.item.action","admin.discount.item.action","admin.discount.index.action","admin.customer.index.action","admin.customer.item.action","admin.customer.selection.action","admin.order.index.action","admin.order.item.action","admin.order.selection.action","admin.draft-order.index.action","admin.draft-order.selection.action","admin.draft-order.item.action","admin.product.index.action","admin.product.selection.action","admin.product.item.action","admin.variant.item.action","admin.collection.index.action","admin.collection.item.action"],runtimes:[U,An],plugins:p},{targets:Xa.map(({target:m})=>m),runtimes:[U],plugins:d},{targets:di.map(({target:m})=>m),runtimes:[U],plugins:[...p,dl()]},{targets:Qa.map(({target:m})=>m),runtimes:[on],plugins:[a,r,s]},{targets:Ya.map(({target:m})=>m),runtimes:[U],plugins:[r,a,qe(),he()]},{targets:[Ja.target],runtimes:[U],plugins:[a,qe(),r]},{targets:[Za.target],runtimes:[cn],plugins:d},{targets:["admin.order.fulfilled_card.action",pi.target],runtimes:[An]},{targets:["admin.customers.segmentation-templates.render"],runtimes:[U],plugins:[Et({loader:m=>{if(!(m!=null&&m.components)){console.warn("No components found in context. Using default components.");return}return m==null?void 0:m.components}})]},{targets:[er.target],runtimes:[U],plugins:[It(),a,r,he(),Et({loader:async(m,h)=>{const[g,v]=await Promise.all([h(),T(()=>import("./domains-extensibility-order-routing-LocationList-FiwFRSK6apuA.js"),__vite__mapDeps([318,2,3,4,5,6,7,319,320]))]);return{...g,...v}}})]},{targets:[tr.target],runtimes:[U],plugins:[It(),a,r,he()]},{targets:nr.map(({target:m})=>m),runtimes:[U],plugins:[a,r,Ie(e),he()]},{targets:ir.map(({target:m})=>m),runtimes:[U],plugins:[a,r,Ie(e),he(),Et({loader:async(m,h)=>{const[g,v]=await Promise.all([h(),T(()=>import("./domains-extensibility-order-routing-InlineResourcePicker-BzTRJazcV-UB.js"),__vite__mapDeps([321,2,3,287,4,5,6,7,288,322,12,323,324,325]))]);return{...g,...v}}})]},{targets:[ar.target],runtimes:[U],plugins:[...d,he(),Kn()]}],plugins:c,telemetry:{flushInterval:n?1:2e3}});return xo(f,e),n&&typeof window<"u"&&(window.host=f),f}function Mt(){return{name:"single-activate",instanceActivated(e){const n=this.host.findAll({target:e.extensionPoint.target});for(const t of n){const i=t.activeInstance;i&&i!==e&&i.deactivate()}}}}const sc=Object.freeze(Object.defineProperty({__proto__:null,createExtensibilityHost:ql},Symbol.toStringTag,{value:"Module"}));export{el as C,rn as D,ue as E,ws as F,Bo as c,an as d,sc as h,Do as s,Er as u};
//# sourceMappingURL=https://web-sourcemaps.shopify.io/v1/en/host-CckGvtti--7T.js.map
