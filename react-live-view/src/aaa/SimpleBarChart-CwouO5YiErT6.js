import{b6 as U}from"./common-BQgXWrz2O5Bt.js";import{a as X}from"./react-spring-web.esm-BOY3iVmaUFuM.js";import{a as q,g as K}from"./estimateStringWidthWithOffset-BtLey8F0hhhu.js";import{b as Y,c as Z,C as H,d as J,e as Q,f as ee}from"./getAxisOptions-ZBfQL9C9uyF_.js";import{N as te,e as ie,F as se}from"./TrendIndicator-ForsXhGLj1mL.js";import{H as z,C as ne,d as oe,e as re}from"./PolarisVizContext-DMg2GlMLMFOp.js";import{X as o}from"./router-D2A3v33YTGz9.js";import{u as ae,a as le,b as ce,c as me,d as ue,e as de,f as ge,G as he,H as xe}from"./HorizontalGroup-DLTyJ-8-GaQs.js";import{u as fe}from"./useUniqueId-DgOphXTvxuqE.js";import{u as pe,C as ve,b as Ce}from"./ChartContainer-XfUOX9D3-me7.js";function Se(e,a){const i=e.reduce((s,l)=>{var c;const{data:g,metadata:m}=l,h=(c=m==null?void 0:m.trends)!==null&&c!==void 0?c:{},x=Object.entries(h);for(const[u,n]of x){const t=g[u];if(n==null||(t==null?void 0:t.value)==null)return s;const r=n.value==null?te:ie(n.value,a,se).totalWidth;t.value>0?r>s.positive&&(s.positive=r):t.value<0&&r>s.negative&&(s.negative=r)}return s},{positive:0,negative:0});return i.positive>0&&(i.positive+=z),i.negative>0&&(i.negative+=z),i}const De={top:{flexDirection:"column-reverse",alignItems:"center"},bottom:{flexDirection:"column",alignItems:"center"},right:{flexDirection:"row",alignItems:"center"},left:{flexDirection:"row-reverse",alignItems:"center"},"top-left":{flexDirection:"row-reverse",alignItems:"start"},"top-right":{flexDirection:"row",alignItems:"start"},"bottom-right":{flexDirection:"row",alignItems:"end"},"bottom-left":{flexDirection:"row-reverse",alignItems:"end"},"top-left-column":{flexDirection:"column-reverse",alignItems:"start"},"top-right-column":{flexDirection:"column-reverse",alignItems:"end"},"bottom-right-column":{flexDirection:"column",alignItems:"end"},"bottom-left-column":{flexDirection:"column",alignItems:"start"}};function be(e,a=!1){const i=e.includes("-"),s=a&&i?`${e}-column`:e;return De[s]}function Ae({data:e,renderLegendContent:a,legendPosition:i="bottom-right",seriesNameFormatter:s,showLegend:l,type:c,xAxisOptions:g,yAxisOptions:m}){const{isTouchDevice:h}=q();Y({enabled:e.length>1&&!h});const x=K(),u=U.useMemo(()=>fe("SimpleBarChart"),[]),{labelFormatter:n}=g,t=c==="stacked",{longestSeriesCount:r,seriesColors:f}=ae(e),{legend:v,setLegendDimensions:C,height:p,width:d}=Z({data:[{shape:"Bar",series:e}],colors:f,showLegend:l,seriesNameFormatter:s}),{allNumbers:_,longestLabel:L,areAllNegative:k}=le({data:e,isSimple:!0,isStacked:t,labelFormatter:n}),{stackedValues:E,stackedMin:T,stackedMax:j}=ce({isStacked:t,data:e}),S=Se(e,x),F=S.positive+S.negative,{xScale:I}=me({allNumbers:_,isStacked:t,labelFormatter:n,maxWidth:d-F,stackedMax:j,stackedMin:T,longestLabel:L}),{barHeight:B,groupHeight:O}=ue({chartDimensions:{width:d,height:p},isSimple:!0,isStacked:t,seriesLength:r,singleBarCount:e.length,xAxisHeight:0}),{transitions:N}=de({series:e,groupHeight:O,chartXPosition:0}),W=I(0)+L.negative+S.negative,w=ge(e,{xAxisLabelFormatter:n}),$=be(i,!0);return o.jsxs(H.Div,{style:$,width:"auto",height:"auto",children:[o.jsxs(H.Svg,{height:p,width:d,children:[o.jsx(he,{direction:"horizontal",gradientUnits:t?"objectBoundingBox":"userSpaceOnUse",id:u,seriesColors:f,size:t?"100%":`${d}px`}),N((P,D,Le,V)=>{var b,A;const{opacity:R,transform:G}=P,y=(b=D.key)!==null&&b!==void 0?b:"",M=w({seriesIndex:D.index,key:(A=e[0].data[D.index])===null||A===void 0?void 0:A.key});return o.jsx(X.g,{style:{opacity:R,transform:G},children:o.jsx(xe,{areAllNegative:k,ariaLabel:M,barHeight:B,containerWidth:d,data:e,groupHeight:O,id:u,index:V,isSimple:!0,isStacked:t,name:y,stackedValues:E,xAxisOptions:g,xScale:I,yAxisOptions:m,zeroPosition:W})},`group-${y}`)})]}),l&&o.jsx(J,{colorVisionType:ne,data:v,onDimensionChange:C,renderLegendContent:a,position:i})]})}function Fe(e){const{defaultTheme:a}=pe(),{id:i,isAnimated:s,data:l,renderLegendContent:c,legendPosition:g="bottom-right",onError:m,seriesNameFormatter:h=d=>`${d}`,showLegend:x=!0,theme:u=a,type:n="default",xAxisOptions:t,yAxisOptions:r,state:f,errorText:v}={...oe,...e},C=Q(t),p=ee(r);return o.jsx(ve,{data:l,theme:u,id:i,isAnimated:s,onError:m,skeletonType:"SimpleBar",children:f!==re.Success?o.jsx(Ce,{type:"SimpleBar",state:f,errorText:v,theme:u}):o.jsx(Ae,{data:l,renderLegendContent:c,seriesNameFormatter:h,legendPosition:g,showLegend:x,type:n,xAxisOptions:C,yAxisOptions:p})})}export{Fe as S,be as g};
//# sourceMappingURL=https://web-sourcemaps.shopify.io/v1/en/SimpleBarChart-CwouO5YiErT6.js.map
