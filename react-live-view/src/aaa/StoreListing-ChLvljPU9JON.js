var Ht=Object.defineProperty;var Wt=(t,e,a)=>e in t?Ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var k=(t,e,a)=>Wt(t,typeof e!="symbol"?e+"":e,a);import{cX as qt,a2 as bt,W as p,X as s}from"./router-D2A3v33YTGz9.js";import{b6 as S,cc as Gt,g3 as Vt,ev as J,aX as Qt,D as Jt,S as Xt,bc as A,t as Zt,c7 as Yt,b5 as G,cN as Kt,dd as te,a4 as ee,pU as ae,cF as ne,cK as se,qM as _t,dy as oe,gW as ie,f5 as re}from"./common-BQgXWrz2O5Bt.js";import{s as At,bJ as tt,dT as xt,p as X,e as mt,T as B,A as ce,b$ as le,cO as ue,v as at,o as Ct,E as de,B as he,av as pe,g as me,an as ct,fc as fe,a0 as Lt,eS as Se,Q as ge,Z as ye,ac as ve,dZ as be,au as _e,u as Ae,jf as xe}from"./render-common-CBDTO_er9s96.js";import{G as kt,D as r,a as Ce,A as m,F as P}from"./StoreList-DlpxgUjtuhIH.js";import{g as Le}from"./get-legacy-store-handle-BXlB6R6Uehq2.js";import{q as ke}from"./loaders-common-ci6pdX46YgGm.js";import{u as lt,P as Ne,L as je}from"./hook-CnF1qCi-ticY.js";import{G as we}from"./GradientBackground-I-92hblWDeDK.js";import{s as Te}from"./shopify-logo-4-BqCg8FgtLSAX.js";import"./configure-CpJr0euRRGki.js";import{u as Ie}from"./MediaQueryProvider-C0aJhQk_89jM.js";import"./context-slice-graphql-B0DOwuSsR7A9.js";import"./context-slice-metrics-dyxi7iJePk2a.js";import"./PolarisProvider-DWVClW5DJF-3.js";import"./UrlProvider-D_K5OB8EvhfS.js";import"./context-C0sJ-FDa3AdH.js";import"./FeaturesProvider-B8znbGAyvWRg.js";const V=()=>S.useContext(kt.userInfo.Context),De=()=>S.useContext(kt.destinationsFetchStatus.Context);var w=function(t){return t.CreateStoreClick="merchant_space_stores_web_create_store/2.1",t.CreateStoreConfirm="merchant_space_stores_web_create_store_confirm/2.1",t.LinkClick="merchant_space_stores_web_click/2.1",t.StoreClick="merchant_space_stores_web_click_store/5.0",t.StoresLoad="merchant_space_stores_web_storesload/1.0",t.StoreStatusTabSelected="merchant_space_stores_web_tab_change/1.0",t.FilterValueChange="merchant_space_stores_web_filter_change/1.1",t.StoreListPaginationClick="merchant_space_stores_web_pagination_click/2.0",t.AccountSettingsAdminLinkClick="account_settings_admin_link_click/2.0",t}({});const T=Gt.createHttpProducer({production:!0}),ze={createStore(t){T.produce({schemaId:w.CreateStoreClick,payload:{...t?{identityUuid:t}:{}}})},createStoreConfirm(t,e){T.produce({schemaId:w.CreateStoreConfirm,payload:{...e?{identityUuid:e}:{},shopName:t}})},clickStore(t,e,a,n,o){return T.produce({schemaId:w.StoreClick,payload:{...o?{identityUuid:o}:{},...n,selectedShopId:t,selectedShopStatus:a,position:e}})},linkClick(t,e){T.produce({schemaId:w.LinkClick,payload:{...e?{identityUuid:e}:{},target:t}})},storeStatusTabSelected(t,e,a){T.produce({schemaId:w.StoreStatusTabSelected,payload:{...a?{identityUuid:a}:{},...e,selectedTab:t}})},filterValueChange(t,e,a){T.produce({schemaId:w.FilterValueChange,payload:{...a?{identityUuid:a}:{},...e,filterValue:t}})},storeListPaginationClick(t,e,a,n,o){T.produce({schemaId:w.StoreListPaginationClick,payload:{...o?{identityUuid:o}:{},...n,currentPage:t,totalPageCount:e,actionType:a}})},storesLoad(t,e,a,n){T.produce({schemaId:w.StoresLoad,payload:{...n?{identityUuid:n}:{},requestCount:t,storesCount:e,completedSuccessfully:a}})},accountSettingsAdminClick(t,e){T.produce({schemaId:w.AccountSettingsAdminLinkClick,payload:{identityUuid:e||"",referringPath:t}})}},I={...ze},F=()=>{const[t]=V();return{...I,clickStore:(e,a,n,o)=>I.clickStore(e,a,n,o,t==null?void 0:t.sub),createStore:()=>I.createStore(t==null?void 0:t.sub),createStoreConfirm:e=>I.createStoreConfirm(e,t==null?void 0:t.sub),linkClick:e=>I.linkClick(e,t==null?void 0:t.sub),storeStatusTabSelected:(e,a)=>I.storeStatusTabSelected(e,a,t==null?void 0:t.sub),filterValueChange:(e,a)=>I.filterValueChange(e,a,t==null?void 0:t.sub),storeListPaginationClick:(e,a,n,o)=>I.storeListPaginationClick(e,a,n,o,t==null?void 0:t.sub),storesLoad:({requestCount:e,storesCount:a,completedSuccessfully:n})=>I.storesLoad(e,a,n,t==null?void 0:t.sub)}};function C(t){return!t.webUrl}function Nt(t,e){return t.find(a=>C(a)&&Vt(a.id)===e)}function Ee(t){const e=new URLSearchParams(location.search).get("user");return t.map(a=>C(a)?{...a,destinations:a.destinations.map(n=>rt(n,e))}:rt(a,e))}function rt(t,e){let a=t.webUrl;const n=Le(a);if(n){const o=e?`?user=${e}`:"";a=`${t.status===r.Inactive?`/store/${n}/access_account`:`/store/${n}`}${o}`}return{...t,unifiedWebUrl:a}}function jt(){return S.useContext(Ce)}const $e="Failed to parse invalid JSON string";async function Be(t){let e;try{e=await t.json()}catch{return Ue(t)}return Fe(t,e)}function Ue(t){return{status:t.status,error:$e}}function Fe(t,e){return t.ok?Oe(t,e):Pe(t,e)}function Oe(t,e){return{status:t.status,data:e}}function Pe(t,e){return{status:t.status,error:e}}const Me="Request Failed";async function Re(t){const e=await t.text();return t.ok?He(t,e):We(t,e)}function He(t,e){return{status:t.status,data:e}}function We(t,e){return{status:t.status,error:e||Me}}async function qe(t){return Ge(t)?Be(t):Re(t)}function Ge(t){const e=t.headers.get("content-type");return e!==null&&e.includes("application/json")}class Ve{constructor(){k(this,"defaultTimeout",6e4);k(this,"headers");k(this,"deserializer",qe)}get(e){return this.execute(a=>fetch(e,{...a,method:J.Get,headers:this.getHeaders()}))}post(e,a){return this.execute(n=>fetch(e,{...n,method:J.Post,headers:this.getHeaders(),body:JSON.stringify(a)}))}put(e,a){return this.execute(n=>fetch(e,{...n,method:J.Put,headers:this.getHeaders(),body:JSON.stringify(a)}))}delete(e){return this.execute(a=>fetch(e,{...a,method:J.Delete,headers:this.getHeaders()}))}getHeaders(){return this.headers}setHeaders(e){this.headers=e}setCustomDeserializer(e){this.deserializer=e}async execute(e){const{signal:a,clearTimer:n}=this.createAbortSignalWithTimeout();try{const o=await e({signal:a});return this.deserializer(o)}catch(o){return{error:o}}finally{n()}}createAbortSignalWithTimeout(){const e=new AbortController,a=setTimeout(()=>e.abort(),this.defaultTimeout);return{clearTimer:()=>clearTimeout(a),signal:e.signal}}}async function wt(t){try{return Qe(t)}catch{return{error:"Could not fetch destinations from server"}}}async function Qe(t){if(!Qt())return{error:"Destinations query deprecated for legacy admin"};const{csrfToken:a}=Jt(),{destinationsEndpoint:n}=new qt,o=new Ve;return o.setHeaders({"Content-Type":"application/json",[Xt.CsrfToken.toLowerCase()]:a}),t.handleResponse&&o.setCustomDeserializer(t.handleResponse),o.post(n,{query:t.graphqlQuery})}function Je(t){var o,c;if(!Ye(t))return[];const a=(((o=t.organizations)==null?void 0:o.edges)||[]).map(Xe),n=Tt((c=t.orphanDestinations)==null?void 0:c.categories);return[...a,...n]}function Xe(t){return{id:t.node.id,name:t.node.name,destinations:Tt(t.node.categories)}}function Tt(t){if(!Array.isArray(t))return[];try{return It(t.map(a=>a.destinations.edges)).map(a=>a.node).filter(Boolean)}catch{return[]}}function Ze(t){const e=t.reduce((a,{message:n,extensions:o,locations:c,path:i})=>a.concat(`
        message: ${n}
        locations: ${JSON.stringify(c)}
        path: ${JSON.stringify(i)}
        extensions: ${JSON.stringify(o)}
        --------------------------------------------------
      `),"");return new Error(`[Destinations] An error occurred while proccessing the query ${e}`)}function Ye(t){return t!==null&&typeof t=="object"}function It(t,e=[]){for(let a=0,n=t.length;a<n;a++){const o=t[a];Array.isArray(o)?It(o,e):e.push(o)}return e}function et({first:t,after:e}){return[...t?[`first: ${t}`]:[],...e?[`after: "${e}"`]:[]].join(", ")}const Ke=(t={},e={})=>`organizations(${et(t)}) {
  edges {
    node {
      id
      name
      categories(handles: STORES) {
        destinations(${et(e)}) {
          edges {
            node {
              ...destinationFields
            }
          }
          pageInfo {
            endCursor
            hasNextPage
          }
        }
      }
    }
  }
  pageInfo {
    endCursor
    hasNextPage
  }
}`,ta=(t={})=>`orphanDestinations {
  categories(handles: STORES) {
    destinations(${et(t)}) {
      edges {
        node {
          ...destinationFields
        }
      }
      pageInfo {
        endCursor
        hasNextPage
      }
    }
  }
}`,ea=({organizations:t,organizationDestinations:e,orphanDestinations:a})=>`{
  currentUserAccount {
    ${t.first===0||e.first===0?"":Ke(t,e)}
    ${a.first===0?"":ta(a)}
  }
}
fragment destinationFields on Destination {
  accountStatus
  name
  shortName
  status
  icon {
    asset
    url
    altText
  }
  publicId
  webUrl
  lastAccess
}
`,aa=(t,e)=>`{
  currentUserAccount {
    ${t.map(({id:a,cursor:n},o)=>`org${o}: organization(id: "${a}") {
          id
          categories(handles: STORES) {
            destinations(${et({first:e,after:n})}) {
              edges {
                node {
                  ...destinationFields
                }
              }
              pageInfo {
                endCursor
                hasNextPage
              }
            }
          }
    }`).join("")}
  }
}
fragment destinationFields on Destination {
  accountStatus
  name
  shortName
  status
  icon {
    asset
    url
    altText
  }
  publicId
  webUrl
  lastAccess
}
`,na=()=>`
query LastAccessedDestination {
  currentUserAccount {
    lastAccessedDestination {
      webUrl
    }
  }
}
`,sa=4999,oa=360,ia=13;function ra({organizationDestinations:t,orphanDestinations:e,total:a}){return Math.floor((a-e)/t)}const ca={organizationDestinations:ia,orphanDestinations:oa,total:sa};class la{constructor(e,a){k(this,"request");k(this,"cursors");k(this,"destinations",[]);k(this,"phase");k(this,"limits");k(this,"previousResponse");k(this,"requestsCount");this.cursors={},this.limits=this.calculateLimits(a==null?void 0:a.limits),this.request=e,this.requestsCount=0,this.phase="phase_1"}async collectAllDestinations(){for(;this.phase!=="done";)await this.nextRequest(),this.requestsCount++;return{...this.previousResponse,data:this.destinations}}getRequestCount(){return this.requestsCount}calculateLimits(e){const a={...ca,...e||{}};return{...a,organizations:ra(a)}}async makeRequest(e){return this.request({graphqlQuery:e,handleResponse:async a=>{var c;let n;const o=a.clone();try{n=await a.json()}catch(i){let u="unknown";try{u=(await o.text()).substring(0,500)}catch{}const d=`Failed to parse destinations response: ${i.message}.
Response body:
${u}`;throw new Error(d)}return n.errors?{error:Ze(n.errors),status:a.status}:{data:(c=n.data)==null?void 0:c.currentUserAccount,status:a.status}}})}normalizePhase2Response(e){return{organizations:{edges:Object.values(e).map(a=>({node:a})),pageInfo:{hasNextPage:!1}}}}async nextRequest(){const e=this.getNextQuery(),{error:a,status:n,data:o}=await this.makeRequest(e);this.previousResponse={error:a,status:n};let c=o;!a&&o&&(this.phase==="phase_2"&&(c=this.normalizePhase2Response(o)),this.updateCursors(c)),c&&this.mergeDestinations(Je(c)),!a&&this.hasMorePages()?(this.optimizeLimits(),this.cursors.organizationDestinations&&Object.keys(this.cursors).length===1&&(this.phase="phase_2")):this.phase="done"}hasMorePages(){return Object.keys(this.cursors).length!==0}maximizeOrphanDestinationLimits(){this.limits.orphanDestinations+=this.limits.organizations*this.limits.organizationDestinations,this.limits.organizations=0,this.limits.organizationDestinations=0}maximizeOrganizationLimits(){this.limits.organizations+=Math.floor(this.limits.orphanDestinations/this.limits.organizationDestinations),this.limits.orphanDestinations=0}maximizeOrganizationDestinationLimits(){this.limits.organizationDestinations=Math.floor(this.limits.total/this.cursors.organizationDestinations.length)}optimizeLimits(){!this.cursors.organizations&&this.cursors.orphanDestinations?this.maximizeOrphanDestinationLimits():!this.cursors.orphanDestinations&&this.cursors.organizations?this.maximizeOrganizationLimits():!this.cursors.organizations&&!this.cursors.orphanDestinations&&this.maximizeOrganizationDestinationLimits()}mergeDestinations(e){for(const a of e){if(C(a)){const n=this.destinations.find(o=>C(o)&&o.id===a.id);if(n&&C(n)){n.destinations=[...n.destinations,...a.destinations];continue}}this.destinations.push(a)}}updateOrganizationCursor(e){e.pageInfo.hasNextPage?this.cursors.organizations=e.pageInfo.endCursor:delete this.cursors.organizations}updateOrganizationDestinationsCursors(e){this.phase==="phase_2"&&delete this.cursors.organizationDestinations,e.edges.forEach(a=>{a.node.categories[0].destinations.pageInfo.hasNextPage&&(this.cursors.organizationDestinations||(this.cursors.organizationDestinations=[]),this.cursors.organizationDestinations.push({id:a.node.id,cursor:a.node.categories[0].destinations.pageInfo.endCursor}))})}updateOrphanedDestinationsCursor(e){e.pageInfo.hasNextPage?this.cursors.orphanDestinations=e.pageInfo.endCursor:delete this.cursors.orphanDestinations}updateCursors(e){e.organizations&&(this.updateOrganizationCursor(e.organizations),this.updateOrganizationDestinationsCursors(e.organizations)),e.orphanDestinations&&this.updateOrphanedDestinationsCursor(e.orphanDestinations.categories[0].destinations)}getNextQuery(){return this.phase==="phase_2"?aa(this.cursors.organizationDestinations,this.limits.organizationDestinations):ea({organizations:{first:this.limits.organizations,after:this.cursors.organizations},organizationDestinations:{first:this.limits.organizationDestinations},orphanDestinations:{first:this.limits.orphanDestinations,after:this.cursors.orphanDestinations}})}}const io=[{id:"Z2lkOi8vb3JnYW5pemF0aW9uL09yZ2FuaXphdGlvbi8y",name:"Business 1",destinations:[{name:"Shop 1",shortName:"S1",webUrl:"https://shop1.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/1")}]}],ua=[{id:"Z2lkOi8vb3JnYW5pemF0aW9uL09yZ2FuaXphdGlvbi8y",name:"Business 1",destinations:[{name:"Shop 1",shortName:"S1",webUrl:"https://shop1.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/1")},{name:"Shop 2",shortName:"S2",webUrl:"https://shop2.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/2")},{name:"Shop 3",shortName:"S3",webUrl:"https://shop3.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/3")},{name:"Shop 4",shortName:"S4",webUrl:"https://shop4.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/4")},{name:"Shop 5",shortName:"S5",webUrl:"https://shop5.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/5")},{name:"Shop 6",shortName:"S6",webUrl:"https://shop6.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/6")},{name:"Shop 7",shortName:"S7",webUrl:"https://shop7.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/7")},{name:"Shop 8",shortName:"S8",webUrl:"https://shop8.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/8")},{name:"Shop 9",shortName:"S9",webUrl:"https://shop9.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/9")},{name:"Shop 10",shortName:"S1",webUrl:"https://shop10.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/10")},{name:"Shop 11",shortName:"S1",webUrl:"https://shop11.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/11")},{name:"Shop 12",shortName:"S1",webUrl:"https://shop12.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/12")},{name:"Shop 13",shortName:"S1",webUrl:"https://shop13.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/13")},{name:"Shop 14",shortName:"S1",webUrl:"https://shop14.myshopify.io/admin",status:r.Inactive,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/14")},{name:"Shop 15",shortName:"S1",webUrl:"https://shop15.myshopify.io/admin",status:r.Inactive,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/15")},{name:"Shop 29",shortName:"S2",webUrl:"https://shop29.myshopify.io/admin",status:r.Inactive,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/29")},{name:"Shop 30",shortName:"S3",webUrl:"https://shop30.myshopify.io/admin",status:r.Inactive,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/30")},{name:"Shop 31",shortName:"S3",webUrl:"https://shop31.myshopify.io/admin",status:r.Inactive,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/31")},{name:"Shop 32",shortName:"S3",webUrl:"https://shop32.myshopify.io/admin",status:r.Inactive,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/32")},{name:"Shop 33",shortName:"S3",webUrl:"https://shop33.myshopify.io/admin",status:r.Inactive,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/33")},{name:"Shop 34",shortName:"S3",webUrl:"https://shop34.myshopify.io/admin",status:r.Inactive,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/34")}]},{id:"Z2lkOi8vb3JnYW5pemF0aW9uL09yZ2FuaXphdGlvbi81",name:"Organization 2",destinations:[{name:"Shop 22",shortName:"S2",webUrl:"https://shop22.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/22")},{name:"Shop 23",shortName:"S2",webUrl:"https://shop23.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/23")},{name:"Shop 24",shortName:"S2",webUrl:"https://shop24.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/24")},{name:"Shop 25",shortName:"S2",webUrl:"https://shop25.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/25")},{name:"Shop 26",shortName:"S2",webUrl:"https://shop26.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/26")},{name:"Shop 27",shortName:"S2",webUrl:"https://shop27.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/27")},{name:"Shop 28",shortName:"S2",webUrl:"https://shop28.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/28")}]},{name:"Boutique 16",shortName:"BT",webUrl:"https://shop16.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/16")},{name:"Boutique 17",shortName:"B1",webUrl:"https://shop17.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/17")},{name:"Boutique 18",shortName:"B1",webUrl:"https://shop18.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/18")},{name:"Shop 19",shortName:"S1",webUrl:"https://shop19.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/19")},{name:"Shop 20",shortName:"S2",webUrl:"https://shop20.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/20")},{name:"Shop 21",shortName:"S2",webUrl:"https://shop21.myshopify.io/admin",status:r.Inactive,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/21")},{name:"Market 41",shortName:"M4",webUrl:"https://shop41.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/41")},{name:"Market 42",shortName:"M4",webUrl:"https://shop42.myshopify.io/admin",status:r.Active,accountStatus:m.Active,publicId:btoa("gid://organization/ShopifyShop/42")}];function ft(t){var e;if(C(t)){const a=(e=t.destinations[0])==null?void 0:e.lastAccess;return a==null?void 0:new Date(a)}else return t.lastAccess==null?void 0:new Date(t.lastAccess)}function da(t,e){return[...t].sort((a,n)=>{const o=ft(a),c=ft(n);return o&&c?o>c?-1:1:o&&!c?-1:!o&&c?1:a.name.trim().localeCompare(n.name.trim(),e.locale,{numeric:!0})})}function ha(){const[t]=A(),e=At(),[a,n]=De(),[o,c]=jt(),i=F(),u=async()=>{var d;try{const l=new la(wt),f=await l.collectAllDestinations(),h=l.getRequestCount();return h>1&&i.storesLoad({requestCount:h,storesCount:((d=f.data)==null?void 0:d.length)||0,completedSuccessfully:!f.error}),f}catch(l){return{status:void 0,data:void 0,error:l}}};return S.useEffect(()=>{(async()=>{n(P.Loading);try{const d=await u();let{data:l}=d;const{error:f}=d;if(!(l!=null&&l.length)&&f&&Zt&&(l=ua),!(l!=null&&l.length)&&f&&Yt,l){const h=da(l,t),g=Ee(h);c(g),n(P.Success)}if(f)throw f}catch(d){if(n(P.Failure),d instanceof Error&&d.name==="AbortError")return;e.notify(d)}})()},[]),{destinations:o,isLoading:a===P.Loading||a===P.None,isFailure:a===P.Failure}}function pa(){const t=At(),[e,a]=S.useState({destination:void 0,isLoading:!1,isFailure:!1}),n=async()=>{try{return wt({graphqlQuery:na()})}catch(o){return{status:void 0,data:void 0,error:o}}};return S.useEffect(()=>{(async()=>{var o,c,i;a(u=>({...u,isLoading:!0}));try{const u=await n();if((i=(c=(o=u.data)==null?void 0:o.data)==null?void 0:c.currentUserAccount)!=null&&i.lastAccessedDestination){const d=new URLSearchParams(location.search).get("user"),l=u.data.data.currentUserAccount.lastAccessedDestination;if(l.webUrl){const f=rt(l,d);a({destination:f,isLoading:!1,isFailure:!1})}else a({destination:l,isLoading:!1,isFailure:!1})}else a(d=>({...d,isLoading:!1}));u.error&&a(d=>({...d,isFailure:!0,isLoading:!1}))}catch(u){a(d=>({...d,isFailure:!0,isLoading:!1})),t.notify(u)}})()},[]),e}const Dt="organization_id",zt="invite_acceptance";function Et(){const t=G(),e=new URLSearchParams(t.search),a=e.get(Dt),n=!!e.get(zt);return e.get(bt)!=="true"&&!n&&!a}const $t="redirect";function ma(){const t=Et(),e=Kt(),a=G();S.useEffect(()=>{if(a.pathname!=="/"){let n=`?${$t}=${encodeURIComponent(`${a.pathname}${a.search}${a.hash}`)}`;t||(n+=`&${bt}=true`),e({pathname:"/",search:n},{replace:!0})}},[t,e,a.pathname,a.search,a.hash])}function Bt(){const t=G();return e=>{const n=new URLSearchParams(t.search).get($t)||t.search;return`${e}${n}`}}function ut(){const t=S.useContext(te);if(t==null)throw new Error("You must have an <I18nContext.Provider /> somewhere in your React tree.");return t}function fa(){const{search:t}=G(),e=S.useRef(!1),a=F(),n=ke.parse(t,{ignoreQueryPrefix:!0});return S.useEffect(()=>{n.from&&n.from==="accountSettings"&&!e.current&&(a.accountSettingsAdminClick(document.referrer,ee()),e.current=!0)},[n.from,a]),null}const Sa="merchant_space_preferred_locale";function ga(t){const e=ne,a=Object.keys(se);if(a.includes(t))return t;const n=ae(t);return a.includes(n)?n:e}function ya(){const[t]=V(),e=ut();_t(()=>{if(typeof(t==null?void 0:t.locale)!="string")return;const a=ga(t.locale);e.update({...e.details,locale:a}),oe&&localStorage.setItem(Sa,a)},[t==null?void 0:t.locale])}function va(t,e){return!t&&!e?null:`${(t==null?void 0:t.charAt(0))??""}${(e==null?void 0:e.charAt(0))??""}`.toUpperCase()}const ba="_Activator_1ff0i_4",_a="_Avatar_1ff0i_30",Aa="_Chevron_1ff0i_34",xa="_UserMeta_1ff0i_38",Ca="_MetaName_1ff0i_42",La="_MetaEmail_1ff0i_46",ka="_ActivatorContainer_1ff0i_50",Na="_SkeletonActivator_1ff0i_54",D={Activator:ba,"Activator-pressed":"_Activator-pressed_1ff0i_17","Activator-hidden":"_Activator-hidden_1ff0i_26",Avatar:_a,Chevron:Aa,UserMeta:xa,MetaName:Ca,MetaEmail:La,ActivatorContainer:ka,SkeletonActivator:Na},ja={primaryItems:{account:"Manage account"},secondaryItems:{switchAccounts:"Switch account",logout:"Log out"},user:{defaultName:"Your account",defaultInitials:"YA"}},wa={TopBar:ja},Ta={[Symbol.for("i18n-id")]:"UserMenu_1hfcill",en:wa};function Ia({isLoading:t}){var e=p(1);try{var a=p(1);try{const n=lt(),o=F(),[c]=A(Ta),[i]=V(),[u,d]=S.useState(!1),[l,f]=S.useState(!1),h=()=>{o.linkClick(`user_menu_toggle_${u?"close":"open"}`),d(!u)},g=tt(D.Activator,{[D["Activator-pressed"]]:u,[D["Activator-hidden"]]:t}),y=$=>{o.linkClick($)},L=i==null?void 0:i.displayName,v=i==null?void 0:i.email,x=L??c.translate("TopBar.user.defaultName"),j=va(i==null?void 0:i.givenName,i==null?void 0:i.familyName)??c.translate("TopBar.user.defaultInitials"),U=i!=null&&i.sub&&!i.employeeUser?n.identityAccountGravatar(i.sub):void 0,z=l?void 0:(i==null?void 0:i.picture)??U,_=$=>s.jsx(xt,{initials:j,name:x,size:$,customer:!1,onError:()=>f(!0),source:z}),E=s.jsxs("div",{className:D.ActivatorContainer,children:[t&&s.jsx("div",{className:D.SkeletonActivator}),s.jsx("button",{type:"button",onClick:h,className:g,children:s.jsx("span",{className:D.Avatar,children:_("xl")})})]}),O=[{content:c.translate("TopBar.primaryItems.account"),external:!0,icon:"profile",url:i!=null&&i.sub?n.identityAccount(i.sub,!!i.employeeUser):void 0,onAction:()=>y("user-account")},{content:c.translate("TopBar.secondaryItems.logout"),icon:"exit",url:"/logout",onAction:()=>y("logout")}];return i||O.shift(),s.jsxs(X,{active:u,activator:E,onClose:h,preferredAlignment:"right",children:[(L||v)&&s.jsx(X.Pane,{fixed:!0,children:s.jsx(X.Section,{children:s.jsxs(mt,{spacing:"tight",wrap:!1,children:[_(),s.jsx(mt.Item,{fill:!0,children:s.jsxs("div",{className:D.UserMeta,children:[s.jsx("p",{className:D.MetaName,children:s.jsx(B,{variant:"bodyMd",as:"span",fontWeight:"semibold",children:L})}),s.jsx("div",{className:D.MetaEmail,children:s.jsx(B,{variant:"bodySm",as:"p",tone:"subdued",children:v})})]})})]})})}),s.jsx(X.Pane,{children:s.jsx(ce,{sections:[{items:O}]})})]})}finally{a.f()}}finally{e.f()}}const Da="_TopBar_1ue8d_4",za="_TopBarInner_1ue8d_10",Ea="_LogoLink_1ue8d_25",Z={TopBar:Da,TopBarInner:za,LogoLink:Ea};function $a({showUserMenu:t,isLoading:e}){var a=p(1);try{var n=p(1);try{const{rootUrl:o}=lt();return s.jsx("header",{role:"banner",className:Z.TopBar,children:s.jsxs("div",{className:Z.TopBarInner,children:[s.jsx(le,{url:`${o.pathname}${o.search}`,className:Z.LogoLink,"aria-label":"Shopify","aria-current":window.location.pathname===o.pathname&&"page",children:s.jsx(ue,{source:Te,alt:"",className:Z.Logo})}),t&&s.jsx(Ia,{isLoading:e})]})})}finally{n.f()}}finally{a.f()}}const Ba={content:"Something went wrong, your store couldn't be created. Try again in a few minutes."},Ua={StoreCreationFailedBanner:Ba},Fa={[Symbol.for("i18n-id")]:"StoreCreationFailedBanner_171xpb8",en:Ua};function Oa(){var t=p(1);try{var e=p(1);try{const[a]=A(Fa);return s.jsx(at,{tone:"critical",children:s.jsx("p",{children:a.translate("StoreCreationFailedBanner.content")})})}finally{e.f()}}finally{t.f()}}const Pa={content:"If your most recent stores aren't listed, {reloadLink} or try again later.",reloadLinkText:"reload the page"},Ma={StoreListingFailedBanner:Pa},Ra={[Symbol.for("i18n-id")]:"StoreListingFailedBanner_yns6mn",en:Ma};function Ha(){var t=p(1);try{var e=p(1);try{const[a]=A(Ra);return s.jsx(at,{tone:"warning",children:s.jsx("p",{children:a.translate("StoreListingFailedBanner.content",{reloadLink:s.jsx(Ct,{onClick:()=>window.location.reload(),children:a.translate("StoreListingFailedBanner.reloadLinkText")})})})})}finally{e.f()}}finally{t.f()}}const Wa={content:"You need to verify your email address before you can create another store. Check your inbox or {link}",emailLinkText:"resend verification email"},qa={EmailValidationBanner:Wa},Ga={[Symbol.for("i18n-id")]:"EmailValidationBanner_19bax1y",en:qa};function Va(){var t=p(1);try{var e=p(1);try{const[a]=A(Ga),n=lt(),[o]=V(),c=o!=null&&o.sub?n.identityAccount(o.sub,!!o.employeeUser):`https://${n.identityHost()}`;return s.jsx(at,{tone:"warning",children:s.jsx("p",{children:a.translate("EmailValidationBanner.content",{link:s.jsx(Ct,{url:c,target:"_blank",children:a.translate("EmailValidationBanner.emailLinkText")})})})})}finally{e.f()}}finally{t.f()}}const Qa={content:"Your user access is being processed across multiple stores. Refresh this page to see more stores when your access is activated."},Ja={InviteAcceptanceBanner:Qa},Xa={[Symbol.for("i18n-id")]:"InviteAcceptanceBanner_1vhzjgx",en:Ja};function Za(){var t=p(1);try{var e=p(1);try{const[a]=A(Xa);return s.jsx(at,{tone:"info",children:s.jsx("p",{children:a.translate("InviteAcceptanceBanner.content")})})}finally{e.f()}}finally{t.f()}}const Ya="_BannerContainer_8lfxr_1",Ka={BannerContainer:Ya};var St=function(t){return t[t.StoreListingFailed=0]="StoreListingFailed",t[t.StoreCreationFailed=1]="StoreCreationFailed",t[t.EmailValidationWarning=2]="EmailValidationWarning",t[t.InviteAccepted=3]="InviteAccepted",t}({});const tn=({types:t})=>{var e=p(1);try{var a=p(1);try{const n=[];return t==null||t.forEach(o=>{o===1&&n.push(s.jsx(Oa,{},1)),o===0&&n.push(s.jsx(Ha,{},0)),o===2&&n.push(s.jsx(Va,{},2)),o===3&&n.push(s.jsx(Za,{},3))}),n.length===0?null:s.jsx("div",{className:Ka.BannerContainer,children:n})}finally{a.f()}}finally{e.f()}},en="https://cdn.shopify.com/shopifycloud/web/assets/v1/vite/client/en/assets/emptyState-DlZjKNXrFQaX.svg",Ut="CreateStoreCta",Ft="StoresHeading",an=10,q=10,nn="_EmptyStateContainer_kodsk_1",sn={EmptyStateContainer:nn},on={headerContent:"Create your first online store",buttonText:"Create store",bodyContent:"Experiment with different designs and products until you learn what works"},rn={EmptyState:on},cn={[Symbol.for("i18n-id")]:"EmptyState_xuq1hh",en:rn};function ln({onStoreCreationClick:t}){var e=p(1);try{var a=p(1);try{const[n]=A(cn);return s.jsx("div",{className:sn.EmptyStateContainer,children:s.jsx(de,{heading:n.translate("EmptyState.headerContent"),action:{id:Ut,content:n.translate("EmptyState.buttonText"),onAction:t},image:en,children:s.jsx(B,{variant:"bodyMd",as:"span",tone:"subdued",children:n.translate("EmptyState.bodyContent")})})})}finally{a.f()}}finally{e.f()}}const un="_StoresLayout_1pym6_1",dn="_LayoutContent_1pym6_8",hn={StoresLayout:un,LayoutContent:dn},pn="_StoresHeader_xl66o_1",mn="_StoresHeading_xl66o_17",fn="_CreateStoreContainer_xl66o_29",Sn="_wiggle_xl66o_1",st={StoresHeader:pn,StoresHeading:mn,CreateStoreContainer:fn,wiggle:Sn},gn={stores:"Stores",firstWelcome:"Welcome, {firstName}",welcome:"Welcome back, {firstName}",unknownWelcome:"Welcome back",createStoreCta:"Create store"},yn={StoresLayoutHeader:gn},vn={[Symbol.for("i18n-id")]:"StoresLayoutHeader_1qdbfv2",en:yn};function bn({destinationsSuccessfullyFetched:t,userIsAcceptingInvite:e,onStoreCreationClick:a}){var n=p(1);try{var o=p(1);try{const[c]=A(vn),[i]=jt(),u=F(),[d]=V(),{mobile:l,phablet:f}=Ie(),h=()=>{u.createStore(),a()},g=d==null?void 0:d.givenName,y=S.useMemo(()=>g?e?"firstWelcome":"welcome":"unknownWelcome",[g,e]),L=(i==null?void 0:i.length)===0;return t&&L?null:s.jsxs("header",{className:st.StoresHeader,children:[s.jsx("h1",{id:Ft,className:st.StoresHeading,children:c.translate(`StoresLayoutHeader.${y}`,{firstName:d==null?void 0:d.givenName})}),s.jsx("span",{className:st.CreateStoreContainer,children:s.jsx(he,{id:Ut,onClick:h,fullWidth:l||f,size:"large",variant:"primary",icon:"plus",children:c.translate("StoresLayoutHeader.createStoreCta")})})]})}finally{o.f()}}finally{n.f()}}const W=t=>t.reduce((e,a)=>C(a)?e+a.destinations.length:e+1,0),_n={searchPlaceHolder:"Search",label:"Store search"},An={StoreSearchBar:_n},xn={[Symbol.for("i18n-id")]:"StoreSearchBar_17wiarq",en:An},Cn=300;function Ln({storeSearchValue:t,setStoreSearchValue:e}){var a=p(1);try{var n=p(1);try{const[o]=A(xn),[c,i]=S.useState(t),u=()=>{i(""),e("")},d=pe(f=>{e(f)},Cn),l=f=>{i(f),d(f)};return s.jsx(me,{label:o.translate("StoreSearchBar.label"),labelHidden:!0,value:c,onChange:l,type:"search",placeholder:o.translate("StoreSearchBar.searchPlaceHolder"),prefix:s.jsx(ct,{"aria-hidden":!0,tone:"neutral",type:"search"}),clearButton:!0,onClearButtonClick:u,autoComplete:"off"})}finally{n.f()}}finally{a.f()}}const kn="_TabBadge_vrmjv_1",Nn={TabBadge:kn},jn={tabs:{active:"Active",inactive:"Inactive",tabAccessibleText:"{category}, {count} item(s)"}},wn={StoreTabs:jn},Tn={[Symbol.for("i18n-id")]:"StoreTabs_1p36f99",en:wn};function In({storeStatusFilter:t,setStoreStatusFilter:e,activeCount:a,inactiveCount:n}){var o=p(1);try{var c=p(1);try{const[i]=A(Tn),u=ie("(max-width: 695px)"),d=[{id:r.Active,content:gt(i.translate("StoreTabs.tabs.active"),a),accessibilityLabel:i.translate("StoreTabs.tabs.tabAccessibleText",{category:i.translate("StoreTabs.tabs.active"),count:a||""})},{id:r.Inactive,content:gt(i.translate("StoreTabs.tabs.inactive"),n),accessibilityLabel:i.translate("StoreTabs.tabs.tabAccessibleText",{category:i.translate("StoreTabs.tabs.inactive"),count:n||""})}],l=h=>{const g=d[h].id;e(g)},f=d.findIndex(h=>h.id===t);return s.jsx(fe,{tabs:d,selected:f,onSelect:l,fitted:u})}finally{c.f()}}finally{o.f()}}function gt(t,e){return s.jsxs(s.Fragment,{children:[t,e&&s.jsx("span",{className:Nn.TabBadge,children:s.jsx(Lt,{tone:"new",children:e.toString()})})]})}function yt(t,e){const a=e.trim().toLowerCase();return t.filter(o=>C(o)?o.destinations.length&&Dn(o,a):dt(o,a)).map(o=>C(o)?zn(o,a):o)}function dt(t,e){return e===""?!0:(t.name+t.webUrl).toLocaleLowerCase().includes(e)}function Dn(t,e){return e===""?!0:t.name.toLowerCase().includes(e)||t.destinations.some(a=>dt(a,e))}function zn(t,e){return t.name.toLowerCase().includes(e)?t:{...t,destinations:t.destinations.filter(a=>dt(a,e))}}function vt(t){return t.filter(e=>Ot(e))}function Ot(t){return t.accountStatus===m.Active}function En(t,e){const a=e?Nt(t,e):void 0,n=a?[a]:t,o={[r.Active]:[],[r.Inactive]:[]};return n.forEach(c=>{if(C(c)){const i={...c,destinations:vt(c.destinations.filter(d=>d.status===r.Active))};c.destinations.length&&o[r.Active].push(i);const u={...c,destinations:vt(c.destinations.filter(d=>d.status===r.Inactive))};u.destinations.length&&o[r.Inactive].push(u)}else Ot(c)&&o[c.status].push(c)}),o}const $n={label:"{pageNumber} of {totalPages}",a11yCurrentPage:"Current page, Page {pageNumber}",a11yGoToPage:"Go to page {pageNumber}"},Bn={StorePagination:$n},Un={[Symbol.for("i18n-id")]:"StorePagination_1mmigad",en:Bn};function Fn({pages:t,currentPage:e,setCurrentPage:a,trackingInfo:n}){var o=p(1);try{var c=p(1);try{const i={next:"next",previous:"previous"},[u]=A(Un),d=F(),l=t.length,f=e<l,h=e>1,g=j=>{d.storeListPaginationClick(e,l,j,{...n})},y=()=>{a(Math.min(e+1,l)),g(i.next)},L=()=>{a(Math.max(e-1,1)),g(i.previous)},v=f?u.translate("StorePagination.a11yGoToPage",{pageNumber:e+1}):"",x=h?u.translate("StorePagination.a11yGoToPage",{pageNumber:e-1}):"";return s.jsx(Se,{label:u.translate("StorePagination.label",{pageNumber:e,totalPages:l}),hasPrevious:h,hasNext:f,onPrevious:L,onNext:y,accessibilityLabel:u.translate("StorePagination.a11yCurrentPage",{pageNumber:e}),accessibilityLabels:{previous:x,next:v}})}finally{c.f()}}finally{o.f()}}const On="_List_y1icz_4",Pn={List:On};function Mn({children:t}){var e=p(1);try{var a=p(1);try{return s.jsx("ul",{className:Pn.List,children:t})}finally{a.f()}}finally{e.f()}}const Rn="_StoreCard_75ck9_4",Hn="_StoreIcon_75ck9_40",Wn="_StoreDetails_75ck9_54",qn="_Caption_75ck9_76",Gn="_Chevron_75ck9_80",Vn="_StoreCardContainer_75ck9_93",Qn="_StoreMeta_75ck9_110",Jn="_StoreArrow_75ck9_132",N={StoreCard:Rn,StoreIcon:Hn,StoreDetails:Wn,Caption:qn,Chevron:Gn,StoreCardContainer:Vn,StoreMeta:Qn,StoreArrow:Jn},Xn={inactiveBadge:"Inactive"},Zn={StoreCard:Xn},Yn={[Symbol.for("i18n-id")]:"StoreCard_11c31a4",en:Zn};function Pt({name:t,icon:e,shortName:a,webUrl:n,unifiedWebUrl:o,publicId:c,status:i,position:u,trackingInfo:d,isOrganizationStore:l=!1,organizationCardCanExpand:f=!1}){var h=p(1);try{var g=p(1);try{const[y]=A(Yn),L=F(),v=Bt(),x=atob(c).split("/").pop(),j=tt(N.StoreCardContainer,l&&N.StoreCardWithParent,l&&f&&N.StoreCardWithParentFooter),U=tt(l&&N.StoreCardWithParentMeta,N.StoreMeta),z=async()=>{try{await L.clickStore(Number(x),u,i,{...d})}catch{}},_=i===r.Inactive,E=s.jsx(xt,{name:t,source:e==null?void 0:e.url,accessibilityLabel:t,initials:a,size:"xl"}),O=s.jsx(s.Fragment,{children:s.jsxs("div",{className:N.StoreDetails,children:[s.jsx(B,{variant:"headingSm",as:"h6",children:t}),s.jsx("span",{className:N.Caption,"aria-hidden":"true",children:s.jsx(B,{variant:"bodySm",as:"p",children:new URL(n).hostname})})]})}),$=_?null:s.jsx("div",{className:N.StoreArrow,children:s.jsx(ct,{type:"chevron-right",tone:"legacy-inherit"})}),H=_?s.jsx("div",{className:N.Badge,children:s.jsx(Lt,{children:y.translate("StoreCard.inactiveBadge")})}):null;return s.jsx("li",{className:j,children:s.jsx("a",{href:v(o||n),className:N.StoreCard,onClick:z,children:s.jsxs("div",{className:U,children:[s.jsx("span",{className:N.StoreIcon,children:E}),O,H,$]})})})}finally{g.f()}}finally{h.f()}}const Kn="_OrgContainer_1gcoa_1",ts="_OrgCard_1gcoa_7",es="_OrgHeader_1gcoa_11",as="_OrgHeaderText_1gcoa_18",ns="_OrgFooterBtn_1gcoa_23",ss="_OrgFooterBtnIcon_1gcoa_36",M={OrgContainer:Kn,OrgCard:ts,OrgHeader:es,OrgHeaderText:as,OrgFooterBtn:ns,OrgFooterBtnIcon:ss,"motion-down":"_motion-down_1gcoa_1"},os={showAllStores:"View all stores in this organization",storeCount:{one:"{count} Store",other:"{count} Stores"}},is={OrganizationCard:os},rs={[Symbol.for("i18n-id")]:"OrganizationCard_1cc4ie0",en:is};function cs({name:t,id:e,destinations:a,trackingInfo:n}){var o=p(1);try{var c=p(1);try{const[i]=A(rs),[u,d]=S.useState(!1),l=()=>d(!0),f=s.jsxs("button",{onClick:l,className:M.OrgFooterBtn,type:"button",children:[i.translate("OrganizationCard.showAllStores"),s.jsx("span",{className:M.OrgFooterBtnIcon,children:s.jsx(ct,{type:"arrow-down",tone:"legacy-inherit"})})]}),h=a.length>q&&!u&&s.jsx(ge,{paddingBlockStart:"300",paddingBlockEnd:"300",children:f});return s.jsxs("div",{className:M.OrgContainer,children:[s.jsx("div",{className:M.OrgCard,children:s.jsx(ye,{children:s.jsxs(ve,{children:[s.jsx(B,{variant:"headingMd",as:"h2",children:s.jsx("div",{className:M.OrgHeader,children:s.jsx("span",{className:M.OrgHeaderText,children:t})})}),s.jsx(B,{variant:"bodyMd",as:"span",tone:"subdued",children:i.translate("OrganizationCard.storeCount",{count:a.length})})]})})}),a.filter((g,y)=>u||y<q).map((g,y)=>s.jsx(Pt,{position:y+1,...g,trackingInfo:n,isOrganizationStore:!0,organizationCardCanExpand:a.length>q&&!u},g.webUrl)),h]},e)}finally{c.f()}}finally{o.f()}}const ls="_Section_vzbgd_1",us="_FullHeight_vzbgd_21",ds="_PaginationContainer_vzbgd_31",ot={Section:ls,FullHeight:us,PaginationContainer:ds},hs=S.forwardRef(({pages:t,currentPage:e,setCurrentPage:a,trackingInfo:n,showPagination:o},c)=>{var i=p(1);try{var u=p(1);try{const l=t[e-1].map((h,g)=>C(h)?s.jsx(cs,{name:h.name,id:h.id,destinations:h.destinations,trackingInfo:n},h.id):s.jsx(Pt,{position:g+1,...h,trackingInfo:n},h.webUrl)),f=tt(ot.Section,!o&&ot.FullHeight);return s.jsxs(s.Fragment,{children:[s.jsx("section",{className:f,"aria-labelledby":Ft,ref:c,children:s.jsx(Mn,{children:l})}),o&&s.jsx("div",{className:ot.PaginationContainer,children:s.jsx(Fn,{pages:t,currentPage:e,setCurrentPage:a,trackingInfo:n})})]})}finally{u.f()}}finally{i.f()}}),ps={emptySearch:{title:'No results for "{searchValue}"',description:"Try changing your search or checking the other tabs."}},ms={StoreList:ps},fs={[Symbol.for("i18n-id")]:"EmptySearch_jyjkxp",en:ms};function Ss({searchValue:t}){var e=p(1);try{var a=p(1);try{const[n]=A(fs);return s.jsx(be,{title:n.translate("StoreList.emptySearch.title",{searchValue:t}),description:n.translate("StoreList.emptySearch.description"),withIllustration:!0})}finally{a.f()}}finally{e.f()}}const gs="_FiltersWrapper_1i15k_4",ys="_TabsWrapper_1i15k_13",vs="_Spinner_1i15k_21",bs="_EmptySearchWrapper_1i15k_32",Y={FiltersWrapper:gs,TabsWrapper:ys,Spinner:vs,EmptySearchWrapper:bs};function _s(t){return t[r.Active].length!==0&&t[r.Inactive].length!==0}function it(t){const e=[[]];for(const a of t){const n=e[e.length-1];W(n)<an?n.push(a):e.push([a])}return e}function As({destinations:t,organizationIdFilter:e}){var a=p(1);try{var n=p(1);try{let o=function(){return ht?{totalPageCount:h.length,currentPage:y}:{}},c=function(b){b!==l&&(f(b),E.storeStatusTabSelected(b,{activeShopsLength:W(x[r.Active]),inactiveShopsLength:W(x[r.Inactive]),...nt?{filterValue:u}:{},...o()}))},i=function(b){d(b),E.filterValueChange(b,{activeShopsLength:W(x[r.Active]),inactiveShopsLength:W(x[r.Inactive]),..._?{selectedTab:l}:{},...o()})};const[u,d]=S.useState(""),[l,f]=S.useState(r.Active),[h,g]=S.useState([]),[y,L]=S.useState(1),v=S.useMemo(()=>En(t,e),[t,e]),[x,j]=S.useState(v),[U,z]=S.useState(!1),_=_s(v),E=F(),O=h.length>0&&h[0].length>0,$=S.useRef(null),H=S.useCallback(b=>{var Q;y!==b&&((Q=$.current)==null||Q.scrollTo(0,0)),L(b)},[y]),nt=S.useMemo(()=>it(v[r.Active]).length>1||it(v[r.Inactive]).length>1||v[r.Active].some(b=>C(b)&&b.destinations.length>q)||v[r.Inactive].some(b=>C(b)&&b.destinations.length>q),[v]),ht=h.length>1;S.useEffect(()=>{z(!0)},[u,l]),S.useEffect(()=>{const b={[r.Active]:yt(v[r.Active],u),[r.Inactive]:yt(v[r.Inactive],u)};if(u===""&&b[r.Active].length===0&&l===r.Active){f(r.Inactive);return}j(b);const Q=b[l],pt=it(Q);pt.length!==h.length&&H(1),g(pt);const Rt=setTimeout(()=>{z(!1)});return()=>{clearTimeout(Rt)}},[v,u,l,H,h.length,e]);const Mt=O?s.jsx(hs,{pages:h,currentPage:y,setCurrentPage:H,showPagination:ht,ref:$,trackingInfo:{activeShopsLength:x[r.Active].length,inactiveShopsLength:x[r.Inactive].length,..._?{selectedTab:l}:{},...nt?{filterValue:u}:{},...o()}}):s.jsx("div",{className:Y.EmptySearchWrapper,children:s.jsx(Ss,{searchValue:u})});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:Y.FiltersWrapper,children:[nt&&s.jsx(Ln,{storeSearchValue:u,setStoreSearchValue:i}),_&&s.jsx("div",{className:Y.TabsWrapper,children:s.jsx(In,{storeStatusFilter:l,setStoreStatusFilter:c})}),U&&s.jsx("span",{className:Y.Spinner,children:s.jsx(_e,{size:"small"})})]}),Mt]})}finally{n.f()}}finally{a.f()}}const xs="_SkeletonStoreList_1ljvk_1",Cs="_SkeletonStoreCard_1ljvk_17",Ls="_SkeletonAvatar_1ljvk_51",ks="_SkeletonTextContainer_1ljvk_65",Ns="_SkeletonDisplayText_1ljvk_73",js="_SkeletonBodyText_1ljvk_80",R={SkeletonStoreList:xs,SkeletonStoreCard:Cs,"fade-in":"_fade-in_1ljvk_1",SkeletonAvatar:Ls,SkeletonTextContainer:ks,SkeletonDisplayText:Ns,SkeletonBodyText:js};function ws({stores:t=3}){var e=p(1);try{var a=p(1);try{const n=Array.from({length:t});return s.jsx("div",{className:R.SkeletonStoreList,children:[...n.keys()].map(o=>s.jsxs("div",{className:R.SkeletonStoreCard,children:[s.jsx("div",{className:R.SkeletonAvatar}),s.jsxs("div",{className:R.SkeletonTextContainer,children:[s.jsx("div",{className:R.SkeletonDisplayText}),s.jsx("div",{className:R.SkeletonBodyText})]})]},o))})}finally{a.f()}}finally{e.f()}}const Ts={storeListLabel:"Stores",storeListLoadingLabel:"Loading your stores"},Is={StoresLayout:Ts},Ds={[Symbol.for("i18n-id")]:"StoresLayout_1uhap4r",en:Is};function zs({destinations:t,isLoading:e,isFailure:a,onStoreCreationClick:n}){var o=p(1);try{var c=p(1);try{const[i]=A(Ds),[u,d]=S.useState(""),l=G(),f=new URLSearchParams(l.search),h=f.get(Dt),g=!!f.get(zt),y=S.useMemo(()=>{if(!t||!h)return!1;const _=Nt(t,h);return _?_.destinations.some(E=>E.accountStatus===m.Pending):!1},[t,h]),v=S.useCallback(()=>{const _=[];return a&&_.push(St.StoreListingFailed),g&&y&&_.push(St.InviteAccepted),_},[a,g,y])(),x=!e&&!a,j=i.translate("StoresLayout.storeListLoadingLabel");re(()=>d(j),e?400:null);const U=!!((t==null?void 0:t.length)===0&&x),z=t&&t.length>0;return s.jsxs("div",{className:hn.StoresLayout,children:[s.jsx(bn,{userIsAcceptingInvite:g,destinationsSuccessfullyFetched:x,onStoreCreationClick:n}),s.jsx(tn,{types:v}),U&&s.jsx(ln,{onStoreCreationClick:n}),s.jsx("div",{"aria-busy":e,"aria-live":"polite",children:z?s.jsx(As,{destinations:t,organizationIdFilter:h}):s.jsx(ws,{stores:5})}),s.jsx(B,{variant:"bodySm",as:"span",visuallyHidden:!0,children:s.jsx("span",{"aria-live":"assertive","aria-hidden":!e,children:u})})]})}finally{c.f()}}finally{o.f()}}const Es="_Container_4zaak_1",$s="_StoresLayoutContainer_4zaak_36",Bs="_SurfaceArea_4zaak_46",Us="_SurfaceAreaInner_4zaak_63",K={Container:Es,StoresLayoutContainer:$s,"StoresLayoutContainer-hidden":"_StoresLayoutContainer-hidden_4zaak_42",SurfaceArea:Bs,"SurfaceArea-hasIllustration":"_SurfaceArea-hasIllustration_4zaak_59",SurfaceAreaInner:Us};function Fs({showLoadingState:t,...e}){var a=p(1);try{var n=p(1);try{ya();const o=Ae(),c=ut(),i=K.StoresLayoutContainer,u=K.SurfaceArea;return s.jsxs(s.Fragment,{children:[s.jsx(Ne,{id:"MerchantSpace",containerClassName:K.Container,header:s.jsx($a,{showUserMenu:!0,isLoading:t}),loadingBar:s.jsx(je,{complete:!t}),children:s.jsx("section",{className:u,children:s.jsx("div",{className:K.SurfaceAreaInner,children:s.jsx("div",{className:i,children:s.jsx(zs,{...e,onStoreCreationClick:()=>{window.location.href=o.storeSignup(!0,{locale:c.details.locale,"signup_types[]":"unified_admin"})}})})})})}),s.jsx(we,{})]})}finally{n.f()}}finally{a.f()}}const Os={title:"Your stores - Shopify"},Ps={Head:Os},Ms={[Symbol.for("i18n-id")]:"StoreListing_14wzv8k",en:Ps};function ro(){var t=p(1);try{const e=ut(),[a]=A(Ms),n=ha(),o=pa(),c=Et(),i=Bt();fa(),ma(),xe(a.translate("Head.title")),_t(()=>{document.documentElement.setAttribute("lang",a.locale),e.subscribe([],(h,{locale:g})=>{document.documentElement.setAttribute("lang",g)})},[]);const{isLoading:u}=n,{isLoading:d,destination:l}=o;if(c&&d)return null;if(c&&!d&&(l!=null&&l.unifiedWebUrl)){const h=i(l.unifiedWebUrl);return window.location.assign(h),null}const f={showLoadingState:u,...n};return s.jsx(Fs,{...f})}finally{t.f()}}export{ro as default};
//# sourceMappingURL=https://web-sourcemaps.shopify.io/v1/en/StoreListing-ChLvljPU9JON.js.map
