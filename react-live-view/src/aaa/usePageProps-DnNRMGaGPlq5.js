import{am as H,X as e}from"./router-D2A3v33YTGz9.js";import{b5 as S,b6 as c}from"./common-BQgXWrz2O5Bt.js";import{a5 as I,bF as W,bG as V,T as u,Z as h,Q as _,af as F,bH as X,ac as T,bI as N}from"./render-common-CBDTO_er9s96.js";const O="_MobileBridgePageChildrenWrapper_akmhi_1",Q={MobileBridgePageChildrenWrapper:O};function a(t){return c.isValidElement(t)}const J=H()?Z:t=>t;function Z(t){var P,p;const o=I(),n=S(),m=c.useRef(n);m.current=n;const{mapTitleBarAction:s}=W(),d=V(),{pathname:g}=S(),[C,w]=c.useState(!0);if(c.useLayoutEffect(()=>{if(d)return d.pageShown(g),()=>{d.pageHidden(g)}},[]),!o)return{...t,titleHidden:!0};const b=t.title&&typeof t.title!="string"?void 0:t.title,r=t.subtitle&&typeof t.subtitle!="string"?void 0:t.subtitle,E=r?e.jsx(u,{variant:"bodySm",as:"span",tone:"subdued",children:r}):void 0,y=t.additionalMetadata?e.jsx(u,{variant:"bodyXs",as:"span",tone:"subdued",children:t.additionalMetadata}):void 0,A=t.titleMetadata?e.jsx(h,{children:t.titleMetadata}):void 0,x=a(t.primaryAction)?t.primaryAction:void 0,M=a(t.secondaryActions)?t.secondaryActions:void 0,f=y||A||a(t.primaryAction)||a(t.secondaryActions)?e.jsx(_,{paddingBlockEnd:{sm:"400"},children:e.jsx(F,{children:e.jsx(X,{threshold:.5,onIntersectionChange:i=>{w(i.isIntersecting)},children:e.jsxs(h,{gap:"100",align:"space-between",blockAlign:"end",children:[e.jsxs(T,{gap:"100",children:[e.jsxs(h,{gap:"200",blockAlign:"center",align:"start",children:[e.jsx(u,{as:"span",variant:"heading2xl",children:t.title}),A]}),E??r,y]}),e.jsxs(T,{gap:"100",children:[x,M]})]})})})}):void 0,v=e.jsxs(e.Fragment,{children:[f,t.children,e.jsx(N,{pathname:n.pathname,onVisible:i=>{if(i&&"onPageLoad"in o){const{pathname:l,search:L,hash:R}=m.current;(async()=>await o.onPageLoad({pathname:l,search:L,hash:R}))()}}})]}),B=(()=>{const{primaryAction:i}=t;if(!a(t.primaryAction)&&i&&typeof i=="object"&&"content"in i)return s(i)})(),j=!t.secondaryActions||a(t.secondaryActions)||(P=t.secondaryActions)==null?void 0:P.map(s),k=(p=t.actionGroups)==null?void 0:p.map(({title:i,actions:l})=>({title:i,actions:l.map(s)}));n.pathname===window.location.pathname&&(async()=>await o.setTitleBar({title:f&&C?"":b??"",subtitle:r,primaryAction:B,secondaryActions:j,actionGroups:k},{pathname:n.pathname}))();const G=t.children?e.jsx("div",{className:Q.MobileBridgePageChildrenWrapper,children:v}):v;return{...t,title:b,children:G,primaryAction:B||x?void 0:t.primaryAction,secondaryActions:j||M?void 0:t.secondaryActions,actionGroups:k?void 0:t.actionGroups,titleHidden:!0}}export{J as u};
//# sourceMappingURL=https://web-sourcemaps.shopify.io/v1/en/usePageProps-DnNRMGaGPlq5.js.map
